2025-01-19 03:33:31 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:34:42 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:34:42 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:42 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:42 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:43 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-19 03:34:43 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:43 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:44 - root - INFO - SQL:
SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
filing_date
20160511

2025-01-19 03:34:44 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:44 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:44 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:45 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:34:45 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:45 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:45 - root - INFO - SQL:
SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
Results:
Too long, hard cut:
filing_date
0
0
19661104
19831124
19940603
19771125
19660422
19780306
19880302
19950405
0
0
0
19940709
0
20101209
20021205
19491117
19640424
19731018
19751212
19310429
20110822
20110622
20160502
20030220
20051027
20090409
0
0
19661027
19770223
19790928
19740617
19891011
19790131
19990204
19800602
20020226
20020712
19980603
19910509
19861007
19851219
19840507
20060829
20041102
20060925
20111123
20130419
0
0
19860109
20061213
19880519
0
19730711
19760408
19930324
19780523
19800624
0
19910408
19830713
19850806
19951002
19960917
18970414
20001128
20091021
20090903
20131227
20160726
0
0
19720608
0
20080208
19770408
19880407
19921015
19820628
19691202
0
19931110
19940405
20030211
19990531
19900926
19870430
20020131
20060307
20080208
20030228
20050210
20111108
20150506
19580519
19891023
19890329
19710419
19840510
0
20000616
19280927
19500618
19870430
19870801
19750922
19781031
19880630
20020425
20040608
19990212
20080328
20090806
20130516
20160822
20061214
20000623
19730427
19770523
19351119
20010531
19980910
20010417
19861004
19891128
19941117
19290917
19410527
19310103
20120929
20130405
20010109
20081015
20130603
20140627
20150410
20160701
20150127
20151209
20020927
0
0
0
19960829
19411126
19850228
19910426
19740827
19490609
19830802
19940615
19160803
20010522
20011206
19040305
20031028
20051017
20040705
20060210
20080820
20100720
20121109
0
0
0
19830805
19690306
19370224
19761029
19871124
19800315
19080509
19270722
19881104
19920421
19670612
19921120
0
19720901
20140319
19731109
19810925
19811118
19791211
19831227
19880908
20030411
20140625
20080804
19030502
20160326
20161228
20160203
0
19980811
19681016
19711001
19811207
19860407
19890523
19930622
20071004
19950906
19991007
19740826
19741022
19761220
19930831
19981225
19971229
20001209
20091105
20090402
20101217
20110623
20120104
20120824
0
19711229
19980107
19730801
19960130
19800215
19880309
19890512
19640323
20020422
20020527
19851025
19700116
20060313
19860527
19880718
20050617
20101018
20130227
20041013
20030313
20140313
0
0
0
0
0
19790403
19840315
19970124
19910618
19940117
19371212
19761027
19801125
19910701
19941209
19310601
20060801
20071227
20061225
20070629
19991122
20001030
20101105
20100604
20120605
20120606
20151207
20160414
0
0
19321024
19750415
20090324
19211111
19910523
19710712
19750630
19980318
19960329
19910808
20140403
19840820
19800822
19911128
20030521
19690403
20010406
20020205
20040412
20081127
20100406
20100330
0
0
19720414
19820729
19930401
0
19920731
19220808
19890810
19810318
19730430
19910412
19981106
20131021
20050331
19780912
19810827
19910610
19970626
19890724
20010315
20120712
19890120
19030407
20070809
20100802
19961029
20141203
20041013
20100122
20141124
20150408
20151023
20170522
20161202
20160613
20041221
20120614
19870413
19610904
19870108
19800117
19170611
19701002
19771021
19760809
19921223
19230528
19561217
19800408
19760227
19740508
19800630
19810630
19980512
19490609
19161201
19820217
20050824
20111227
19020614
20110901
20140722
20150209
20160615
20160728
0
0
19850214
19740129
19780112
20000802
19600603
19771111
19880412
19740325
19750320
20031103
19800808
19770908
19810914
19900927
19901218
19270419
20021203
19430422
19770816
20000815
20020318
20020220
20031219
20111124
19091223
20060202
20060217
20110517
19611107
19910927
19641027
19970814
19870514
19700404
19770217
19910325
19770608
19910318
20010727
19861029
19941223
19690224
20011106
20120516
20080204
20110628
20121213
0
19550218
19710312
19851024
20010815
0
19920402
19770418
19221111
19361121
19800125
19910424
19770329
19921027
19930821
19990323
19620807
19960603
19961202
19410328
20120217
20141111
20140814
20151231
19790327
19620306
19680914
19780131
0
19740621
19790103
19860326
19910221
19870417
19631015
20050629
19921023
19681105
19820924
19821125
19910930
19931006
18971209
20021004
20050225
20140902
20020820
20150128
20150525
19970904
19180604
19920131
19770415
19160927
19960223
19920319
19760611
19940328
19980408
19990907
19270531
19570521
19780818
19951206
20050621
20061201
20070824
20140828
20160905
0
19841012
19640617
20021205
20060111
0
19040305
19820429
19810223
19960814
20031223
19951101
19910206
20071205
19730911
19831130
19920904
19901019
19931221
19170607
19881022
20051125
20091030
20080926
20110601
20120406
20121220
20160905
20040722
20080925
20030815
20110920
19980206
20160621
20161115
20140619
20110331
20141009
20150613
20040408
20151106
20161129
20150615
20150421
20070807
0
19660502
19750227
19920402
19860331
19251001
19960826
19980918
19900918
19920724
19921130
20050225
20070315
20090326
20051226
20130924
20160705
20160519
20161110
20170113
20131008
20060622
0
20120224
19750122
19300305
19090122
19740614
19941014
19991116
20020301
19980520
19940819
19880819
19950518
20011121
20020809
20020816
20100916
20150721
19010130
19091124
19990212
20070514
20090424
20091207
20110822
20150412
20160114
20160121
20060613
20160226
20080704
19980922
20111027
0
19591120
19671116
20131004
0
0
19710817
19770805
19870306
19900620
20070417
19720510
20020304
19990

2025-01-19 03:34:45 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:45 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:45 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:46 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:34:46 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:47 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:47 - root - INFO - SQL:
SELECT t."filing_date", TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') AS "parsed_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') IS NOT NULL
   LIMIT 1000;
Results:
Too long, hard cut:
filing_date,parsed_date
19760303,1976-03-03
19940224,1994-02-24
19760707,1976-07-07
19320313,1932-03-13
19390302,1939-03-02
20110704,2011-07-04
19970425,1997-04-25
19891115,1989-11-15
19140427,1914-04-27
20061113,2006-11-13
20090206,2009-02-06
20130417,2013-04-17
20050705,2005-07-05
19930204,1993-02-04
19690801,1969-08-01
19840215,1984-02-15
19850919,1985-09-19
20121129,2012-11-29
19720313,1972-03-13
19760921,1976-09-21
19780818,1978-08-18
19890221,1989-02-21
19880408,1988-04-08
19750520,1975-05-20
19960305,1996-03-05
19890807,1989-08-07
19990924,1999-09-24
19220730,1922-07-30
19980710,1998-07-10
19830629,1983-06-29
19870526,1987-05-26
19960918,1996-09-18
19970925,1997-09-25
19910930,1991-09-30
19961219,1996-12-19
19980504,1998-05-04
19270521,1927-05-21
20100519,2010-05-19
19910819,1991-08-19
20000804,2000-08-04
20060914,2006-09-14
20020219,2002-02-19
20020507,2002-05-07
20050319,2005-03-19
20080201,2008-02-01
20151231,2015-12-31
19810610,1981-06-10
19781103,1978-11-03
19721016,1972-10-16
19710527,1971-05-27
19700618,1970-06-18
19860131,1986-01-31
19910613,1991-06-13
19960821,1996-08-21
19870804,1987-08-04
19891111,1989-11-11
20001226,2000-12-26
19200719,1920-07-19
19060316,1906-03-16
20150330,2015-03-30
20161111,2016-11-11
20120119,2012-01-19
20160118,2016-01-18
20060324,2006-03-24
20120229,2012-02-29
20130326,2013-03-26
20110923,2011-09-23
19760625,1976-06-25
19710507,1971-05-07
19610112,1961-01-12
19820802,1982-08-02
19690111,1969-01-11
19680109,1968-01-09
19780831,1978-08-31
19910930,1991-09-30
19200306,1920-03-06
19740530,1974-05-30
19880620,1988-06-20
19900726,1990-07-26
19920420,1992-04-20
19380621,1938-06-21
19860802,1986-08-02
19890928,1989-09-28
19880720,1988-07-20
20040303,2004-03-03
20050617,2005-06-17
20060622,2006-06-22
20100722,2010-07-22
20030321,2003-03-21
20091125,2009-11-25
20100930,2010-09-30
20110927,2011-09-27
20111202,2011-12-02
20090825,2009-08-25
20140512,2014-05-12
20160930,2016-09-30
20100610,2010-06-10
20150922,2015-09-22
19880128,1988-01-28
19450914,1945-09-14
19930719,1993-07-19
19930226,1993-02-26
19950220,1995-02-20
19950424,1995-04-24
19910607,1991-06-07
20020123,2002-01-23
19980702,1998-07-02
19890901,1989-09-01
19821231,1982-12-31
20000322,2000-03-22
20000501,2000-05-01
20010913,2001-09-13
20060728,2006-07-28
20100813,2010-08-13
20110309,2011-03-09
20120730,2012-07-30
19680808,1968-08-08
19830421,1983-04-21
19880114,1988-01-14
19170201,1917-02-01
20070801,2007-08-01
19740925,1974-09-25
19300411,1930-04-11
19820917,1982-09-17
19910312,1991-03-12
19780526,1978-05-26
19820521,1982-05-21
20021018,2002-10-18
19910322,1991-03-22
19741022,1974-10-22
19850921,1985-09-21
19871229,1987-12-29
19971210,1997-12-10
20020401,2002-04-01
20000331,2000-03-31
20000717,2000-07-17
20110404,2011-04-04
20150430,2015-04-30
20151027,2015-10-27
20031226,2003-12-26
20141011,2014-10-11
19860530,1986-05-30
19590529,1959-05-29
19580212,1958-02-12
19710213,1971-02-13
19350216,1935-02-16
19910618,1991-06-18
19960216,1996-02-16
19500524,1950-05-24
19771213,1977-12-13
19761227,1976-12-27
19841023,1984-10-23
20030227,2003-02-27
20021010,2002-10-10
20021127,2002-11-27
20161125,2016-11-25
20130227,2013-02-27
20050216,2005-02-16
20090810,2009-08-10
19650318,1965-03-18
19820614,1982-06-14
19800129,1980-01-29
19760206,1976-02-06
19801105,1980-11-05
19860802,1986-08-02
19820209,1982-02-09
19990225,1999-02-25
19740625,1974-06-25
19890712,1989-07-12
20131223,2013-12-23
19970416,1997-04-16
19890906,1989-09-06
19701229,1970-12-29
19861112,1986-11-12
19841227,1984-12-27
20000509,2000-05-09
20030326,2003-03-26
20110315,2011-03-15
20130314,2013-03-14
20150915,2015-09-15
20020814,2002-08-14
20080130,2008-01-30
20100719,2010-07-19
20110905,2011-09-05
20120824,2012-08-24
19660921,1966-09-21
19720303,1972-03-03
19730711,1973-07-11
20010619,2001-06-19
20050726,2005-07-26
19940622,1994-06-22
19810514,1981-05-14
19981214,1998-12-14
20151116,2015-11-16
20020903,2002-09-03
19580109,1958-01-09
19890421,1989-04-21
19950518,1995-05-18
19980622,1998-06-22
19730912,1973-09-12
19780902,1978-09-02
19780822,1978-08-22
19960905,1996-09-05
19200228,1920-02-28
19880215,1988-02-15
20000808,2000-08-08
20010226,2001-02-26
20120720,2012-07-20
20130920,2013-09-20
20150427,2015-04-27
20110216,2011-02-16
20121109,2012-11-09
20140926,2014-09-26
20051110,2005-11-10
20111121,2011-11-21
20141128,2014-11-28
20040916,2004-09-16
20050624,2005-06-24
19820212,1982-02-12
19710211,1971-02-11
19910619,1991-06-19
19870217,1987-02-17
19950302,1995-03-02
19910821,1991-08-21
19781108,1978-11-08
19980626,1998-06-26
19640208,1964-02-08
20070307,2007-03-07
20130313,2013-03-13
19791025,1979-10-25
19880615,1988-06-15
19871130,1987-11-30
20050901,2005-09-01
20031202,2003-12-02
20130314,2013-03-14
20061003,2006-10-03
20140519,2014-05-19
19770214,1977-02-14
19830804,1983-08-04
20111027,2011-10-27
19630410,1963-04-10
20140402,2014-04-02
19750926,1975-09-26
20121002,2012-10-02
19810826,1981-08-26
19600328,1960-03-28
20140829,2014-08-29
20020823,2002-08-23
20130916,2013-09

2025-01-19 03:34:47 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:47 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:47 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:48 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:34:48 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:48 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:49 - root - INFO - SQL:
SELECT t."publication_number", SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_year
JP-1810118-C,0
JP-1203714-C,0
FR-1500580-A,1966
ES-8501233-A1,1983
CA-2165155-A1,1994
FR-2409943-B1,1977
GB-1086860-A,1966
JP-S54117658-A,1978
JP-H0710178-Y2,1988
JP-3172057-B2,1995
US-136580-A,0
US-272220-A,0
US-599187-A,0
CN-1062411-C,1994
DE-1479218-U,0
EP-2512367-B1,2010
ES-2312527-T3,2002
FR-1000748-A,1949
FR-1573809-A,1964
JP-S5066757-U,1973
JP-S5845249-Y2,1975
US-2103405-A,1931
GB-201114438-D0,2011
JP-5707248-B2,2011
JP-2016211567-A,2016
KR-20040075216-A,2003
CN-1954806-A,2005
CN-201399214-Y,2009
JP-1368881-C,0
JP-1444589-C,0
FR-1497898-A,1966
DE-2707796-A1,1977
DE-2962208-D1,1979
FR-2233137-A1,1974
GB-2224027-B,1989
JP-S5911756-Y2,1979
JP-2000218515-A,1999
JP-S56169301-A,1980
US-2002102047-A1,2002
CN-1467804-A,2002
EP-0988417-B1,1998
JP-H04334685-A,1991
JP-S6359143-U,1986
JP-H0685910-B2,1985
JP-H0350567-B2,1984
JP-5108773-B2,2006
CN-2768052-Y,2004
CN-1940157-B,2006
CN-202318915-U,2011
CN-203200362-U,2013
JP-897785-C,0
JP-1789132-C,0
JP-S62113530-U,1986
CA-118661-S,2006
FI-882364-A0,1988
CA-810158-A,0
DE-2335240-A1,1973
DE-7610943-U1,1976
JP-H0673947-U,1993
JP-S54153049-A,1978
JP-S5716116-U,1980
US-548167-A,0
CN-1055840-A,1991
JP-S6020713-A,1983
JP-S6234024-A,1985
JP-H0995081-A,1995
JP-H1088758-A,1996
GB-189709494-A,1897
JP-2001195445-A,2000
JP-2010101160-A,2009
CN-101746294-A,2009
CN-104170353-A,2013
CN-206056613-U,2016
JP-1032657-C,0
JP-1654837-C,0
DK-146223-C,1972
CA-564325-A,0
GB-0802422-D0,2008
JP-S53139175-U,1977
JP-H01150349-U,1988
JP-2600796-Y2,1992
JP-S591896-U,1982
JP-S4922438-B1,1969
US-419959-A,0
DE-69331528-D1,1993
DE-69430885-T2,1994
EP-1474362-B1,2003
JP-2000346423-A,1999
JP-2765752-B2,1990
KR-900003183-Y1,1987
JP-2003229053-A,2002
JP-2007241524-A,2006
JP-5129599-B2,2008
KR-100547071-B1,2003
KR-20070020426-A,2005
KR-20130050682-A,2011
CN-204556165-U,2015
ES-66185-Y,1958
CA-1331409-C,1989
FI-891492-A0,1989
GB-1348507-A,1971
JP-S60179587-U,1984
US-332138-A,0
CN-1112492-C,2000
DE-566539-C,1928
DE-845109-C,1950
JP-S63125649-A,1987
JP-S6423693-U,1987
JP-S5243021-U,1975
JP-S5566205-U,1978
JP-H0825023-B2,1988
JP-2003215980-A,2002
JP-4255884-B2,2004
KR-100295305-B1,1999
CN-101547005-A,2008
CN-101988676-A,2009
CN-203259375-U,2013
CN-205932945-U,2016
DE-202006018912-U1,2006
FR-2828332-A1,2000
GB-1375879-A,1973
JP-S53161674-U,1977
US-2053075-A,1935
CN-2484753-Y,2001
CN-1212523-A,1998
FI-20010786-A,2001
JP-S6359144-U,1986
JP-2799203-B2,1989
JP-H08143121-A,1994
US-1837725-A,1929
US-2304134-A,1941
US-1864623-A,1931
JP-5991128-B2,2012
JP-2016105749-A,2013
RU-2191214-C2,2001
RU-2008140707-A,2008
CN-103265598-B,2013
CN-203928708-U,2014
CN-204557664-U,2015
CN-206326242-U,2016
CN-104559893-B,2015
CN-106856628-A,2015
US-6778773-B2,2002
JP-H00985753-A,0
JP-1512007-C,0
NL-28211-C,0
CA-2184504-C,1996
FR-877274-A,1941
JP-S60218905-A,1985
JP-H04326774-A,1991
JP-S5125160-A,1974
FR-1012104-A,1949
JP-S5944363-A,1983
JP-H081564-A,1994
US-1233474-A,1916
US-2002011230-A1,2001
JP-2003169856-A,2001
US-811638-A,1904
KR-200338652-Y1,2003
KR-20070041890-A,2005
CN-1816294-A,2004
CN-2858160-Y,2006
CN-201276086-Y,2008
CN-201816145-U,2010
CN-102907994-A,2012
JP-1573454-C,0
JP-1721868-C,0
JP-2100371-C,0
DK-358583-D0,1983
ES-146285-Y,1969
GB-478690-A,1937
DE-2649618-B2,1976
DE-3766112-D1,1987
DE-8007402-U1,1980
FR-390089-A,1908
FR-638126-A,1927
FR-2638622-B1,1988
JP-H0584037-U,1992
JP-S4739450-Y1,1967
JP-H0642846-U,1992
NL-296405-A,0
NL-7211943-A,1972
EP-2781788-B1,2014
JP-S5072414-U,1973
JP-S5846920-U,1981
JP-S5874811-U,1981
JP-S5687776-U,1979
US-D279853-S,1983
KR-920008597-Y1,1988
JP-2004313014-A,2003
JP-6137070-B2,2014
RU-2008132286-A,2008
US-754320-A,1903
CN-105823611-A,2016
CN-106739164-A,2016
CN-205558012-U,2016
BE-512467-A,0
CA-2244766-A1,1998
DE-1803332-A1,1968
DE-2149141-A1,1971
GB-2089320-A,1981
JP-S62164685-U,1986
JP-H066780-Y2,1989
DE-69322442-T2,1993
EP-1933436-B1,2007
EP-0782478-B1,1995
EP-0993180-B1,1999
JP-S5128923-U,1974
JP-S5153284-U,1974
JP-S5376919-A,1976
JP-3340813-B2,1993
JP-2000192758-A,1998
JP-H11193667-A,1997
RU-17326-U1,2000
KR-20110049427-A,2009
CN-101531763-A,2009
CN-201900010-U,2010
CN-202142477-U,2011
CN-202417422-U,2012
CN-202807027-U,2012
CA-27189-A,0
JP-S4874140-A,1971
JP-2887866-B2,1998
FR-2239893-A5,1973
JP-H09201246-A,1996
JP-S6125607-Y2,1980
JP-H069665-Y2,1988
JP-H02145867-U,1989
DE-1899993-U,1964
DK-1279779-T3,2002
EP-1395943-B1,2002
JP-S61104472-A,1985
US-3605178-A,1970
ES-2301340-B1,2006
KR-890006762-Y1,1986
KR-910005717-Y1,1988
JP-WO2006134667-A1,2005
JP-WO2011121828-A1,2010
JP-6013229-B2,2013
KR-200371816-Y1,2004
KR-20040093694-A,2003
CN-104911016-A,2014
JP-1721970-C,0
JP-H00979262-A,0
JP-2045702-C,0
CA-607467-A,0
CA-870537-A,0
DE-2913333-C2,1979
GB-2156898-B,1984
GB-9701425-D0,1997
DE-69108459-T2,1991
DE-69402587-D1,1994
DE-690465-C,1937
JP-S5354430-A,1976
JP-S5788835-A,1980
JP-H0510017-A,1991
JP-H08159838-A,1994
US-1863894-A,1931
JP-4882580-B2,2006
JP-5210626-B2,2007
RU-2345965-C2,2006
RU-2355420-C2,2007
KR-100352139-B1,1999
KR-100387884-B1,2000
KR-2012

2025-01-19 03:34:49 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:49 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:49 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:50 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:34:50 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:50 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:51 - root - INFO - SQL:
SELECT t."publication_number", t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE SUBSTR(t."filing_date"::VARCHAR, 1, 4) = (
       SELECT SUBSTR(p."filing_date"::VARCHAR, 1, 4)
       FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
       WHERE p."publication_number" = 'US-9741766-B2'
   )
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date
CN-106884928-A,20161215
CN-205704147-U,20160601
US-2016218216-A1,20160404
WO-2017024952-A1,20160729
CN-205496576-U,20160303
WO-2017088628-A1,20161031
WO-2016200781-A1,20160607
EP-3088510-A1,20160426
CN-106509561-A,20161108
WO-2017104122-A1,20161209
CN-105795923-A,20160606
CN-206006598-U,20160517
CN-105750291-A,20160406
RU-2619762-C1,20160314
US-D786980-S,20160425
EP-3210495-A1,20160223
JP-2016199809-A,20160729
CN-106152887-A,20160812
EP-3151175-A1,20160825
CN-105883730-A,20160505
EP-3048143-A1,20160112
US-D796897-S,20160108
CN-205721349-U,20160429
CN-106176476-A,20160831
CN-106522997-A,20161124
US-2017030099-A1,20161017
CN-105571770-A,20160119
JP-1580448-S,20161228
CN-106647074-A,20161202
CN-206132088-U,20160812
CN-206000708-U,20160819
CN-205339623-U,20160112
CN-106440038-A,20161010
CN-205843289-U,20160725
CN-106275646-A,20160808
CN-206174410-U,20161021
CN-105748422-A,20160405
CN-106330076-A,20161008
CN-206103916-U,20160922
CN-206165658-U,20161110
WO-2016132888-A1,20160202
WO-2016193180-A1,20160527
CN-205880480-U,20160406
RU-2624854-C1,20161018
CN-106044584-A,20160715
CN-105866896-B,20160519
CN-105551773-A,20160121
CN-105877978-A,20160627
JP-2016182411-A,20160720
CN-106297967-A,20160826
CN-205430699-U,20160323
CN-205905675-U,20160415
CN-205739199-U,20160428
US-2016289825-A1,20160404
US-2017070690-A1,20161117
WO-2017032598-A1,20160810
CN-106508339-A,20161009
KR-101721410-B1,20160530
CN-105766635-A,20160314
KR-101743576-B1,20160427
US-9660655-B2,20161215
CN-106727896-A,20161221
WO-2016158606-A1,20160323
US-2016206156-A1,20160115
US-D780445-S,20160202
US-D796316-S,20160511
CN-106198950-A,20160708
CN-105538322-A,20160204
CN-106271334-A,20160930
CN-106165964-A,20160823
CN-105773526-A,20160422
CN-105527818-A,20160129
ES-2629152-A1,20160203
CN-105493662-A,20160119
EP-3089264-A1,20160421
CN-105772579-A,20160517
CN-105457809-A,20160202
CN-105572889-A,20160225
CN-106187779-A,20160709
CN-106065973-A,20160421
CN-105912280-A,20160624
CN-205487754-U,20160118
CN-105656178-A,20160322
CN-106172128-A,20160720
CN-106503288-A,20160918
CN-205313754-U,20160107
CN-105845277-A,20160328
CN-106771950-A,20161221
CN-205810080-U,20160720
US-2017016759-A1,20160714
CN-105693054-A,20160419
US-2016229907-A1,20160426
CN-206182741-U,20160716
CN-206069431-U,20160826
US-2016250980-A1,20160225
KR-101672828-B1,20160614
WO-2017088973-A8,20161122
US-2017133510-A1,20160202
CN-105864492-A,20160531
US-2016287303-A1,20160615
CN-106345543-A,20160913
CN-205811599-U,20160629
US-2017174842-A1,20161220
US-2016374997-A1,20160629
CN-106057302-A,20160804
CN-106301520-B,20160727
US-2016211560-A1,20160110
CN-106139012-A,20160729
WO-2017066116-A1,20161010
US-2017035765-A1,20160808
CN-205890258-U,20160616
JP-2016171803-A,20160422
CN-205940341-U,20160804
CN-206053505-U,20160930
CN-105783673-A,20160419
CN-106318871-A,20161020
CN-205785408-U,20160706
EP-3054476-A1,20160203
CN-205367842-U,20160303
CN-205774239-U,20160712
US-9518281-B1,20160809
US-2016224568-A1,20160411
US-2017023518-A1,20160930
CN-106549507-A,20161027
CN-206313979-U,20161212
US-9564463-B2,20160225
GB-2547282-A,20160215
CN-106120134-A,20160819
WO-2017108356-A1,20161130
JP-2016179932-A,20160322
CN-205349441-U,20160111
CN-106012499-A,20160624
CN-205696870-U,20160415
CN-205813072-U,20160628
CN-206240839-U,20161108
CN-206154883-U,20161110
WO-2017053436-A1,20160921
WO-2017151179-A1,20160726
CN-106189103-A,20160824
ES-2578809-A1,20160329
US-2017133903-A1,20160419
US-2016235671-A1,20160426
WO-2016116318-A1,20160111
CN-206212800-U,20161117
US-2017183572-A1,20161214
US-2017156185-A1,20161104
CN-106035774-A,20160713
CN-106805847-A,20161216
CN-105755786-A,20160509
WO-2016209952-A1,20160622
CN-105811623-A,20160511
US-2017120000-A1,20161031
CN-206042462-U,20160518
CN-206271698-U,20161223
CN-106476879-A,20160823
KR-101749274-B1,20161130
CN-205529428-U,20160627
CN-205380732-U,20160318
US-9708249-B1,20160824
JP-6167314-B2,20160830
CN-205471888-U,20160202
CN-206098838-U,20160907
GB-201611871-D0,20160707
GB-201613182-D0,20160729
WO-2017099122-A1,20161207
CN-206057421-U,20160831
CN-106258453-A,20160929
CN-105758634-A,20160226
CN-205921148-U,20160826
CN-105547016-A,20160120
CN-105715030-A,20160311
CN-205574882-U,20160422
CN-106995550-A,20160126
CN-205921406-U,20160622
CN-206054980-U,20160829
CN-106056996-A,20160823
US-2017057965-A1,20160825
EP-3043139-A1,20160107
EP-3184656-A1,20161223
KR-101725867-B1,20160122
US-9730169-B2,20160829
CN-105581851-A,20160229
WO-2016174137-A1,20160428
US-2016137606-A1,20160121
CN-205584265-U,20160309
CN-206029710-U,20160825
CN-205908460-U,20160824
US-2016156536-A1,20160207
CN-205601681-U,20160226
CN-205895197-U,20160606
CN-206150630-U,20160824
CN-206278793-U,20161207
CN-106353091-A,20160831
JP-2017035692-A,20160912
CN-106138655-A,20160826
CN-205550999-U,20160225
CN-206010589-U,20160627
CN-106509251-A,20160919
CN-206205135-U,20161009
CN-205633909-U,20160519
CN-205784136-U,20160513
CN-205890888-U,20160810
CN-106336967-A,20160830
CN-106156486-A,20160621
CN-205425

2025-01-19 03:34:51 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:51 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:51 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:52 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-19 03:34:52 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:52 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:52 - root - INFO - SQL:
SELECT t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"

2025-01-19 03:34:52 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:52 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:52 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:55 - snowflake.connector.cursor - INFO - Number of results in first chunk: 73
2025-01-19 03:34:56 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:57 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:57 - root - INFO - SQL:
SELECT t."publication_number", t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."embedding_v1" IS NOT NULL
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_v1
US-5238524-A,"[
  -3.569694600000000e-02,
  1.091246160000000e-01,
  -8.696566000000000e-02,
  -5.249214500000000e-02,
  -2.026235500000000e-02,
  -1.228332100000000e-01,
  -2.662783900000000e-02,
  7.154188000000000e-02,
  6.384524000000000e-02,
  -2.035589200000000e-01,
  7.458057000000000e-02,
  3.209979000000000e-01,
  1.419981900000000e-01,
  -7.767663000000000e-02,
  -1.039061200000000e-01,
  5.897692000000000e-02,
  2.128461700000000e-01,
  5.627649000000000e-02,
  -2.706948000000000e-01,
  1.145322550000000e-01,
  7.630483000000000e-02,
  6.316711000000000e-02,
  -1.459364900000000e-01,
  4.665831500000000e-02,
  1.067651660000000e-01,
  1.369425700000000e-01,
  1.222059200000000e-01,
  -3.934074600000000e-02,
  -7.368673400000000e-02,
  -2.821891600000000e-01,
  6.844579000000001e-02,
  -7.883315000000000e-02,
  -1.100364550000000e-01,
  -2.171354300000000e-01,
  -8.318618999999999e-02,
  -5.838589700000000e-02,
  -1.001938950000000e-01,
  -4.873731400000000e-02,
  1.776320000000000e-01,
  8.161984999999999e-02,
  1.200789300000000e-01,
  1.301946500000000e-03,
  1.148479900000000e-01,
  -9.148388000000000e-02,
  1.589475600000000e-02,
  1.352917600000000e-01,
  1.371218700000000e-01,
  -9.639568599999999e-02,
  1.581350400000000e-01,
  -1.139487850000000e-01,
  4.232562300000000e-02,
  2.166812300000000e-01,
  1.256676800000000e-01,
  -5.226436600000000e-02,
  -1.917003700000000e-01,
  -3.573502600000000e-02,
  -1.934238100000000e-01,
  1.057494950000000e-01,
  -1.090286300000000e-01,
  7.682507500000001e-02,
  6.011416000000000e-02,
  -4.772439600000000e-02,
  -1.717659800000000e-01,
  4.398009000000000e-02
]"
US-4399807-A,"[
  -1.156082750000000e-01,
  -6.751469000000000e-03,
  -5.036004000000000e-02,
  -1.879282000000000e-02,
  -1.044669300000000e-01,
  -4.439341300000000e-02,
  -5.848388400000000e-02,
  3.806121000000000e-02,
  2.885216800000000e-01,
  5.595440400000000e-02,
  -1.466802800000000e-02,
  -3.065339500000000e-02,
  1.198209800000000e-01,
  6.842843400000000e-02,
  -8.390546000000000e-02,
  -1.890292900000000e-01,
  -1.271481000000000e-01,
  -5.156063000000000e-02,
  6.546827400000001e-02,
  1.853869400000000e-01,
  9.171007000000000e-02,
  -5.029962000000000e-02,
  -1.718275200000000e-01,
  -1.814751500000000e-01,
  3.233397000000000e-01,
  -1.013805500000000e-01,
  8.183873400000000e-02,
  1.462269400000000e-01,
  -1.891732800000000e-01,
  4.691555000000000e-02,
  1.072910800000000e-02,
  -5.534596000000000e-02,
  3.538520300000000e-02,
  -6.923172599999999e-02,
  -7.565112400000000e-02,
  -6.278383999999999e-02,
  1.817870100000000e-01,
  -2.127778000000000e-01,
  -5.848981400000000e-02,
  -7.952957000000000e-03,
  -2.259935400000000e-01,
  2.886463300000000e-02,
  6.830008999999999e-02,
  1.965914100000000e-02,
  -8.351676000000000e-02,
  2.232264400000000e-02,
  1.722540500000000e-02,
  -6.079325000000000e-02,
  1.582167700000000e-02,
  -5.307180800000000e-02,
  -9.023270999999999e-02,
  -6.844969500000000e-03,
  7.987070000000001e-03,
  3.110038300000000e-02,
  1.385796500000000e-01,
  -2.194304600000000e-01,
  1.721691500000000e-01,
  -3.118375200000000e-01,
  -1.423686700000000e-01,
  2.831508200000000e-01,
  9.758270500000001e-02,
  7.351360500000000e-02,
  -1.037615600000000e-01,
  5.525585300000000e-02
]"
US-3777713-A,"[
  -3.714427000000000e-02,
  -2.205104000000000e-02,
  4.552292000000000e-02,
  6.296112399999999e-02,
  2.266381700000000e-02,
  1.254268600000000e-01,
  -4.423487200000000e-02,
  -1.549510800000000e-01,
  2.948439000000000e-01,
  -7.010689400000000e-02,
  3.208420800000000e-02,
  1.933668900000000e-01,
  1.942153700000000e-01,
  7.505668000000000e-03,
  -6.770670400000001e-02,
  1.003710850000000e-01,
  2.321457300000000e-01,
  7.890266000000000e-02,
  -8.467876000000001e-02,
  6.580979000000001e-02,
  -1.995520000000000e-01,
  -7.688048500000000e-02,
  -1.137836050000000e-01,
  3.927012500000000e-02,
  8.395525000000000e-02,
  -1.725036200000000e-01,
  1.489349900000000e-01,
  4.386396600000000e-03,
  9.484529000000000e-02,
  1.081363300000000e-01,
  -5.352384200000000e-02,
  3.485712800000000e-02,
  1.719674800000000e-01,
  -2.846693400000000e-01,
  -3.419608600000000e-02,
  4.048607000000000e-02,
  -1.009789800000000e-01,
  -2.111405100000000e-03,
  1.391500700000000e-01,
  -6.965173000000000e-03,
  1.849697900000000e-02,
  -3.783921000000000e-02,
  -7.093511000000000e-02,
  -3.805405600000000e-02,
  1.480709900000000e-01,
  -1.930336500000000e-01,
  -2.794522600000000e-02,
  1.315720100000000e-01,
  -1.779648800000000e-01,
  -1.848160300000000e-02,
  1.522298900000000e-01,
  1.120803100000000e-01,
  9.815019000000000e-02,
  -3.552823000000000e-02,
  -8.721163000000000e-02,
  -2.406563600000000e-01,
  7.030886000000000e-02,
  -8.174422000000001e-02,
  7.246049000000000e-03,
  2.496543500000000e-01,
  -2.334337100000000e-01,
  6.880630000000000e-02,
  -1.128368900000000e-01,
  -1.813162000000000e-01
]"
US-5575347-A,"[
 

2025-01-19 03:34:57 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:57 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:57 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:34:58 - snowflake.connector.cursor - INFO - Number of results in first chunk: 64
2025-01-19 03:34:58 - snowflake.connector.connection - INFO - closed
2025-01-19 03:34:58 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:34:58 - root - INFO - SQL:
SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_value
-0.09759014
-0.078651346
-0.10224627
-0.0983403
-0.25790602
-0.08247189
0.013742259
-0.12294948
0.080819525
0.02691578
-0.111443974
0.13409771
0.07433381
0.0051532313
-0.107546076
-0.01806273
0.18319431
-0.02954358
-0.060462546
7.859522e-05
0.25664663
-0.024329128
-0.10676161
0.10145806
-0.13808568
-0.071496874
0.20854723
-0.13290617
0.040874187
0.033745658
-0.07300707
-0.057065535
0.017014034
-0.044571783
-0.08327014
-0.1801684
0.051138002
-0.30761087
0.15807615
-0.035334043
0.043117434
-0.101780556
0.20707245
-0.08408691
-0.34054148
0.045913506
-0.095601946
0.14381136
0.09557541
-0.032358523
-0.018898478
0.25465798
-0.073037274
0.109022945
-0.03175191
0.054333884
0.15664567
0.074965976
-0.20294082
0.054057088
0.069939174
0.21290104
0.0069557237
0.03396455

2025-01-19 03:34:58 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:34:58 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:34:58 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:00 - snowflake.connector.cursor - INFO - Number of results in first chunk: 74
2025-01-19 03:35:02 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:02 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:02 - root - INFO - SQL:
SELECT p."publication_number", p."filing_date", a."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
     ON p."publication_number" = a."publication_number"
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date,embedding_v1
US-2002199075-A1,20010621,"[
  1.327330600000000e-01,
  -1.390248800000000e-01,
  -8.851990000000000e-02,
  -9.534649000000001e-02,
  -9.190445999999999e-02,
  -7.793257400000000e-02,
  -2.276682800000000e-03,
  -1.273512700000000e-01,
  1.164167000000000e-01,
  1.824077200000000e-02,
  1.768792300000000e-01,
  2.043863400000000e-01,
  -5.214452700000000e-02,
  -9.571313999999999e-03,
  -2.218892700000000e-01,
  3.377413400000000e-02,
  1.092247100000000e-01,
  1.405695800000000e-01,
  -8.305453000000000e-02,
  1.380776500000000e-01,
  4.118194000000000e-02,
  5.223548400000000e-02,
  6.996955000000001e-02,
  -1.863214200000000e-01,
  -5.879353700000000e-03,
  -1.181809200000000e-01,
  1.821372000000000e-01,
  1.003657000000000e-02,
  2.518988200000000e-02,
  1.700414300000000e-01,
  -1.697541800000000e-01,
  -9.175000000000000e-02,
  5.969878300000000e-02,
  1.772470000000000e-02,
  -1.060385700000000e-01,
  -1.592023500000000e-01,
  9.980810000000000e-02,
  -1.771379400000000e-01,
  1.230216800000000e-02,
  3.092083900000000e-02,
  -1.014561800000000e-01,
  -2.828363500000000e-01,
  1.361863500000000e-01,
  1.721303300000000e-01,
  -4.398971000000000e-02,
  -1.389469950000000e-02,
  1.883381200000000e-01,
  -4.531229700000000e-02,
  -1.430749900000000e-01,
  1.128079000000000e-01,
  -2.814714300000000e-01,
  2.599174500000000e-02,
  2.006464200000000e-01,
  -3.294414300000000e-02,
  -3.229250400000000e-02,
  3.630416000000000e-02,
  -5.539227300000000e-02,
  3.239953500000000e-02,
  -2.809038200000000e-01,
  1.027128200000000e-01,
  2.351760300000000e-04,
  1.692046800000000e-01,
  -5.161380400000000e-02,
  1.296108200000000e-01
]"
US-2003048328-A1,20020909,"[
  -2.702655500000000e-01,
  -1.838806400000000e-01,
  1.285569000000000e-02,
  -1.157763800000000e-01,
  -1.229929850000000e-01,
  -1.701488500000000e-02,
  -1.346644400000000e-02,
  -3.185733800000000e-02,
  1.913188800000000e-01,
  -2.219920000000000e-02,
  8.446085000000000e-02,
  2.329903500000000e-01,
  1.853730500000000e-01,
  -1.128309000000000e-01,
  1.308142400000000e-01,
  -1.681749500000000e-02,
  2.669037800000000e-03,
  -3.269643000000000e-02,
  -2.339415600000000e-01,
  8.544633500000000e-02,
  -3.111701800000000e-02,
  6.132171700000000e-02,
  -6.193825500000000e-03,
  -1.194184100000000e-01,
  3.186201000000000e-02,
  -5.385209600000000e-02,
  -6.190734700000000e-02,
  -1.719800500000000e-01,
  5.044012500000000e-02,
  -1.428283500000000e-01,
  3.900431000000000e-02,
  -1.689109800000000e-01,
  1.080429500000000e-01,
  3.628505400000000e-02,
  -1.093701350000000e-01,
  -4.550829000000000e-02,
  2.120426300000000e-02,
  -3.028842000000000e-01,
  9.250326000000000e-02,
  5.986650300000000e-02,
  8.118051000000000e-02,
  -6.228786000000000e-02,
  -8.558510000000000e-02,
  -9.565390000000000e-02,
  -4.911348000000000e-02,
  -1.153620600000000e-02,
  -1.124967800000000e-01,
  -1.549457200000000e-01,
  2.103537600000000e-01,
  -1.087370300000000e-01,
  -1.879206600000000e-01,
  1.774610300000000e-01,
  -2.214985200000000e-01,
  -3.011048300000000e-03,
  -1.456843900000000e-01,
  1.522214200000000e-02,
  -1.584044000000000e-02,
  -1.045927400000000e-01,
  -1.666246700000000e-01,
  -2.193481700000000e-02,
  2.186357500000000e-01,
  6.251993000000000e-02,
  -1.441963600000000e-01,
  1.570182600000000e-01
]"
US-2003102128-A1,20020401,"[
  6.680477000000000e-02,
  -3.299055400000000e-01,
  7.520198000000000e-02,
  1.826542500000000e-01,
  -6.079824600000000e-03,
  1.689028000000000e-01,
  -1.259003400000000e-01,
  -1.360124600000000e-01,
  1.842365300000000e-01,
  -1.851732000000000e-01,
  2.550390700000000e-01,
  3.494883300000000e-02,
  -4.961433600000000e-02,
  7.020295000000000e-02,
  5.756646800000000e-02,
  3.387458600000000e-04,
  1.771642000000000e-02,
  6.763998000000000e-02,
  -1.291013700000000e-01,
  1.065049400000000e-02,
  5.928725000000000e-02,
  -2.486805400000000e-02,
  4.177788300000000e-02,
  -1.247509200000000e-01,
  3.049314300000000e-01,
  1.938775800000000e-01,
  1.244309500000000e-02,
  4.069222500000000e-02,
  7.518745000000000e-02,
  -1.789746200000000e-02,
  1.996825800000000e-01,
  -1.195497400000000e-02,
  4.062491000000000e-02,
  -2.441228600000000e-01,
  -8.912602000000000e-02,
  -1.156921500000000e-01,
  -5.954484600000000e-02,
  -1.913798300000000e-01,
  3.190865700000000e-02,
  8.777053999999999e-02,
  -4.238689000000000e-02,
  -2.312318500000000e-01,
  1.301439700000000e-01,
  -6.900159000000000e-02,
  -1.503533900000000e-01,
  1.719946500000000e-03,
  -7.323673999999999e-02,
  3.023402000000000e-02,
  -1.739042400000000e-01,
  -1.482971900000000e-02,
  -1.961514000000000e-02,
  1.109461500000000e-02,
  1.687544100000000e-01,
  -1.294664100000000e-01,
  1.619266900000000e-01,
  -5.169846000000000e-02,
  2.922115100000000e-02,
  -1.998932000000000e-02,
  -4.254939800000000e-02,
  8.191690000000000e-02,
  5.848678600000000e-02,
  1.285853800000000e-01,
  -1.73541400000

2025-01-19 03:35:02 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:02 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:02 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:04 - snowflake.connector.cursor - INFO - Number of results in first chunk: 76
2025-01-19 03:35:05 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:06 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:06 - root - INFO - SQL:
SELECT p."publication_number", p."filing_date", a."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
      ON p."publication_number" = a."publication_number"
    WHERE SUBSTR(p."filing_date"::VARCHAR, 1, 4) = (
        SELECT SUBSTR(p2."filing_date"::VARCHAR, 1, 4)
        FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p2
        WHERE p2."publication_number" = 'US-9741766-B2'
    )
      AND a."embedding_v1" IS NOT NULL
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date,embedding_v1
DE-102016001697-A1,20160213,"[
  1.549099000000000e-01,
  -1.529168000000000e-01,
  -7.213778000000000e-02,
  -2.554955300000000e-02,
  -2.324849200000000e-02,
  7.960399000000000e-02,
  -2.994583500000000e-01,
  -2.408500200000000e-01,
  5.120073300000000e-02,
  -2.324403400000000e-01,
  2.403068400000000e-01,
  8.421313000000000e-02,
  1.471564300000000e-01,
  -2.165872800000000e-02,
  1.292518100000000e-01,
  1.023155000000000e-01,
  2.348361900000000e-01,
  -4.559362300000000e-02,
  4.471442500000000e-02,
  1.060289200000000e-01,
  4.782022500000000e-02,
  -1.191397400000000e-01,
  -3.036612300000000e-01,
  -8.551340000000000e-02,
  -9.539342000000001e-02,
  7.385439000000001e-02,
  1.483603700000000e-02,
  3.224414200000000e-02,
  9.637590000000000e-02,
  -1.018490200000000e-01,
  7.254729000000000e-02,
  1.270311500000000e-01,
  1.199462340000000e-01,
  -1.104812500000000e-01,
  -1.120333700000000e-01,
  -1.088639600000000e-01,
  7.865123500000000e-02,
  -4.784877000000000e-02,
  3.520915000000000e-02,
  3.264184300000000e-02,
  -1.520401100000000e-02,
  -1.124594700000000e-01,
  7.913671000000000e-02,
  -5.087936000000000e-02,
  -2.524172500000000e-02,
  -1.483058800000000e-01,
  2.728901200000000e-01,
  4.521684300000000e-02,
  4.784027000000000e-02,
  -1.173334940000000e-01,
  -4.448974500000000e-03,
  1.091178300000000e-01,
  -3.079926600000000e-02,
  -8.082644000000000e-02,
  -5.408863400000000e-02,
  -1.636218400000000e-01,
  1.149675500000000e-01,
  -7.529661000000000e-02,
  -1.305037900000000e-01,
  2.413305000000000e-01,
  -1.680802700000000e-01,
  5.491068600000000e-03,
  -7.520950600000000e-02,
  4.643416400000000e-02
]"
DE-102016002976-A1,20160310,"[
  1.080961600000000e-01,
  -1.560033000000000e-01,
  -5.361448200000000e-02,
  -1.277045800000000e-01,
  2.663581800000000e-02,
  1.669633800000000e-01,
  -1.277683700000000e-01,
  -7.752000000000001e-02,
  1.107219500000000e-01,
  -1.414034800000000e-01,
  9.812702000000000e-02,
  6.655346600000001e-02,
  3.884482400000000e-02,
  -7.912571000000000e-03,
  -1.226099400000000e-01,
  8.070976000000001e-02,
  2.761173000000000e-01,
  -1.004241500000000e-02,
  -3.320851000000000e-02,
  8.254775000000000e-02,
  -6.338961999999999e-02,
  -1.407725400000000e-01,
  -3.232083000000000e-01,
  6.268948000000001e-02,
  5.053718400000000e-02,
  4.564973500000000e-03,
  -2.358472800000000e-01,
  -5.713523400000000e-03,
  9.625441600000000e-02,
  -1.931270700000000e-01,
  8.233175000000000e-02,
  1.737792500000000e-01,
  9.721842999999999e-02,
  -9.084876000000000e-02,
  -1.432427200000000e-01,
  8.013015000000000e-02,
  1.339592000000000e-01,
  -8.731394000000001e-02,
  7.339930500000000e-02,
  6.434613000000000e-02,
  5.017245600000000e-02,
  -1.346952200000000e-01,
  -3.966465600000000e-02,
  -1.000965800000000e-01,
  2.571577400000000e-02,
  5.158128600000000e-02,
  3.348139200000000e-01,
  -5.863165500000000e-02,
  9.051973000000000e-03,
  -3.042507500000000e-01,
  -9.247884000000001e-02,
  5.058278500000000e-02,
  4.307804000000000e-02,
  -1.447715000000000e-01,
  -1.538339400000000e-01,
  -8.927262599999999e-02,
  9.275870999999999e-02,
  1.151088300000000e-01,
  -1.931780200000000e-02,
  9.917801000000000e-02,
  -1.315736000000000e-01,
  1.319402500000000e-01,
  -9.199432000000000e-02,
  4.328586500000000e-02
]"
DE-102016100284-A1,20160111,"[
  2.607094700000000e-02,
  4.794078000000000e-02,
  4.010330000000000e-02,
  -7.259847000000000e-02,
  -1.654711000000000e-01,
  2.216098500000000e-02,
  -7.231438000000000e-02,
  1.706665600000000e-01,
  1.575905500000000e-01,
  -9.465034000000000e-02,
  1.566829500000000e-01,
  9.948485999999999e-02,
  6.974441600000000e-02,
  -1.604837300000000e-01,
  -3.346260000000000e-02,
  -3.970695700000000e-02,
  6.915731000000000e-02,
  6.287814000000000e-02,
  3.810562000000000e-02,
  1.945252300000000e-01,
  -8.611958000000000e-02,
  -2.505885400000000e-01,
  -1.423204500000000e-01,
  -2.428623100000000e-01,
  1.131937000000000e-01,
  -2.667475600000000e-01,
  1.342579700000000e-02,
  1.257706200000000e-02,
  1.734840400000000e-01,
  -1.575499600000000e-01,
  -2.669501100000000e-02,
  5.529123000000000e-02,
  -5.362224200000000e-02,
  -1.511874500000000e-01,
  -1.915567400000000e-01,
  7.200052999999999e-02,
  2.822164600000000e-01,
  -1.699087900000000e-01,
  -4.788293700000000e-02,
  -1.472453600000000e-02,
  2.011782500000000e-01,
  -5.090971000000000e-02,
  1.051542600000000e-01,
  -1.146227050000000e-01,
  3.063372300000000e-02,
  1.032442800000000e-01,
  3.296781000000000e-02,
  -3.481361600000000e-02,
  -1.180953400000000e-01,
  -3.921800000000000e-02,
  -8.983347999999999e-02,
  2.077014100000000e-01,
  6.045018000000000e-02,
  9.582947000000000e-02,
  1.240175440000000e-01,
  -1.189964700000000e-01,
  -9.571069000000000e-02,
  -1.334451400000000e-01,
  -6.073257000000000e-02,
  4.156873000000000e-02,
  -5.441730000000000e-02,
  2.010973000000000e-01,
  -2.016604400

2025-01-19 03:35:06 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:06 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:06 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:07 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:35:07 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:08 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:08 - root - INFO - SQL:
SELECT p."publication_number", p."filing_date"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    WHERE p."publication_number" != 'US-9741766-B2'
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date
CN-102221073-B,20061003
CN-104032185-A,20140519
JP-S53112560-U,19770214
JP-S6031763-U,19830804
CN-102355073-A,20111027
US-3290735-A,19630410
CN-103939062-A,20140402
US-4009782-A,19750926
US-9346287-B2,20121002
EP-0047436-A1,19810826
US-3053459-A,19600328
US-D769016-S,20140829
US-7001361-B2,20020823
US-8768622-B2,20130916
CN-103146534-B,20130328
CN-105020109-A,20140421
FR-2578945-A1,19850318
EP-0290740-A3,19880309
US-3540309-A,19681120
US-2801452-A,19540111
JP-H07180311-A,19931224
JP-S6215199-U,19850709
US-3800598-A,19721109
JP-H0246961-A,19880804
CN-102042372-A,20110118
FR-2809142-A1,20000518
CN-104549843-A,20150110
US-4788317-A,19870508
EP-2287459-A1,20100622
US-2664108-A,19490214
EP-2179692-A1,20091019
KR-101284644-B1,20110930
NL-9400648-A,19940422
EP-1979633-A1,20070123
CN-102998715-B,20121121
FR-2852304-A1,20030312
US-4401011-A,19800528
US-3980001-A,19740717
US-5652653-A,19960826
US-2003143352-A1,20020920
JP-S63208691-A,19870226
EP-2563640-A1,20110419
JP-H0427918-Y2,19860918
KR-101356112-B1,20120427
JP-S6259586-A,19850909
US-9185508-B2,20140815
US-9083834-B2,20131127
US-7727119-B2,20040927
US-3303559-A,19650512
CN-103352389-A,20130724
CN-104028531-B,20140425
DE-3505676-C1,19850219
US-5720383-A,19960503
US-RE32332-E,19851003
CN-103985745-A,20140424
EP-0329548-A2,19890214
US-2485875-A,19450125
CN-102522656-A,20111209
CN-105136633-A,20150812
CN-103540276-A,20130929
US-3730406-A,19700903
KR-100744037-B1,20001230
CN-102637824-A,20120427
CN-103524225-A,20131016
FR-2709383-A1,19940725
RU-2499633-C1,20120706
DE-102005027051-A1,20050610
JP-H0140471-Y2,19850807
JP-H0234606-A,19880722
JP-H0313720-B2,19811221
CN-104778235-A,20150402
GB-2213649-A,19890419
EP-2469475-A4,20110330
JP-2010197303-A,20090226
JP-H024798-U,19880623
JP-2010172876-A,20090202
EP-0422564-A3,19901008
US-3837365-A,19730730
CN-102911912-A,20110801
US-4621414-A,19850304
EP-0328412-A3,19890210
US-5993589-A,19990223
CN-102123931-B,20101013
WO-2006027770-A2,20050725
JP-2013206416-A,20120329
CN-100452231-C,20010412
CN-101421795-B,20070405
JP-H02154094-A,19881206
CN-102161570-A,20100707
WO-2007047395-A2,20061012
GB-2322958-B,19980225
EP-0776135-A1,19961122
US-8970668-B2,20101129
EP-1149710-A1,20010426
DE-3120669-A1,19810523
JP-H02135027-U,19890412
EP-0164607-A3,19850515
CN-102700048-A,20120606
CN-102813265-A,20120808
CN-103059180-A,20130115
DE-102013104225-A1,20130425
US-6798389-B1,19990430
CN-104689404-A,20141208
CN-105114055-A,20150814
CN-103821063-A,20140312
EP-0666034-A1,19941222
KR-100866495-B1,20070521
KR-100775300-B1,20060109
US-3782807-A,19720307
CN-103279358-A,20130608
JP-S5451949-U,19770920
EP-2115443-A1,20080227
CN-104623631-A,20150109
US-9525112-B2,20130829
EP-2845538-A1,20140905
FR-2595733-A1,19860317
GB-2421384-A,20051209
JP-2002241708-A,20010219
EP-1919491-A2,20060726
EP-1923371-A1,20060816
EP-0420989-A4,19900328
CN-103115642-B,20130121
DE-19639704-C2,19960926
FR-2730895-A1,19950227
CN-102942066-A,20121119
US-4561577-A,19840912
US-6119952-A,19990827
US-5188878-A,19920429
EP-0054298-A2,19811215
CN-101983201-B,20090408
CN-103889450-A,20111012
US-2970525-A,19560718
US-4992202-A,19891013
JP-2015500151-A,20121214
CN-101546982-B,20080328
CN-102035046-B,20090928
DE-2555921-A1,19751212
JP-S61267279-A,19850520
CN-102335484-A,20110719
ES-2378627-A1,20111214
CN-104740019-A,20150407
US-6308050-B1,19990223
CN-104267382-A,20140923
EP-1434226-A1,20031030
CN-103958095-A,20120814
KR-101248374-B1,20111213
CN-102838039-B,20110621
US-2528327-A,19451108
CN-102686551-A,20101125
CN-102972916-A,20121217
CN-102840937-A,20120621
GB-2413368-A,20010705
DE-102012007836-A1,20120419
DE-19846077-C2,19981006
US-4818778-A,19871207
GB-2376065-A,20010531
GB-2391177-B,20020402
WO-9816434-A1,19971013
CN-100533391-C,20070516
KR-100749366-B1,20070430
CN-1989298-B,20050727
JP-2014114627-A,20121211
CN-102001537-B,20100324
US-5194007-A,19910520
CN-102507392-B,20111107
JP-H0370192-A,19890809
CN-103324912-A,20130530
US-2005180256-A1,20030828
EP-2041715-A1,20061208
JP-H0253926-U,19881014
CN-102412303-A,20111103
CN-104254337-A,20130125
CN-102712350-A,20100823
DE-2840696-A1,19780919
EP-0466466-A1,19910709
KR-20150114451-A,20150908
CN-103479066-A,20130912
CN-103604199-B,20131118
CN-104764999-A,20150427
KR-100654685-B1,20050620
CN-101753397-B,20100129
CN-102343833-A,20110729
JP-H0370134-U,19891110
US-6078208-A,19980528
JP-S5039845-U,19730810
CN-102881794-A,20120712
US-3933562-A,19730301
CN-101907585-A,20100613
US-4999400-A,19891201
DE-102010000381-A1,20100211
CN-100594022-C,20050401
US-6870915-B2,20030320
CN-102372790-B,20111028
EP-2372315-A1,20101216
US-5729130-A,19960117
RU-2449358-C1,20090730
US-3138555-A,19580321
US-4480812-A,19830914
US-6117411-A,19990408
JP-2015210130-A,20140424
WO-2008043341-A1,20071006
WO-2016171704-A1,20150423
WO-2014120950-A2,20140130
US-2003119970-A1,20020722
US-7462187-B2,20040903
WO-9951339-A1,19990331
CN-106884928-A,20161215
CN-205704147-U,20160601
WO-2007130918-A2,20070430
US-7331956-B2,20060802
US-2016043763-A1,20140806
US-8

2025-01-19 03:35:08 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:08 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:08 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:09 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:35:09 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:09 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:10 - root - INFO - SQL:
SELECT t."publication_number", ARRAY_SIZE(t."embedding_v1") AS "embedding_length"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_length
CA-27-A,64
ES-81-Y,64
DE-303-C,0
ES-866-Y,64
FI-150-A,64
FI-250-A,64
FR-336-E,64
NL-284-C,0
NL-947-C,0
BE-107-T1,64
CA-1911-A,64
CA-4005-A,64
CA-4106-A,64
CA-4698-A,64
CA-4801-A,64
CA-5943-A,64
CA-6183-A,64
CA-6207-A,64
CA-6390-A,64
CA-6969-A,64
CA-8931-S,64
CA-9897-A,64
DE-3129-C,0
DE-3301-C,0
DE-3884-C,0
DE-3983-C,0
DE-5976-C,0
DK-2807-C,64
DK-3080-C,64
DK-3107-C,64
DK-3184-C,64
DK-3510-C,64
DK-5867-C,64
DK-5921-C,64
DK-6491-A,64
DK-7210-C,64
DK-8069-C,64
DK-8466-C,64
DK-9281-C,64
DK-9359-C,64
ES-1062-U,64
ES-1498-U,64
ES-1524-Y,64
ES-1872-U,64
ES-2542-Y,64
ES-2819-Y,64
ES-2960-U,64
ES-3045-U,64
ES-4483-Y,64
ES-4723-Y,64
ES-4858-U,64
ES-5089-Y,64
ES-5219-Y,64
ES-5716-U,64
ES-5975-Y,64
ES-6454-U,64
ES-6552-Y,64
ES-6928-Y,64
ES-6962-Y,64
ES-7086-Y,64
ES-7407-Y,64
ES-7489-Y,64
ES-7516-U,64
ES-7538-U,64
ES-764-H3,64
ES-8269-Y,64
FI-1825-A,64
FI-291-U1,64
FI-3021-A,64
FI-4211-A,64
FI-4543-A,64
FI-8034-A,64
FI-8619-A,64
FI-8985-A,64
FI-902-U1,64
FR-1186-E,64
FR-1382-E,64
FR-1550-M,64
FR-2064-E,64
FR-2510-M,64
FR-2578-M,64
FR-2635-E,64
FR-3293-M,64
FR-5174-E,64
FR-5770-E,64
FR-7085-M,64
FR-7747-E,64
FR-8053-M,64
FR-8143-M,64
NL-3613-C,0
NL-4187-C,0
NL-5034-C,0
NL-9752-C,0
NL-9761-C,64
RU-815-U1,64
US-1260-A,64
US-1844-A,64
US-3704-A,64
US-4174-P,64
US-4340-A,64
US-4449-P,64
US-4570-P,64
US-5293-P,64
US-5333-A,64
US-5618-A,64
US-6399-A,64
US-6501-P,64
US-7090-A,64
US-7624-A,64
US-7703-P,64
US-7765-P,0
US-8162-P,64
US-8923-P,0
US-9153-A,64
US-9563-A,64
US-H817-H,64
CA-10240-A,64
CA-10445-A,64
CA-11856-A,64
CA-12085-A,64
CA-12299-A,64
CA-12359-A,64
CA-12986-A,64
CA-14364-A,64
CA-15108-A,64
CA-15467-A,64
CA-16464-A,64
CA-16944-A,64
CA-17107-A,64
CA-18535-S,64
CA-19006-S,64
CA-21676-A,64
CA-21706-A,64
CA-21979-A,64
CA-22497-S,64
CA-22705-A,64
CA-23044-A,64
CA-25240-S,64
CA-25587-A,64
CA-26172-A,64
CA-27810-A,64
CA-29171-S,64
CA-29565-A,64
CA-30563-S,64
CA-30747-A,64
CA-31066-A,64
CA-31656-A,64
CA-34117-A,64
CA-34328-A,64
CA-35530-A,64
CA-36126-A,64
CA-37060-A,64
CA-37412-A,64
CA-38186-A,64
CA-38290-A,64
CA-38566-A,64
CA-39941-A,64
CA-41986-A,64
CA-42957-A,64
CA-43582-A,64
CA-43613-A,64
CA-43665-A,64
CA-44103-A,64
CA-44675-A,64
CA-45114-S,64
CA-45162-A,64
CA-46041-S,64
CA-46346-S,64
CA-46414-S,64
CA-46650-A,64
CA-47228-S,64
CA-47556-A,64
CA-47943-A,64
CA-48005-S,64
CA-50059-A,64
CA-51084-S,64
CA-51448-A,64
CA-53020-A,64
CA-53342-A,64
CA-53679-A,64
CA-54019-A,64
CA-56199-S,64
CA-57871-A,64
CA-58112-A,64
CA-59658-S,64
CA-62116-A,64
CA-63512-A,64
CA-64348-A,64
CA-64895-A,64
CA-64959-A,64
CA-65051-A,64
CA-65468-A,64
CA-66408-A,64
CA-67027-A,64
CA-67256-A,64
CA-68355-A,64
CA-68561-A,64
CA-69952-A,64
CA-69969-A,64
CA-70837-S,64
CA-71352-A,64
CA-72557-S,64
CA-73229-S,64
CA-73434-A,64
CA-73648-A,64
CA-75054-A,64
CA-75833-A,64
CA-75940-A,64
CA-76442-A,64
CA-77673-S,64
CA-78154-A,64
CA-78848-A,64
CA-80485-S,64
CA-81879-A,64
CA-82735-A,64
CA-83640-A,64
CA-84428-S,64
CA-84611-A,64
CA-85458-S,64
CA-87085-A,64
CA-87655-A,64
CA-88869-A,64
CA-89598-S,64
CA-90451-A,64
CA-90703-A,64
CA-91407-A,64
CA-91839-A,64
CA-92136-S,64
CA-92671-S,64
CA-93153-A,64
CA-93847-S,64
CA-94404-A,64
CA-94834-A,64
CA-95812-A,64
CA-96813-A,64
CA-97691-A,64
CA-97784-A,64
CA-98415-S,64
CA-98613-A,64
CA-98742-A,64
CA-99391-S,64
CA-99529-A,64
DE-10599-C,0
DE-10678-C,0
DE-10717-C,0
DE-12268-C,0
DE-16453-C,0
DE-17382-C,0
DE-17635-C,0
DE-18657-C,0
DE-21533-C,0
DE-21800-C,0
DE-22191-C,0
DE-24092-C,64
DE-24550-C,0
DE-26040-C,0
DE-26251-C,0
DE-26645-C,0
DE-27162-C,64
DE-28245-C,0
DE-28664-C,0
DE-29317-C,0
DE-29580-C,0
DE-29751-C,0
DE-29873-C,0
DE-34701-C,0
DE-35759-C,0
DE-36143-C,0
DE-36572-C,0
DE-36880-C,0
DE-37006-C,0
DE-39978-C,0
DE-41212-C,0
DE-41909-C,0
DE-43016-C,0
DE-43252-C,0
DE-43745-C,0
DE-44221-C,0
DE-44490-C,0
DE-46714-C,0
DE-46729-C,0
DE-46866-C,0
DE-47512-C,0
DE-48016-C,0
DE-48200-C,0
DE-48281-C,0
DE-48415-C,0
DE-48624-C,0
DE-48946-C,0
DE-55522-C,64
DE-57100-C,0
DE-59206-C,0
DE-62156-C,0
DE-62668-C,0
DE-64182-C,0
DE-64466-C,0
DE-68843-C,0
DE-69224-C,0
DE-69735-C,0
DE-70329-C,0
DE-70421-C,0
DE-70605-C,0
DE-71525-C,0
DE-72135-C,0
DE-72417-C,0
DE-73920-C,0
DE-75006-C,0
DE-75333-C,0
DE-78770-C,0
DE-82929-C,0
DE-83658-C,0
DE-83966-C,0
DE-84792-C,0
DE-87929-C,0
DE-90760-C,0
DE-91921-C,0
DE-92960-C,0
DE-93320-C,0
DE-93611-C,0
DE-94567-C,0
DE-96265-C,0
DE-97461-C,0
DE-98822-C,0
DK-10751-C,64
DK-11017-C,64
DK-11274-A,64
DK-11549-C,64
DK-13429-C,64
DK-14113-C,64
DK-15486-A,64
DK-15672-C,64
DK-16003-C,64
DK-16200-C,64
DK-16721-C,64
DK-17077-C,64
DK-17891-C,64
DK-18174-A,64
DK-18287-C,64
DK-18953-C,64
DK-19067-C,64
DK-20848-C,64
DK-21534-C,64
DK-21593-C,64
DK-24093-C,64
DK-24122-C,64
DK-24560-C,64
DK-24764-C,64
DK-25033-C,64
DK-26002-C,64
DK-28460-C,64
DK-30663-C,64
DK-31338-C,64
DK-32802-C,64
DK-32923-C,64
DK-32960-C,64
DK-33342-C,64
DK-33585-C,64
DK-34417-C,64
DK-34475-A,64
DK-34847-C,64
DK-3485-D0,64
DK-35287-A,64
DK-35387-A,64
DK-36818-C,64
DK-37723-C,64
DK-38288-C,64
DK-3889-D0,64
DK-40323-C,64
DK-42091-A,64
DK-44173-C,64
DK-

2025-01-19 03:35:10 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:10 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:10 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:11 - snowflake.connector.cursor - INFO - Number of results in first chunk: 29
2025-01-19 03:35:11 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:11 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:11 - root - INFO - SQL:
SELECT t."publication_number", t."title"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    WHERE t."title" ILIKE '%keyword%'
    LIMIT 1000;
Results:
publication_number,title
US-2016357749-A1,Associating keywords from communication content with communication participants
US-9015150-B2,Displaying results of keyword search over enterprise data
KR-100823160-B1,Method for surveying efficiency of keyword advertising and system for executing the method
EP-0529416-A1,Cylinder lock keyword: Elongated cylinder housing
US-2013311181-A1,"Systems and methods for identifying concepts and keywords from spoken words in text, audio, and video content"
CN-101201838-A,Method for improving searching engine based on keyword index using phrase index technique
KR-20120021061-A,Method for providing search service to extract keywords in specific region and display apparatus applying the same
KR-20120003689-A,Method and system for providing reprsentation words of real-time popular keyword
US-2007214044-A1,Method and system for adjusting balance of account of advertiser in keyword advertisement
CN-103853816-A,Method and apparatus for translating graphical symbols into query keywords
CN-105005556-A,Index keyword extraction method and system based on big geological data
EP-1376537-A2,"Apparatus, method, and computer-readable recording medium for recognition of keywords from spontaneous speech"
US-8943101-B2,"Keyword acquiring device, content providing system, keyword acquiring method, a computer-readable recording medium and content providing method"
GB-1508741-A,Keyword detection in continuous speech using continuous asynchronous correlation
US-7716211-B2,System and method for facilitating full text searching utilizing inverted keyword indices
US-2010005083-A1,Frequency based keyword extraction method and system using a statistical measure
US-2013091129-A1,Search method and system using keyword
KR-101682659-B1,Method for customized news alarm based on keyword and management server for news search for the same
CN-103593364-A,Method and system for filling keywords in route search
CN-102081638-A,Method and device for matching keywords
US-7546280-B1,Use of neural networks for keyword generation
US-2003037058-A1,Data management system for retriving data based on hierarchezed keywords associated with keyword names
US-9406077-B1,System and method for ad keyword scoring
CN-104933197-A,Method and terminal equipment for determining keywords
KR-20040063641-A,"Device and method for extending keyword, and search system using the same"
JP-3787310-B2,"Keyword determining method, apparatus, program, and recording medium"
KR-20120090251-A,System and method for recommending keyword and system and method for extracting keyword
CA-2104933-A1,Keyword/Non-Keyword Classification in Isolated Word Speech Recognition
EP-2383970-B1,Camera based method for text input and keyword detection

2025-01-19 03:35:11 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:11 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:11 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:13 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-19 03:35:13 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:13 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:13 - root - INFO - SQL:
SELECT t."publication_number", f.value::FLOAT AS "embedding_value"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_value
US-2002199075-A1,0.13273306
US-2002199075-A1,-0.13902488
US-2002199075-A1,-0.0885199
US-2002199075-A1,-0.09534649
US-2002199075-A1,-0.09190446
US-2002199075-A1,-0.077932574
US-2002199075-A1,-0.0022766828
US-2002199075-A1,-0.12735127
US-2002199075-A1,0.1164167
US-2002199075-A1,0.018240772
US-2002199075-A1,0.17687923
US-2002199075-A1,0.20438634
US-2002199075-A1,-0.052144527
US-2002199075-A1,-0.009571314
US-2002199075-A1,-0.22188927
US-2002199075-A1,0.033774134
US-2002199075-A1,0.10922471
US-2002199075-A1,0.14056958
US-2002199075-A1,-0.08305453
US-2002199075-A1,0.13807765
US-2002199075-A1,0.04118194
US-2002199075-A1,0.052235484
US-2002199075-A1,0.06996955
US-2002199075-A1,-0.18632142
US-2002199075-A1,-0.0058793537
US-2002199075-A1,-0.11818092
US-2002199075-A1,0.1821372
US-2002199075-A1,0.01003657
US-2002199075-A1,0.025189882
US-2002199075-A1,0.17004143
US-2002199075-A1,-0.16975418
US-2002199075-A1,-0.09175
US-2002199075-A1,0.059698783
US-2002199075-A1,0.0177247
US-2002199075-A1,-0.10603857
US-2002199075-A1,-0.15920235
US-2002199075-A1,0.0998081
US-2002199075-A1,-0.17713794
US-2002199075-A1,0.012302168
US-2002199075-A1,0.030920839
US-2002199075-A1,-0.10145618
US-2002199075-A1,-0.28283635
US-2002199075-A1,0.13618635
US-2002199075-A1,0.17213033
US-2002199075-A1,-0.04398971
US-2002199075-A1,-0.0138946995
US-2002199075-A1,0.18833812
US-2002199075-A1,-0.045312297
US-2002199075-A1,-0.14307499
US-2002199075-A1,0.1128079
US-2002199075-A1,-0.28147143
US-2002199075-A1,0.025991745
US-2002199075-A1,0.20064642
US-2002199075-A1,-0.032944143
US-2002199075-A1,-0.032292504
US-2002199075-A1,0.03630416
US-2002199075-A1,-0.055392273
US-2002199075-A1,0.032399535
US-2002199075-A1,-0.28090382
US-2002199075-A1,0.10271282
US-2002199075-A1,0.00023517603
US-2002199075-A1,0.16920468
US-2002199075-A1,-0.051613804
US-2002199075-A1,0.12961082
US-2003048328-A1,-0.27026555
US-2003048328-A1,-0.18388064
US-2003048328-A1,0.01285569
US-2003048328-A1,-0.11577638
US-2003048328-A1,-0.122992985
US-2003048328-A1,-0.017014885
US-2003048328-A1,-0.013466444
US-2003048328-A1,-0.031857338
US-2003048328-A1,0.19131888
US-2003048328-A1,-0.0221992
US-2003048328-A1,0.08446085
US-2003048328-A1,0.23299035
US-2003048328-A1,0.18537305
US-2003048328-A1,-0.1128309
US-2003048328-A1,0.13081424
US-2003048328-A1,-0.016817495
US-2003048328-A1,0.0026690378
US-2003048328-A1,-0.03269643
US-2003048328-A1,-0.23394156
US-2003048328-A1,0.085446335
US-2003048328-A1,-0.031117018
US-2003048328-A1,0.061321717
US-2003048328-A1,-0.0061938255
US-2003048328-A1,-0.11941841
US-2003048328-A1,0.03186201
US-2003048328-A1,-0.053852096
US-2003048328-A1,-0.061907347
US-2003048328-A1,-0.17198005
US-2003048328-A1,0.050440125
US-2003048328-A1,-0.14282835
US-2003048328-A1,0.03900431
US-2003048328-A1,-0.16891098
US-2003048328-A1,0.10804295
US-2003048328-A1,0.036285054
US-2003048328-A1,-0.109370135
US-2003048328-A1,-0.04550829
US-2003048328-A1,0.021204263
US-2003048328-A1,-0.3028842
US-2003048328-A1,0.09250326
US-2003048328-A1,0.059866503
US-2003048328-A1,0.08118051
US-2003048328-A1,-0.06228786
US-2003048328-A1,-0.0855851
US-2003048328-A1,-0.0956539
US-2003048328-A1,-0.04911348
US-2003048328-A1,-0.011536206
US-2003048328-A1,-0.11249678
US-2003048328-A1,-0.15494572
US-2003048328-A1,0.21035376
US-2003048328-A1,-0.10873703
US-2003048328-A1,-0.18792066
US-2003048328-A1,0.17746103
US-2003048328-A1,-0.22149852
US-2003048328-A1,-0.0030110483
US-2003048328-A1,-0.14568439
US-2003048328-A1,0.015222142
US-2003048328-A1,-0.01584044
US-2003048328-A1,-0.10459274
US-2003048328-A1,-0.16662467
US-2003048328-A1,-0.021934817
US-2003048328-A1,0.21863575
US-2003048328-A1,0.06251993
US-2003048328-A1,-0.14419636
US-2003048328-A1,0.15701826
US-2003102128-A1,0.06680477
US-2003102128-A1,-0.32990554
US-2003102128-A1,0.07520198
US-2003102128-A1,0.18265425
US-2003102128-A1,-0.0060798246
US-2003102128-A1,0.1689028
US-2003102128-A1,-0.12590034
US-2003102128-A1,-0.13601246
US-2003102128-A1,0.18423653
US-2003102128-A1,-0.1851732
US-2003102128-A1,0.25503907
US-2003102128-A1,0.034948833
US-2003102128-A1,-0.049614336
US-2003102128-A1,0.07020295
US-2003102128-A1,0.057566468
US-2003102128-A1,0.00033874586
US-2003102128-A1,0.01771642
US-2003102128-A1,0.06763998
US-2003102128-A1,-0.12910137
US-2003102128-A1,0.010650494
US-2003102128-A1,0.05928725
US-2003102128-A1,-0.024868054
US-2003102128-A1,0.041777883
US-2003102128-A1,-0.12475092
US-2003102128-A1,0.30493143
US-2003102128-A1,0.19387758
US-2003102128-A1,0.012443095
US-2003102128-A1,0.040692225
US-2003102128-A1,0.07518745
US-2003102128-A1,-0.017897462
US-2003102128-A1,0.19968258
US-2003102128-A1,-0.011954974
US-2003102128-A1,0.04062491
US-2003102128-A1,-0.24412286
US-2003102128-A1,-0.08912602
US-2003102128-A1,-0.11569215
US-2003102128-A1,-0.059544846
US-2003102128-A1,-0.19137983
US-2003102128-A1,0.031908657
US-2003102128-A1,0.08777054
US-2003102128-A1,-0.04238689
US-2003102128-A1,-0.23123185
US-2003102128-A1,0.13014397
US-2003102128-A1,-0.06900159
US-20031

2025-01-19 03:35:13 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:35:13 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:35:13 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:35:15 - snowflake.connector.cursor - INFO - Number of results in first chunk: 161
2025-01-19 03:35:15 - snowflake.connector.connection - INFO - closed
2025-01-19 03:35:15 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:35:15 - root - INFO - SQL:
SELECT SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year", COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    GROUP BY SUBSTR(t."filing_date"::VARCHAR, 1, 4)
    LIMIT 1000;
Results:
filing_year,patent_count
1998,7519
2009,13974
1950,719
1933,477
2006,13217
1937,463
1903,281
1840,1
1994,5986
1854,2
1991,6583
1921,472
1914,358
1878,3
1904,336
1868,3
2001,10687
1957,812
1932,458
1894,57
1882,1
1898,135
1881,2
2005,12846
1945,359
1930,593
2012,18135
2000,9135
1905,359
1907,363
1885,1
1889,1
1942,340
1908,403
1861,3
1871,1
1976,4245
1988,6058
1955,756
1901,244
1995,6453
1912,384
1879,2
1972,3688
1960,1018
1911,391
1895,64
2013,18485
1992,6316
1951,677
2007,13522
1974,3981
1961,961
1913,391
1997,7271
1880,2
1996,6918
0,24236
1953,733
1938,509
1928,589
1940,413
1936,450
1962,959
1918,257
1897,98
1987,5944
1910,352
1968,1916
1970,2480
1941,338
1884,1
2014,18265
1963,979
1952,629
1920,473
1856,2
2017,2059
1935,446
1828,1
2008,13727
1946,439
1915,294
1973,3808
1954,774
1883,2
2015,17871
2016,13431
1922,517
1923,425
1865,1
1959,955
1975,4117
1902,310
1919,409
1893,28
1875,3
1985,5517
1986,5784
1993,6221
1890,2
2011,16557
2004,12088
1989,6076
1969,2201
1929,602
1909,373
1967,1726
1939,432
1944,334
1867,3
1866,1
1978,4163
1983,5193
2002,11042
1917,334
1925,514
1934,456
1916,290
1931,535
1899,228
1971,3109
1943,355
1896,85
1860,2
1858,1
1947,410
1964,1455
1906,355
1900,216
1859,3
1848,1
1977,4026
1857,1
1956,756
2003,11471
1948,467
1863,2
1927,520
1852,1
1850,1
1981,4631
1999,8436
1980,4434
1979,4373
1876,2
2010,14913
1924,452
1926,487
1864,2
1982,4698
1965,1556
1851,1
1990,6545
1958,894
1984,5363
1874,1
1966,1672
1877,1
1949,553
1887,1

2025-01-19 03:35:15 - root - INFO - itercount: 0
2025-01-19 03:35:15 - root - INFO - Database Name: PATENTS_GOOGLE
Schema Name: PATENTS_GOOGLE
DDL describes table information.
,0
table_name,CPC_DEFINITION
description,
DDL,"create or replace TABLE CPC_DEFINITION (
	""applicationReferences"" VARIANT,
	""breakdownCode"" BOOLEAN,
	""childGroups"" VARIANT,
	""children"" VARIANT,
	""dateRevised"" FLOAT,
	""definition"" VARIANT,
	""glossary"" VARIANT,
	""informativeReferences"" VARIANT,
	""ipcConcordant"" VARCHAR(16777216),
	""level"" FLOAT,
	""limitingReferences"" VARIANT,
	""notAllocatable"" BOOLEAN,
	""parents"" VARIANT,
	""precedenceLimitingReferences"" VARIANT,
	""residualReferences"" VARIANT,
	""rules"" VARIANT,
	""scopeLimitingReferences"" VARIANT,
	""status"" VARCHAR(16777216),
	""symbol"" VARCHAR(16777216),
	""synonyms"" VARIANT,
	""titleFull"" VARCHAR(16777216),
	""titlePart"" VARIANT
);"

,1
table_name,DISCLOSURES_13
description,
DDL,"create or replace TABLE DISCLOSURES_13 (
	""family_id"" VARCHAR(16777216),
	""record_id"" VARCHAR(16777216),
	""disclosure_event"" VARCHAR(16777216),
	""sso"" VARCHAR(16777216),
	""patent_owner_harmonized"" VARCHAR(16777216),
	""patent_owner_unharmonized"" VARCHAR(16777216),
	""date"" NUMBER(38,0),
	""standard"" VARCHAR(16777216),
	""committee_project"" VARCHAR(16777216),
	""tc_name"" VARCHAR(16777216),
	""sc_name"" VARCHAR(16777216),
	""wg_name"" VARCHAR(16777216),
	""licensing_commitment"" VARCHAR(16777216),
	""copyright"" VARCHAR(16777216),
	""blanket_type"" VARCHAR(16777216),
	""blanket_scope"" VARCHAR(16777216),
	""third_party"" VARCHAR(16777216),
	""reciprocity"" VARCHAR(16777216),
	""serial_cleaned"" VARCHAR(16777216),
	""pub_cleaned"" VARCHAR(16777216)
);"

,2
table_name,PUBLICATIONS
description,
DDL,"create or replace TABLE PUBLICATIONS (
	""publication_number"" VARCHAR(16777216),
	""application_number"" VARCHAR(16777216),
	""country_code"" VARCHAR(16777216),
	""kind_code"" VARCHAR(16777216),
	""application_kind"" VARCHAR(16777216),
	""application_number_formatted"" VARCHAR(16777216),
	""pct_number"" VARCHAR(16777216),
	""family_id"" VARCHAR(16777216),
	""title_localized"" VARIANT,
	""abstract_localized"" VARIANT,
	""claims_localized"" VARIANT,
	""description_localized"" VARIANT,
	""publication_date"" NUMBER(38,0),
	""filing_date"" NUMBER(38,0),
	""grant_date"" NUMBER(38,0),
	""priority_date"" NUMBER(38,0),
	""priority_claim"" VARIANT,
	""inventor"" VARIANT,
	""inventor_harmonized"" VARIANT,
	""assignee"" VARIANT,
	""assignee_harmonized"" VARIANT,
	""examiner"" VARIANT,
	""uspc"" VARIANT,
	""ipc"" VARIANT,
	""cpc"" VARIANT,
	""fi"" VARIANT,
	""fterm"" VARIANT,
	""citation"" VARIANT,
	""entity_status"" VARCHAR(16777216),
	""art_unit"" VARCHAR(16777216)
);"

,3
table_name,ABS_AND_EMB
description,
DDL,"create or replace TABLE ABS_AND_EMB (
	""publication_number"" VARCHAR(16777216),
	""title"" VARCHAR(16777216),
	""title_translated"" BOOLEAN,
	""abstract"" VARCHAR(16777216),
	""abstract_translated"" BOOLEAN,
	""cpc"" VARIANT,
	""cpc_low"" VARIANT,
	""cpc_inventive_low"" VARIANT,
	""top_terms"" VARIANT,
	""similar"" VARIANT,
	""url"" VARCHAR(16777216),
	""country"" VARCHAR(16777216),
	""publication_description"" VARCHAR(16777216),
	""cited_by"" VARIANT,
	""embedding_v1"" VARIANT
);"

External knowledge that might be helpful: 
### IPC Codes: Handling Main IPC Code Selection

When dealing with the `ipc` field in the `patents-public-data.patents.publications` dataset, it is important to understand the structure of this field, especially the subfield `first`. This subfield is a boolean that indicates whether a given IPC code is the main code for the publication number in question. This is crucial because each patent publication can be associated with multiple IPC codes, signifying the various aspects of the technology covered by the patent.

However, not every publication in the dataset has a designated main IPC code. This lack of a clearly identified main IPC code complicates the process of determining the most relevant IPC code for each publication, as selecting a single IPC code from multiple possibilities without clear prioritization can lead to inconsistent or skewed analyses.

This approach ensures a more consistent and representative selection of IPC codes across the dataset, facilitating more accurate and meaningful analysis of patent trends and classifications. By focusing on the most frequently occurring 4-digit IPC code, the view helps overcome the limitations posed by the absence of a designated main IPC code, thereby enhancing the reliability of patent-related studies and insights derived from this data.

Here is an example

```
SELECT 
    t1.publication_number, 
    SUBSTR(ipc_u.code, 0, 4) as ipc4, 
    COUNT(
    SUBSTR(ipc_u.code, 0, 4)
    ) as ipc4_count 
FROM 
    `patents-public-data.patents.publications` t1, 
    UNNEST(ipc) AS ipc_u 
GROUP BY 
    t1.publication_number, 
    ipc4

```



# Text Embeddings (Similarity)

Patent documents are rich with textual data. In fact, most of the information contained in a patent document is text. This includes the `abstract_localized`, `description_localized`, and `claims_localized`. Textual data can be a powerful tool to analyze and compare patent scope and content across patents. However, before being able to use textual data, it needs to be vectorized or transformed into text embeddings that can be used by machine learning models. Therefore, creating text embeddings from the textual data of patents is necessary to compare patent contents. Technically speaking, running an NLP algorithm that creates embeddings for all U.S. patents is computationally difficult.

Nevertheless, Google runs their own machine learning algorithm which transforms patent text metadata into text embeddings which they report in `patents-public-data.google_patents_research.publications` table. The textual embeddings of one patent, without any knowledge on the algorithm being used to create them, are meaningless on their own. However, the embeddings are powerful when it comes to comparing textual content of two or more patents. Embeddings can be used to calculate a similarity score between any two patents. This similarity score is calculated by applying the dot product of the embeddings vector of the patents, as shown below:

The similarity \( \text{Similarty}_{i,k} \) between two patents \( i \) and \( k \) is calculated as the dot product of their embedding vectors:

\[
\text{Similarty}_{i,k} = \mathbf{v}_i \cdot \mathbf{v}_k
\]

where

\[
\mathbf{v}_i = [v_{i1}, v_{i2}, v_{i3}, \ldots, v_{iN}]
\]
and
\[
\mathbf{v}_k = [v_{k1}, v_{k2}, v_{k3}, \ldots, v_{kN}]
\]

are the embedding vectors for patents \( i \) and \( k \) respectively. The higher the dot product, the more similar the patents.





# Originality (Trajtenberg)

One of the most important measures of a patent is "basicness". The aspects of basicness are tough to measure. Nevertheless, some literature finds that important aspects of these measures are embodied in the relationship between the invention and the technological predcessors and successors it is connected to through, for example, patent citations. We can thus use patent citations to construct measures that identify basicness and appropriability. Trajtenberg et al. 1997 provide a number of these measures. They distinguish between:

1. Forward-looking measures: measures that are derived from the relationship between an invention and subsequent technologies that build upon it. These measures are thus constructed from the forward citations. One example of a forward-looking basicness measure they provide is Generality, which is calculated as:

\[
\text{GENERALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITING}_{G_k}}{\text{NCITING}_i} \right)
\]


2. Backward-looking measures: measures that are derived from the relationship between a given patent and the body of knowledge that preceded it. These measure are thus constructed from the backward citations. One example of a backward-looking basicness measure they provide is Orginality, which is calculated as:

\[
\text{ORIGINALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITED}_{i,k}}{\text{NCITED}_i} \right)
\]

With **NCITING** and **NCITED** defined as the number of patents citing the focal patent and the number of patents cited by the focal patent, respectively. Index `i` corresponds to the focal patent considered, and `k` is the index of patent classes. For example, **NCITED_2,3** refers to the number of patents in patent class 3 and cited by our focal patent 2.


The table structure information is ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}
Begin Exploring Related Columns
### Relevant Tables, Columns, and Conditions:

**Tables:**

1. **`PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS`**
   - `"publication_number"`: To identify the patent `US-9741766-B2` and other patents.
   - `"filing_date"`: To determine the filing year of patents.
   - **Potential Usage**: Find patents filed in the same year as `US-9741766-B2`.

2. **`PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB`**
   - `"publication_number"`: To link with the `PUBLICATIONS` table.
   - `"embedding_v1"`: Embedding vectors representing the technological content of patents.
   - **Potential Usage**: Compute similarity between patents based on `embedding_v1`.

**Conditions:**

- **Same Filing Year**: Select patents filed in the same year as `US-9741766-B2`.
- **Valid Embeddings**: Include only patents with non-null `embedding_v1` values.
- **Exclude Target Patent**: Exclude `US-9741766-B2` from the comparison.
- **Data Parsing**: Ensure dates are correctly parsed and embeddings are properly handled.

---

### SQL Queries to Explore the Data:

1. **Retrieve the filing date of `US-9741766-B2`**

   ```sql
   SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

2. **Check the format of `filing_date` for sample records**

   ```sql
   SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
   ```

3. **Attempt to parse `filing_date` to a date format**

   ```sql
   SELECT t."filing_date", TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') AS "parsed_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') IS NOT NULL
   LIMIT 1000;
   ```

4. **List patents with their filing years**

   ```sql
   SELECT t."publication_number", SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
   ```

5. **Get all patents filed in the same year as `US-9741766-B2`**

   ```sql
   SELECT t."publication_number", t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE SUBSTR(t."filing_date"::VARCHAR, 1, 4) = (
       SELECT SUBSTR(p."filing_date"::VARCHAR, 1, 4)
       FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
       WHERE p."publication_number" = 'US-9741766-B2'
   )
   LIMIT 1000;
   ```

6. **Check if embeddings are available for `US-9741766-B2`**

   ```sql
   SELECT t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

7. **List embeddings for patents with non-null `embedding_v1`**

   ```sql
   SELECT t."publication_number", t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."embedding_v1" IS NOT NULL
   LIMIT 1000;
   ```

8. **Extract values from `embedding_v1` for `US-9741766-B2`**

   ```sql
   SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

9. **Join `PUBLICATIONS` and `ABS_AND_EMB` tables on `publication_number`**

   ```sql
   SELECT p."publication_number", p."filing_date", a."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
     ON p."publication_number" = a."publication_number"
   LIMIT 1000;
   ```

10. **List patents filed in the same year with embeddings**

    ```sql
    SELECT p."publication_number", p."filing_date", a."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
      ON p."publication_number" = a."publication_number"
    WHERE SUBSTR(p."filing_date"::VARCHAR, 1, 4) = (
        SELECT SUBSTR(p2."filing_date"::VARCHAR, 1, 4)
        FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p2
        WHERE p2."publication_number" = 'US-9741766-B2'
    )
      AND a."embedding_v1" IS NOT NULL
    LIMIT 1000;
    ```

11. **Exclude `US-9741766-B2` from the list of patents**

    ```sql
    SELECT p."publication_number", p."filing_date"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    WHERE p."publication_number" != 'US-9741766-B2'
    LIMIT 1000;
    ```

12. **Determine the size of the embedding vectors**

    ```sql
    SELECT t."publication_number", ARRAY_SIZE(t."embedding_v1") AS "embedding_length"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    LIMIT 1000;
    ```

13. **List patents with title containing a keyword**

    ```sql
    SELECT t."publication_number", t."title"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    WHERE t."title" ILIKE '%keyword%'
    LIMIT 1000;
    ```

14. **Explore embedding values for sample patents**

    ```sql
    SELECT t."publication_number", f.value::FLOAT AS "embedding_value"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
    LIMIT 1000;
    ```

15. **Count the number of patents per filing year**

    ```sql
    SELECT SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year", COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    GROUP BY SUBSTR(t."filing_date"::VARCHAR, 1, 4)
    LIMIT 1000;
    ```

---

These queries help in understanding the data and preparing for the task of identifying the top five patents similar to `US-9741766-B2` based on technological similarities, filed in the same year. By examining filing dates, embeddings, and ensuring data completeness, we can proceed to compute similarity scores in a subsequent step.Query:
SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
filing_date
20160511
Query:
SELECT t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
Answer:
Too long, hard cut:
filing_date
0
0
19661104
19831124
19940603
19771125
19660422
19780306
19880302
19950405
0
0
0
19940709
0
20101209
20021205
19491117
19640424
19731018
19751212
19310429
20110822
20110622
20160502
20030220
20051027
20090409
0
0
19661027
19770223
19790928
19740617
19891011
19790131
19990204
19800602
20020226
20020712
19980603
19910509
19861007
19851219
19840507
20060829
20041102
20060925
20111123
20130419
0
0
19860109
20061213
19880519
0
19730711
19760408
19930324
19780523
19800624
0
19910408
19830713
19850806
19951002
19960917
18970414
20001128
20091021
20090903
20131227
20160726
0
0
19720608
0
20080208
19770408
19880407
19921015
19820628
19691202
0
19931110
19940405
20030211
19990531
19900926
19870430
20020131
20060307
20080208
20030228
20050210
20111108
20150506
19580519
19891023
19890329
19710419
19840510
0
20000616
19280927
19500618
19870430
19870801
19750922
19781031
19880630
20020425
20040608
19990212
20080328
20090806
20130516
20160822
20061214
20000623
19730427
19770523
19351119
20010531
19980910
20010417
19861004
19891128
19941117
19290917
19410527
19310103
20120929
20130405
20010109
20081015
20130603
20140627
20150410
20160701
20150127
20151209
20020927
0
0
0
19960829
19411126
19850228
19910426
19740827
19490609
19830802
19940615
19160803
20010522
20011206
19040305
20031028
20051017
20040705
20060210
20080820
20100720
20121109
0
0
0
19830805
19690306
19370224
19761029
19871124
19800315
19080509
19270722
19881104
19920421
19670612
19921120
0
19720901
20140319
19731109
19810925
19811118
19791211
19831227
19880908
20030411
20140625
20080804
19030502
20160326
20161228
20160203
0
19980811
19681016
19711001
19811207
19860407
19890523
19930622
20071004
19950906
19991007
19740826
19741022
19761220
19930831
19981225
19971229
20001209
20091105
20090402
20101217
20110623
20120104
20120824
0
19711229
19980107
19730801
19960130
19800215
19880309
19890512
19640323
20020422
20020527
19851025
19700116
20060313
19860527
19880718
20050617
20101018
20130227
20041013
20030313
20140313
0
0
0
0
0
19790403
19840315
19970124
19910618
19940117
19371212
19761027
19801125
19910701
19941209
19310601
20060801
20071227
20061225
20070629
19991122
20001030
20101105
20100604
20120605
20120606
20151207
20160414
0
0
19321024
19750415
20090324
19211111
19910523
19710712
19750630
19980318
19960329
19910808
20140403
19840820
19800822
19911128
20030521
19690403
20010406
20020205
20040412
20081127
20100406
20100330
0
0
19720414
19820729
19930401
0
19920731
19220808
19890810
19810318
19730430
19910412
19981106
20131021
20050331
19780912
19810827
19910610
19970626
19890724
20010315
20120712
19890120
19030407
20070809
20100802
19961029
20141203
20041013
20100122
20141124
20150408
20151023
20170522
20161202
20160613
20041221
20120614
19870413
19610904
19870108
19800117
19170611
19701002
19771021
19760809
19921223
19230528
19561217
19800408
19760227
19740508
19800630
19810630
19980512
19490609
19161201
19820217
20050824
20111227
19020614
20110901
20140722
20150209
20160615
20160728
0
0
19850214
19740129
19780112
20000802
19600603
19771111
19880412
19740325
19750320
20031103
19800808
19770908
19810914
19900927
19901218
19270419
20021203
19430422
19770816
20000815
20020318
20020220
20031219
20111124
19091223
20060202
20060217
20110517
19611107
19910927
19641027
19970814
19870514
19700404
19770217
19910325
19770608
19910318
20010727
19861029
19941223
19690224
20011106
20120516
20080204
20110628
20121213
0
19550218
19710312
19851024
20010815
0
19920402
19770418
19221111
19361121
19800125
19910424
19770329
19921027
19930821
19990323
19620807
19960603
19961202
19410328
20120217
20141111
20140814
20151231
19790327
19620306
19680914
19780131
0
19740621
19790103
19860326
19910221
19870417
19631015
20050629
19921023
19681105
19820924
19821125
19910930
19931006
18971209
20021004
20050225
20140902
20020820
20150128
20150525
19970904
19180604
19920131
19770415
19160927
19960223
19920319
19760611
19940328
19980408
19990907
19270531
19570521
19780818
19951206
20050621
20061201
20070824
20140828
20160905
0
19841012
19640617
20021205
20060111
0
19040305
19820429
19810223
19960814
20031223
19951101
19910206
20071205
19730911
19831130
19920904
19901019
19931221
19170607
19881022
20051125
20091030
20080926
20110601
20120406
20121220
20160905
20040722
20080925
20030815
20110920
19980206
20160621
20161115
20140619
20110331
20141009
20150613
20040408
20151106
20161129
20150615
20150421
20070807
0
19660502
19750227
19920402
19860331
19251001
19960826
19980918
19900918
19920724
19921130
20050225
20070315
20090326
20051226
20130924
20160705
20160519
20161110
20170113
20131008
20060622
0
20120224
19750122
19300305
19090122
19740614
19941014
19991116
20020301
19980520
19940819
19880819
19950518
20011121
20020809
20020816
20100916
20150721
19010130
19091124
19990212
20070514
20090424
20091207
20110822
20150412
20160114
20160121
20060613
20160226
20080704
19980922
20111027
0
19591120
19671116
20131004
0
0
19710817
19770805
19870306
19900620
20070417
19720510
20020304
19990
Query:
SELECT t."filing_date", TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') AS "parsed_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE TRY_TO_DATE(t."filing_date"::VARCHAR, 'YYYYMMDD') IS NOT NULL
   LIMIT 1000;
Answer:
Too long, hard cut:
filing_date,parsed_date
19760303,1976-03-03
19940224,1994-02-24
19760707,1976-07-07
19320313,1932-03-13
19390302,1939-03-02
20110704,2011-07-04
19970425,1997-04-25
19891115,1989-11-15
19140427,1914-04-27
20061113,2006-11-13
20090206,2009-02-06
20130417,2013-04-17
20050705,2005-07-05
19930204,1993-02-04
19690801,1969-08-01
19840215,1984-02-15
19850919,1985-09-19
20121129,2012-11-29
19720313,1972-03-13
19760921,1976-09-21
19780818,1978-08-18
19890221,1989-02-21
19880408,1988-04-08
19750520,1975-05-20
19960305,1996-03-05
19890807,1989-08-07
19990924,1999-09-24
19220730,1922-07-30
19980710,1998-07-10
19830629,1983-06-29
19870526,1987-05-26
19960918,1996-09-18
19970925,1997-09-25
19910930,1991-09-30
19961219,1996-12-19
19980504,1998-05-04
19270521,1927-05-21
20100519,2010-05-19
19910819,1991-08-19
20000804,2000-08-04
20060914,2006-09-14
20020219,2002-02-19
20020507,2002-05-07
20050319,2005-03-19
20080201,2008-02-01
20151231,2015-12-31
19810610,1981-06-10
19781103,1978-11-03
19721016,1972-10-16
19710527,1971-05-27
19700618,1970-06-18
19860131,1986-01-31
19910613,1991-06-13
19960821,1996-08-21
19870804,1987-08-04
19891111,1989-11-11
20001226,2000-12-26
19200719,1920-07-19
19060316,1906-03-16
20150330,2015-03-30
20161111,2016-11-11
20120119,2012-01-19
20160118,2016-01-18
20060324,2006-03-24
20120229,2012-02-29
20130326,2013-03-26
20110923,2011-09-23
19760625,1976-06-25
19710507,1971-05-07
19610112,1961-01-12
19820802,1982-08-02
19690111,1969-01-11
19680109,1968-01-09
19780831,1978-08-31
19910930,1991-09-30
19200306,1920-03-06
19740530,1974-05-30
19880620,1988-06-20
19900726,1990-07-26
19920420,1992-04-20
19380621,1938-06-21
19860802,1986-08-02
19890928,1989-09-28
19880720,1988-07-20
20040303,2004-03-03
20050617,2005-06-17
20060622,2006-06-22
20100722,2010-07-22
20030321,2003-03-21
20091125,2009-11-25
20100930,2010-09-30
20110927,2011-09-27
20111202,2011-12-02
20090825,2009-08-25
20140512,2014-05-12
20160930,2016-09-30
20100610,2010-06-10
20150922,2015-09-22
19880128,1988-01-28
19450914,1945-09-14
19930719,1993-07-19
19930226,1993-02-26
19950220,1995-02-20
19950424,1995-04-24
19910607,1991-06-07
20020123,2002-01-23
19980702,1998-07-02
19890901,1989-09-01
19821231,1982-12-31
20000322,2000-03-22
20000501,2000-05-01
20010913,2001-09-13
20060728,2006-07-28
20100813,2010-08-13
20110309,2011-03-09
20120730,2012-07-30
19680808,1968-08-08
19830421,1983-04-21
19880114,1988-01-14
19170201,1917-02-01
20070801,2007-08-01
19740925,1974-09-25
19300411,1930-04-11
19820917,1982-09-17
19910312,1991-03-12
19780526,1978-05-26
19820521,1982-05-21
20021018,2002-10-18
19910322,1991-03-22
19741022,1974-10-22
19850921,1985-09-21
19871229,1987-12-29
19971210,1997-12-10
20020401,2002-04-01
20000331,2000-03-31
20000717,2000-07-17
20110404,2011-04-04
20150430,2015-04-30
20151027,2015-10-27
20031226,2003-12-26
20141011,2014-10-11
19860530,1986-05-30
19590529,1959-05-29
19580212,1958-02-12
19710213,1971-02-13
19350216,1935-02-16
19910618,1991-06-18
19960216,1996-02-16
19500524,1950-05-24
19771213,1977-12-13
19761227,1976-12-27
19841023,1984-10-23
20030227,2003-02-27
20021010,2002-10-10
20021127,2002-11-27
20161125,2016-11-25
20130227,2013-02-27
20050216,2005-02-16
20090810,2009-08-10
19650318,1965-03-18
19820614,1982-06-14
19800129,1980-01-29
19760206,1976-02-06
19801105,1980-11-05
19860802,1986-08-02
19820209,1982-02-09
19990225,1999-02-25
19740625,1974-06-25
19890712,1989-07-12
20131223,2013-12-23
19970416,1997-04-16
19890906,1989-09-06
19701229,1970-12-29
19861112,1986-11-12
19841227,1984-12-27
20000509,2000-05-09
20030326,2003-03-26
20110315,2011-03-15
20130314,2013-03-14
20150915,2015-09-15
20020814,2002-08-14
20080130,2008-01-30
20100719,2010-07-19
20110905,2011-09-05
20120824,2012-08-24
19660921,1966-09-21
19720303,1972-03-03
19730711,1973-07-11
20010619,2001-06-19
20050726,2005-07-26
19940622,1994-06-22
19810514,1981-05-14
19981214,1998-12-14
20151116,2015-11-16
20020903,2002-09-03
19580109,1958-01-09
19890421,1989-04-21
19950518,1995-05-18
19980622,1998-06-22
19730912,1973-09-12
19780902,1978-09-02
19780822,1978-08-22
19960905,1996-09-05
19200228,1920-02-28
19880215,1988-02-15
20000808,2000-08-08
20010226,2001-02-26
20120720,2012-07-20
20130920,2013-09-20
20150427,2015-04-27
20110216,2011-02-16
20121109,2012-11-09
20140926,2014-09-26
20051110,2005-11-10
20111121,2011-11-21
20141128,2014-11-28
20040916,2004-09-16
20050624,2005-06-24
19820212,1982-02-12
19710211,1971-02-11
19910619,1991-06-19
19870217,1987-02-17
19950302,1995-03-02
19910821,1991-08-21
19781108,1978-11-08
19980626,1998-06-26
19640208,1964-02-08
20070307,2007-03-07
20130313,2013-03-13
19791025,1979-10-25
19880615,1988-06-15
19871130,1987-11-30
20050901,2005-09-01
20031202,2003-12-02
20130314,2013-03-14
20061003,2006-10-03
20140519,2014-05-19
19770214,1977-02-14
19830804,1983-08-04
20111027,2011-10-27
19630410,1963-04-10
20140402,2014-04-02
19750926,1975-09-26
20121002,2012-10-02
19810826,1981-08-26
19600328,1960-03-28
20140829,2014-08-29
20020823,2002-08-23
20130916,2013-09
Query:
SELECT t."publication_number", SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_year
JP-1810118-C,0
JP-1203714-C,0
FR-1500580-A,1966
ES-8501233-A1,1983
CA-2165155-A1,1994
FR-2409943-B1,1977
GB-1086860-A,1966
JP-S54117658-A,1978
JP-H0710178-Y2,1988
JP-3172057-B2,1995
US-136580-A,0
US-272220-A,0
US-599187-A,0
CN-1062411-C,1994
DE-1479218-U,0
EP-2512367-B1,2010
ES-2312527-T3,2002
FR-1000748-A,1949
FR-1573809-A,1964
JP-S5066757-U,1973
JP-S5845249-Y2,1975
US-2103405-A,1931
GB-201114438-D0,2011
JP-5707248-B2,2011
JP-2016211567-A,2016
KR-20040075216-A,2003
CN-1954806-A,2005
CN-201399214-Y,2009
JP-1368881-C,0
JP-1444589-C,0
FR-1497898-A,1966
DE-2707796-A1,1977
DE-2962208-D1,1979
FR-2233137-A1,1974
GB-2224027-B,1989
JP-S5911756-Y2,1979
JP-2000218515-A,1999
JP-S56169301-A,1980
US-2002102047-A1,2002
CN-1467804-A,2002
EP-0988417-B1,1998
JP-H04334685-A,1991
JP-S6359143-U,1986
JP-H0685910-B2,1985
JP-H0350567-B2,1984
JP-5108773-B2,2006
CN-2768052-Y,2004
CN-1940157-B,2006
CN-202318915-U,2011
CN-203200362-U,2013
JP-897785-C,0
JP-1789132-C,0
JP-S62113530-U,1986
CA-118661-S,2006
FI-882364-A0,1988
CA-810158-A,0
DE-2335240-A1,1973
DE-7610943-U1,1976
JP-H0673947-U,1993
JP-S54153049-A,1978
JP-S5716116-U,1980
US-548167-A,0
CN-1055840-A,1991
JP-S6020713-A,1983
JP-S6234024-A,1985
JP-H0995081-A,1995
JP-H1088758-A,1996
GB-189709494-A,1897
JP-2001195445-A,2000
JP-2010101160-A,2009
CN-101746294-A,2009
CN-104170353-A,2013
CN-206056613-U,2016
JP-1032657-C,0
JP-1654837-C,0
DK-146223-C,1972
CA-564325-A,0
GB-0802422-D0,2008
JP-S53139175-U,1977
JP-H01150349-U,1988
JP-2600796-Y2,1992
JP-S591896-U,1982
JP-S4922438-B1,1969
US-419959-A,0
DE-69331528-D1,1993
DE-69430885-T2,1994
EP-1474362-B1,2003
JP-2000346423-A,1999
JP-2765752-B2,1990
KR-900003183-Y1,1987
JP-2003229053-A,2002
JP-2007241524-A,2006
JP-5129599-B2,2008
KR-100547071-B1,2003
KR-20070020426-A,2005
KR-20130050682-A,2011
CN-204556165-U,2015
ES-66185-Y,1958
CA-1331409-C,1989
FI-891492-A0,1989
GB-1348507-A,1971
JP-S60179587-U,1984
US-332138-A,0
CN-1112492-C,2000
DE-566539-C,1928
DE-845109-C,1950
JP-S63125649-A,1987
JP-S6423693-U,1987
JP-S5243021-U,1975
JP-S5566205-U,1978
JP-H0825023-B2,1988
JP-2003215980-A,2002
JP-4255884-B2,2004
KR-100295305-B1,1999
CN-101547005-A,2008
CN-101988676-A,2009
CN-203259375-U,2013
CN-205932945-U,2016
DE-202006018912-U1,2006
FR-2828332-A1,2000
GB-1375879-A,1973
JP-S53161674-U,1977
US-2053075-A,1935
CN-2484753-Y,2001
CN-1212523-A,1998
FI-20010786-A,2001
JP-S6359144-U,1986
JP-2799203-B2,1989
JP-H08143121-A,1994
US-1837725-A,1929
US-2304134-A,1941
US-1864623-A,1931
JP-5991128-B2,2012
JP-2016105749-A,2013
RU-2191214-C2,2001
RU-2008140707-A,2008
CN-103265598-B,2013
CN-203928708-U,2014
CN-204557664-U,2015
CN-206326242-U,2016
CN-104559893-B,2015
CN-106856628-A,2015
US-6778773-B2,2002
JP-H00985753-A,0
JP-1512007-C,0
NL-28211-C,0
CA-2184504-C,1996
FR-877274-A,1941
JP-S60218905-A,1985
JP-H04326774-A,1991
JP-S5125160-A,1974
FR-1012104-A,1949
JP-S5944363-A,1983
JP-H081564-A,1994
US-1233474-A,1916
US-2002011230-A1,2001
JP-2003169856-A,2001
US-811638-A,1904
KR-200338652-Y1,2003
KR-20070041890-A,2005
CN-1816294-A,2004
CN-2858160-Y,2006
CN-201276086-Y,2008
CN-201816145-U,2010
CN-102907994-A,2012
JP-1573454-C,0
JP-1721868-C,0
JP-2100371-C,0
DK-358583-D0,1983
ES-146285-Y,1969
GB-478690-A,1937
DE-2649618-B2,1976
DE-3766112-D1,1987
DE-8007402-U1,1980
FR-390089-A,1908
FR-638126-A,1927
FR-2638622-B1,1988
JP-H0584037-U,1992
JP-S4739450-Y1,1967
JP-H0642846-U,1992
NL-296405-A,0
NL-7211943-A,1972
EP-2781788-B1,2014
JP-S5072414-U,1973
JP-S5846920-U,1981
JP-S5874811-U,1981
JP-S5687776-U,1979
US-D279853-S,1983
KR-920008597-Y1,1988
JP-2004313014-A,2003
JP-6137070-B2,2014
RU-2008132286-A,2008
US-754320-A,1903
CN-105823611-A,2016
CN-106739164-A,2016
CN-205558012-U,2016
BE-512467-A,0
CA-2244766-A1,1998
DE-1803332-A1,1968
DE-2149141-A1,1971
GB-2089320-A,1981
JP-S62164685-U,1986
JP-H066780-Y2,1989
DE-69322442-T2,1993
EP-1933436-B1,2007
EP-0782478-B1,1995
EP-0993180-B1,1999
JP-S5128923-U,1974
JP-S5153284-U,1974
JP-S5376919-A,1976
JP-3340813-B2,1993
JP-2000192758-A,1998
JP-H11193667-A,1997
RU-17326-U1,2000
KR-20110049427-A,2009
CN-101531763-A,2009
CN-201900010-U,2010
CN-202142477-U,2011
CN-202417422-U,2012
CN-202807027-U,2012
CA-27189-A,0
JP-S4874140-A,1971
JP-2887866-B2,1998
FR-2239893-A5,1973
JP-H09201246-A,1996
JP-S6125607-Y2,1980
JP-H069665-Y2,1988
JP-H02145867-U,1989
DE-1899993-U,1964
DK-1279779-T3,2002
EP-1395943-B1,2002
JP-S61104472-A,1985
US-3605178-A,1970
ES-2301340-B1,2006
KR-890006762-Y1,1986
KR-910005717-Y1,1988
JP-WO2006134667-A1,2005
JP-WO2011121828-A1,2010
JP-6013229-B2,2013
KR-200371816-Y1,2004
KR-20040093694-A,2003
CN-104911016-A,2014
JP-1721970-C,0
JP-H00979262-A,0
JP-2045702-C,0
CA-607467-A,0
CA-870537-A,0
DE-2913333-C2,1979
GB-2156898-B,1984
GB-9701425-D0,1997
DE-69108459-T2,1991
DE-69402587-D1,1994
DE-690465-C,1937
JP-S5354430-A,1976
JP-S5788835-A,1980
JP-H0510017-A,1991
JP-H08159838-A,1994
US-1863894-A,1931
JP-4882580-B2,2006
JP-5210626-B2,2007
RU-2345965-C2,2006
RU-2355420-C2,2007
KR-100352139-B1,1999
KR-100387884-B1,2000
KR-2012
Query:
SELECT t."publication_number", t."filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
   WHERE SUBSTR(t."filing_date"::VARCHAR, 1, 4) = (
       SELECT SUBSTR(p."filing_date"::VARCHAR, 1, 4)
       FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
       WHERE p."publication_number" = 'US-9741766-B2'
   )
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date
CN-106884928-A,20161215
CN-205704147-U,20160601
US-2016218216-A1,20160404
WO-2017024952-A1,20160729
CN-205496576-U,20160303
WO-2017088628-A1,20161031
WO-2016200781-A1,20160607
EP-3088510-A1,20160426
CN-106509561-A,20161108
WO-2017104122-A1,20161209
CN-105795923-A,20160606
CN-206006598-U,20160517
CN-105750291-A,20160406
RU-2619762-C1,20160314
US-D786980-S,20160425
EP-3210495-A1,20160223
JP-2016199809-A,20160729
CN-106152887-A,20160812
EP-3151175-A1,20160825
CN-105883730-A,20160505
EP-3048143-A1,20160112
US-D796897-S,20160108
CN-205721349-U,20160429
CN-106176476-A,20160831
CN-106522997-A,20161124
US-2017030099-A1,20161017
CN-105571770-A,20160119
JP-1580448-S,20161228
CN-106647074-A,20161202
CN-206132088-U,20160812
CN-206000708-U,20160819
CN-205339623-U,20160112
CN-106440038-A,20161010
CN-205843289-U,20160725
CN-106275646-A,20160808
CN-206174410-U,20161021
CN-105748422-A,20160405
CN-106330076-A,20161008
CN-206103916-U,20160922
CN-206165658-U,20161110
WO-2016132888-A1,20160202
WO-2016193180-A1,20160527
CN-205880480-U,20160406
RU-2624854-C1,20161018
CN-106044584-A,20160715
CN-105866896-B,20160519
CN-105551773-A,20160121
CN-105877978-A,20160627
JP-2016182411-A,20160720
CN-106297967-A,20160826
CN-205430699-U,20160323
CN-205905675-U,20160415
CN-205739199-U,20160428
US-2016289825-A1,20160404
US-2017070690-A1,20161117
WO-2017032598-A1,20160810
CN-106508339-A,20161009
KR-101721410-B1,20160530
CN-105766635-A,20160314
KR-101743576-B1,20160427
US-9660655-B2,20161215
CN-106727896-A,20161221
WO-2016158606-A1,20160323
US-2016206156-A1,20160115
US-D780445-S,20160202
US-D796316-S,20160511
CN-106198950-A,20160708
CN-105538322-A,20160204
CN-106271334-A,20160930
CN-106165964-A,20160823
CN-105773526-A,20160422
CN-105527818-A,20160129
ES-2629152-A1,20160203
CN-105493662-A,20160119
EP-3089264-A1,20160421
CN-105772579-A,20160517
CN-105457809-A,20160202
CN-105572889-A,20160225
CN-106187779-A,20160709
CN-106065973-A,20160421
CN-105912280-A,20160624
CN-205487754-U,20160118
CN-105656178-A,20160322
CN-106172128-A,20160720
CN-106503288-A,20160918
CN-205313754-U,20160107
CN-105845277-A,20160328
CN-106771950-A,20161221
CN-205810080-U,20160720
US-2017016759-A1,20160714
CN-105693054-A,20160419
US-2016229907-A1,20160426
CN-206182741-U,20160716
CN-206069431-U,20160826
US-2016250980-A1,20160225
KR-101672828-B1,20160614
WO-2017088973-A8,20161122
US-2017133510-A1,20160202
CN-105864492-A,20160531
US-2016287303-A1,20160615
CN-106345543-A,20160913
CN-205811599-U,20160629
US-2017174842-A1,20161220
US-2016374997-A1,20160629
CN-106057302-A,20160804
CN-106301520-B,20160727
US-2016211560-A1,20160110
CN-106139012-A,20160729
WO-2017066116-A1,20161010
US-2017035765-A1,20160808
CN-205890258-U,20160616
JP-2016171803-A,20160422
CN-205940341-U,20160804
CN-206053505-U,20160930
CN-105783673-A,20160419
CN-106318871-A,20161020
CN-205785408-U,20160706
EP-3054476-A1,20160203
CN-205367842-U,20160303
CN-205774239-U,20160712
US-9518281-B1,20160809
US-2016224568-A1,20160411
US-2017023518-A1,20160930
CN-106549507-A,20161027
CN-206313979-U,20161212
US-9564463-B2,20160225
GB-2547282-A,20160215
CN-106120134-A,20160819
WO-2017108356-A1,20161130
JP-2016179932-A,20160322
CN-205349441-U,20160111
CN-106012499-A,20160624
CN-205696870-U,20160415
CN-205813072-U,20160628
CN-206240839-U,20161108
CN-206154883-U,20161110
WO-2017053436-A1,20160921
WO-2017151179-A1,20160726
CN-106189103-A,20160824
ES-2578809-A1,20160329
US-2017133903-A1,20160419
US-2016235671-A1,20160426
WO-2016116318-A1,20160111
CN-206212800-U,20161117
US-2017183572-A1,20161214
US-2017156185-A1,20161104
CN-106035774-A,20160713
CN-106805847-A,20161216
CN-105755786-A,20160509
WO-2016209952-A1,20160622
CN-105811623-A,20160511
US-2017120000-A1,20161031
CN-206042462-U,20160518
CN-206271698-U,20161223
CN-106476879-A,20160823
KR-101749274-B1,20161130
CN-205529428-U,20160627
CN-205380732-U,20160318
US-9708249-B1,20160824
JP-6167314-B2,20160830
CN-205471888-U,20160202
CN-206098838-U,20160907
GB-201611871-D0,20160707
GB-201613182-D0,20160729
WO-2017099122-A1,20161207
CN-206057421-U,20160831
CN-106258453-A,20160929
CN-105758634-A,20160226
CN-205921148-U,20160826
CN-105547016-A,20160120
CN-105715030-A,20160311
CN-205574882-U,20160422
CN-106995550-A,20160126
CN-205921406-U,20160622
CN-206054980-U,20160829
CN-106056996-A,20160823
US-2017057965-A1,20160825
EP-3043139-A1,20160107
EP-3184656-A1,20161223
KR-101725867-B1,20160122
US-9730169-B2,20160829
CN-105581851-A,20160229
WO-2016174137-A1,20160428
US-2016137606-A1,20160121
CN-205584265-U,20160309
CN-206029710-U,20160825
CN-205908460-U,20160824
US-2016156536-A1,20160207
CN-205601681-U,20160226
CN-205895197-U,20160606
CN-206150630-U,20160824
CN-206278793-U,20161207
CN-106353091-A,20160831
JP-2017035692-A,20160912
CN-106138655-A,20160826
CN-205550999-U,20160225
CN-206010589-U,20160627
CN-106509251-A,20160919
CN-206205135-U,20161009
CN-205633909-U,20160519
CN-205784136-U,20160513
CN-205890888-U,20160810
CN-106336967-A,20160830
CN-106156486-A,20160621
CN-205425
Query:
SELECT t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"
Query:
SELECT t."publication_number", t."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
   WHERE t."embedding_v1" IS NOT NULL
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_v1
US-5238524-A,"[
  -3.569694600000000e-02,
  1.091246160000000e-01,
  -8.696566000000000e-02,
  -5.249214500000000e-02,
  -2.026235500000000e-02,
  -1.228332100000000e-01,
  -2.662783900000000e-02,
  7.154188000000000e-02,
  6.384524000000000e-02,
  -2.035589200000000e-01,
  7.458057000000000e-02,
  3.209979000000000e-01,
  1.419981900000000e-01,
  -7.767663000000000e-02,
  -1.039061200000000e-01,
  5.897692000000000e-02,
  2.128461700000000e-01,
  5.627649000000000e-02,
  -2.706948000000000e-01,
  1.145322550000000e-01,
  7.630483000000000e-02,
  6.316711000000000e-02,
  -1.459364900000000e-01,
  4.665831500000000e-02,
  1.067651660000000e-01,
  1.369425700000000e-01,
  1.222059200000000e-01,
  -3.934074600000000e-02,
  -7.368673400000000e-02,
  -2.821891600000000e-01,
  6.844579000000001e-02,
  -7.883315000000000e-02,
  -1.100364550000000e-01,
  -2.171354300000000e-01,
  -8.318618999999999e-02,
  -5.838589700000000e-02,
  -1.001938950000000e-01,
  -4.873731400000000e-02,
  1.776320000000000e-01,
  8.161984999999999e-02,
  1.200789300000000e-01,
  1.301946500000000e-03,
  1.148479900000000e-01,
  -9.148388000000000e-02,
  1.589475600000000e-02,
  1.352917600000000e-01,
  1.371218700000000e-01,
  -9.639568599999999e-02,
  1.581350400000000e-01,
  -1.139487850000000e-01,
  4.232562300000000e-02,
  2.166812300000000e-01,
  1.256676800000000e-01,
  -5.226436600000000e-02,
  -1.917003700000000e-01,
  -3.573502600000000e-02,
  -1.934238100000000e-01,
  1.057494950000000e-01,
  -1.090286300000000e-01,
  7.682507500000001e-02,
  6.011416000000000e-02,
  -4.772439600000000e-02,
  -1.717659800000000e-01,
  4.398009000000000e-02
]"
US-4399807-A,"[
  -1.156082750000000e-01,
  -6.751469000000000e-03,
  -5.036004000000000e-02,
  -1.879282000000000e-02,
  -1.044669300000000e-01,
  -4.439341300000000e-02,
  -5.848388400000000e-02,
  3.806121000000000e-02,
  2.885216800000000e-01,
  5.595440400000000e-02,
  -1.466802800000000e-02,
  -3.065339500000000e-02,
  1.198209800000000e-01,
  6.842843400000000e-02,
  -8.390546000000000e-02,
  -1.890292900000000e-01,
  -1.271481000000000e-01,
  -5.156063000000000e-02,
  6.546827400000001e-02,
  1.853869400000000e-01,
  9.171007000000000e-02,
  -5.029962000000000e-02,
  -1.718275200000000e-01,
  -1.814751500000000e-01,
  3.233397000000000e-01,
  -1.013805500000000e-01,
  8.183873400000000e-02,
  1.462269400000000e-01,
  -1.891732800000000e-01,
  4.691555000000000e-02,
  1.072910800000000e-02,
  -5.534596000000000e-02,
  3.538520300000000e-02,
  -6.923172599999999e-02,
  -7.565112400000000e-02,
  -6.278383999999999e-02,
  1.817870100000000e-01,
  -2.127778000000000e-01,
  -5.848981400000000e-02,
  -7.952957000000000e-03,
  -2.259935400000000e-01,
  2.886463300000000e-02,
  6.830008999999999e-02,
  1.965914100000000e-02,
  -8.351676000000000e-02,
  2.232264400000000e-02,
  1.722540500000000e-02,
  -6.079325000000000e-02,
  1.582167700000000e-02,
  -5.307180800000000e-02,
  -9.023270999999999e-02,
  -6.844969500000000e-03,
  7.987070000000001e-03,
  3.110038300000000e-02,
  1.385796500000000e-01,
  -2.194304600000000e-01,
  1.721691500000000e-01,
  -3.118375200000000e-01,
  -1.423686700000000e-01,
  2.831508200000000e-01,
  9.758270500000001e-02,
  7.351360500000000e-02,
  -1.037615600000000e-01,
  5.525585300000000e-02
]"
US-3777713-A,"[
  -3.714427000000000e-02,
  -2.205104000000000e-02,
  4.552292000000000e-02,
  6.296112399999999e-02,
  2.266381700000000e-02,
  1.254268600000000e-01,
  -4.423487200000000e-02,
  -1.549510800000000e-01,
  2.948439000000000e-01,
  -7.010689400000000e-02,
  3.208420800000000e-02,
  1.933668900000000e-01,
  1.942153700000000e-01,
  7.505668000000000e-03,
  -6.770670400000001e-02,
  1.003710850000000e-01,
  2.321457300000000e-01,
  7.890266000000000e-02,
  -8.467876000000001e-02,
  6.580979000000001e-02,
  -1.995520000000000e-01,
  -7.688048500000000e-02,
  -1.137836050000000e-01,
  3.927012500000000e-02,
  8.395525000000000e-02,
  -1.725036200000000e-01,
  1.489349900000000e-01,
  4.386396600000000e-03,
  9.484529000000000e-02,
  1.081363300000000e-01,
  -5.352384200000000e-02,
  3.485712800000000e-02,
  1.719674800000000e-01,
  -2.846693400000000e-01,
  -3.419608600000000e-02,
  4.048607000000000e-02,
  -1.009789800000000e-01,
  -2.111405100000000e-03,
  1.391500700000000e-01,
  -6.965173000000000e-03,
  1.849697900000000e-02,
  -3.783921000000000e-02,
  -7.093511000000000e-02,
  -3.805405600000000e-02,
  1.480709900000000e-01,
  -1.930336500000000e-01,
  -2.794522600000000e-02,
  1.315720100000000e-01,
  -1.779648800000000e-01,
  -1.848160300000000e-02,
  1.522298900000000e-01,
  1.120803100000000e-01,
  9.815019000000000e-02,
  -3.552823000000000e-02,
  -8.721163000000000e-02,
  -2.406563600000000e-01,
  7.030886000000000e-02,
  -8.174422000000001e-02,
  7.246049000000000e-03,
  2.496543500000000e-01,
  -2.334337100000000e-01,
  6.880630000000000e-02,
  -1.128368900000000e-01,
  -1.813162000000000e-01
]"
US-5575347-A,"[
 
Query:
SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_value
-0.09759014
-0.078651346
-0.10224627
-0.0983403
-0.25790602
-0.08247189
0.013742259
-0.12294948
0.080819525
0.02691578
-0.111443974
0.13409771
0.07433381
0.0051532313
-0.107546076
-0.01806273
0.18319431
-0.02954358
-0.060462546
7.859522e-05
0.25664663
-0.024329128
-0.10676161
0.10145806
-0.13808568
-0.071496874
0.20854723
-0.13290617
0.040874187
0.033745658
-0.07300707
-0.057065535
0.017014034
-0.044571783
-0.08327014
-0.1801684
0.051138002
-0.30761087
0.15807615
-0.035334043
0.043117434
-0.101780556
0.20707245
-0.08408691
-0.34054148
0.045913506
-0.095601946
0.14381136
0.09557541
-0.032358523
-0.018898478
0.25465798
-0.073037274
0.109022945
-0.03175191
0.054333884
0.15664567
0.074965976
-0.20294082
0.054057088
0.069939174
0.21290104
0.0069557237
0.03396455
Query:
SELECT p."publication_number", p."filing_date", a."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
     ON p."publication_number" = a."publication_number"
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date,embedding_v1
US-2002199075-A1,20010621,"[
  1.327330600000000e-01,
  -1.390248800000000e-01,
  -8.851990000000000e-02,
  -9.534649000000001e-02,
  -9.190445999999999e-02,
  -7.793257400000000e-02,
  -2.276682800000000e-03,
  -1.273512700000000e-01,
  1.164167000000000e-01,
  1.824077200000000e-02,
  1.768792300000000e-01,
  2.043863400000000e-01,
  -5.214452700000000e-02,
  -9.571313999999999e-03,
  -2.218892700000000e-01,
  3.377413400000000e-02,
  1.092247100000000e-01,
  1.405695800000000e-01,
  -8.305453000000000e-02,
  1.380776500000000e-01,
  4.118194000000000e-02,
  5.223548400000000e-02,
  6.996955000000001e-02,
  -1.863214200000000e-01,
  -5.879353700000000e-03,
  -1.181809200000000e-01,
  1.821372000000000e-01,
  1.003657000000000e-02,
  2.518988200000000e-02,
  1.700414300000000e-01,
  -1.697541800000000e-01,
  -9.175000000000000e-02,
  5.969878300000000e-02,
  1.772470000000000e-02,
  -1.060385700000000e-01,
  -1.592023500000000e-01,
  9.980810000000000e-02,
  -1.771379400000000e-01,
  1.230216800000000e-02,
  3.092083900000000e-02,
  -1.014561800000000e-01,
  -2.828363500000000e-01,
  1.361863500000000e-01,
  1.721303300000000e-01,
  -4.398971000000000e-02,
  -1.389469950000000e-02,
  1.883381200000000e-01,
  -4.531229700000000e-02,
  -1.430749900000000e-01,
  1.128079000000000e-01,
  -2.814714300000000e-01,
  2.599174500000000e-02,
  2.006464200000000e-01,
  -3.294414300000000e-02,
  -3.229250400000000e-02,
  3.630416000000000e-02,
  -5.539227300000000e-02,
  3.239953500000000e-02,
  -2.809038200000000e-01,
  1.027128200000000e-01,
  2.351760300000000e-04,
  1.692046800000000e-01,
  -5.161380400000000e-02,
  1.296108200000000e-01
]"
US-2003048328-A1,20020909,"[
  -2.702655500000000e-01,
  -1.838806400000000e-01,
  1.285569000000000e-02,
  -1.157763800000000e-01,
  -1.229929850000000e-01,
  -1.701488500000000e-02,
  -1.346644400000000e-02,
  -3.185733800000000e-02,
  1.913188800000000e-01,
  -2.219920000000000e-02,
  8.446085000000000e-02,
  2.329903500000000e-01,
  1.853730500000000e-01,
  -1.128309000000000e-01,
  1.308142400000000e-01,
  -1.681749500000000e-02,
  2.669037800000000e-03,
  -3.269643000000000e-02,
  -2.339415600000000e-01,
  8.544633500000000e-02,
  -3.111701800000000e-02,
  6.132171700000000e-02,
  -6.193825500000000e-03,
  -1.194184100000000e-01,
  3.186201000000000e-02,
  -5.385209600000000e-02,
  -6.190734700000000e-02,
  -1.719800500000000e-01,
  5.044012500000000e-02,
  -1.428283500000000e-01,
  3.900431000000000e-02,
  -1.689109800000000e-01,
  1.080429500000000e-01,
  3.628505400000000e-02,
  -1.093701350000000e-01,
  -4.550829000000000e-02,
  2.120426300000000e-02,
  -3.028842000000000e-01,
  9.250326000000000e-02,
  5.986650300000000e-02,
  8.118051000000000e-02,
  -6.228786000000000e-02,
  -8.558510000000000e-02,
  -9.565390000000000e-02,
  -4.911348000000000e-02,
  -1.153620600000000e-02,
  -1.124967800000000e-01,
  -1.549457200000000e-01,
  2.103537600000000e-01,
  -1.087370300000000e-01,
  -1.879206600000000e-01,
  1.774610300000000e-01,
  -2.214985200000000e-01,
  -3.011048300000000e-03,
  -1.456843900000000e-01,
  1.522214200000000e-02,
  -1.584044000000000e-02,
  -1.045927400000000e-01,
  -1.666246700000000e-01,
  -2.193481700000000e-02,
  2.186357500000000e-01,
  6.251993000000000e-02,
  -1.441963600000000e-01,
  1.570182600000000e-01
]"
US-2003102128-A1,20020401,"[
  6.680477000000000e-02,
  -3.299055400000000e-01,
  7.520198000000000e-02,
  1.826542500000000e-01,
  -6.079824600000000e-03,
  1.689028000000000e-01,
  -1.259003400000000e-01,
  -1.360124600000000e-01,
  1.842365300000000e-01,
  -1.851732000000000e-01,
  2.550390700000000e-01,
  3.494883300000000e-02,
  -4.961433600000000e-02,
  7.020295000000000e-02,
  5.756646800000000e-02,
  3.387458600000000e-04,
  1.771642000000000e-02,
  6.763998000000000e-02,
  -1.291013700000000e-01,
  1.065049400000000e-02,
  5.928725000000000e-02,
  -2.486805400000000e-02,
  4.177788300000000e-02,
  -1.247509200000000e-01,
  3.049314300000000e-01,
  1.938775800000000e-01,
  1.244309500000000e-02,
  4.069222500000000e-02,
  7.518745000000000e-02,
  -1.789746200000000e-02,
  1.996825800000000e-01,
  -1.195497400000000e-02,
  4.062491000000000e-02,
  -2.441228600000000e-01,
  -8.912602000000000e-02,
  -1.156921500000000e-01,
  -5.954484600000000e-02,
  -1.913798300000000e-01,
  3.190865700000000e-02,
  8.777053999999999e-02,
  -4.238689000000000e-02,
  -2.312318500000000e-01,
  1.301439700000000e-01,
  -6.900159000000000e-02,
  -1.503533900000000e-01,
  1.719946500000000e-03,
  -7.323673999999999e-02,
  3.023402000000000e-02,
  -1.739042400000000e-01,
  -1.482971900000000e-02,
  -1.961514000000000e-02,
  1.109461500000000e-02,
  1.687544100000000e-01,
  -1.294664100000000e-01,
  1.619266900000000e-01,
  -5.169846000000000e-02,
  2.922115100000000e-02,
  -1.998932000000000e-02,
  -4.254939800000000e-02,
  8.191690000000000e-02,
  5.848678600000000e-02,
  1.285853800000000e-01,
  -1.73541400000
Query:
SELECT p."publication_number", p."filing_date", a."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB a
      ON p."publication_number" = a."publication_number"
    WHERE SUBSTR(p."filing_date"::VARCHAR, 1, 4) = (
        SELECT SUBSTR(p2."filing_date"::VARCHAR, 1, 4)
        FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p2
        WHERE p2."publication_number" = 'US-9741766-B2'
    )
      AND a."embedding_v1" IS NOT NULL
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date,embedding_v1
DE-102016001697-A1,20160213,"[
  1.549099000000000e-01,
  -1.529168000000000e-01,
  -7.213778000000000e-02,
  -2.554955300000000e-02,
  -2.324849200000000e-02,
  7.960399000000000e-02,
  -2.994583500000000e-01,
  -2.408500200000000e-01,
  5.120073300000000e-02,
  -2.324403400000000e-01,
  2.403068400000000e-01,
  8.421313000000000e-02,
  1.471564300000000e-01,
  -2.165872800000000e-02,
  1.292518100000000e-01,
  1.023155000000000e-01,
  2.348361900000000e-01,
  -4.559362300000000e-02,
  4.471442500000000e-02,
  1.060289200000000e-01,
  4.782022500000000e-02,
  -1.191397400000000e-01,
  -3.036612300000000e-01,
  -8.551340000000000e-02,
  -9.539342000000001e-02,
  7.385439000000001e-02,
  1.483603700000000e-02,
  3.224414200000000e-02,
  9.637590000000000e-02,
  -1.018490200000000e-01,
  7.254729000000000e-02,
  1.270311500000000e-01,
  1.199462340000000e-01,
  -1.104812500000000e-01,
  -1.120333700000000e-01,
  -1.088639600000000e-01,
  7.865123500000000e-02,
  -4.784877000000000e-02,
  3.520915000000000e-02,
  3.264184300000000e-02,
  -1.520401100000000e-02,
  -1.124594700000000e-01,
  7.913671000000000e-02,
  -5.087936000000000e-02,
  -2.524172500000000e-02,
  -1.483058800000000e-01,
  2.728901200000000e-01,
  4.521684300000000e-02,
  4.784027000000000e-02,
  -1.173334940000000e-01,
  -4.448974500000000e-03,
  1.091178300000000e-01,
  -3.079926600000000e-02,
  -8.082644000000000e-02,
  -5.408863400000000e-02,
  -1.636218400000000e-01,
  1.149675500000000e-01,
  -7.529661000000000e-02,
  -1.305037900000000e-01,
  2.413305000000000e-01,
  -1.680802700000000e-01,
  5.491068600000000e-03,
  -7.520950600000000e-02,
  4.643416400000000e-02
]"
DE-102016002976-A1,20160310,"[
  1.080961600000000e-01,
  -1.560033000000000e-01,
  -5.361448200000000e-02,
  -1.277045800000000e-01,
  2.663581800000000e-02,
  1.669633800000000e-01,
  -1.277683700000000e-01,
  -7.752000000000001e-02,
  1.107219500000000e-01,
  -1.414034800000000e-01,
  9.812702000000000e-02,
  6.655346600000001e-02,
  3.884482400000000e-02,
  -7.912571000000000e-03,
  -1.226099400000000e-01,
  8.070976000000001e-02,
  2.761173000000000e-01,
  -1.004241500000000e-02,
  -3.320851000000000e-02,
  8.254775000000000e-02,
  -6.338961999999999e-02,
  -1.407725400000000e-01,
  -3.232083000000000e-01,
  6.268948000000001e-02,
  5.053718400000000e-02,
  4.564973500000000e-03,
  -2.358472800000000e-01,
  -5.713523400000000e-03,
  9.625441600000000e-02,
  -1.931270700000000e-01,
  8.233175000000000e-02,
  1.737792500000000e-01,
  9.721842999999999e-02,
  -9.084876000000000e-02,
  -1.432427200000000e-01,
  8.013015000000000e-02,
  1.339592000000000e-01,
  -8.731394000000001e-02,
  7.339930500000000e-02,
  6.434613000000000e-02,
  5.017245600000000e-02,
  -1.346952200000000e-01,
  -3.966465600000000e-02,
  -1.000965800000000e-01,
  2.571577400000000e-02,
  5.158128600000000e-02,
  3.348139200000000e-01,
  -5.863165500000000e-02,
  9.051973000000000e-03,
  -3.042507500000000e-01,
  -9.247884000000001e-02,
  5.058278500000000e-02,
  4.307804000000000e-02,
  -1.447715000000000e-01,
  -1.538339400000000e-01,
  -8.927262599999999e-02,
  9.275870999999999e-02,
  1.151088300000000e-01,
  -1.931780200000000e-02,
  9.917801000000000e-02,
  -1.315736000000000e-01,
  1.319402500000000e-01,
  -9.199432000000000e-02,
  4.328586500000000e-02
]"
DE-102016100284-A1,20160111,"[
  2.607094700000000e-02,
  4.794078000000000e-02,
  4.010330000000000e-02,
  -7.259847000000000e-02,
  -1.654711000000000e-01,
  2.216098500000000e-02,
  -7.231438000000000e-02,
  1.706665600000000e-01,
  1.575905500000000e-01,
  -9.465034000000000e-02,
  1.566829500000000e-01,
  9.948485999999999e-02,
  6.974441600000000e-02,
  -1.604837300000000e-01,
  -3.346260000000000e-02,
  -3.970695700000000e-02,
  6.915731000000000e-02,
  6.287814000000000e-02,
  3.810562000000000e-02,
  1.945252300000000e-01,
  -8.611958000000000e-02,
  -2.505885400000000e-01,
  -1.423204500000000e-01,
  -2.428623100000000e-01,
  1.131937000000000e-01,
  -2.667475600000000e-01,
  1.342579700000000e-02,
  1.257706200000000e-02,
  1.734840400000000e-01,
  -1.575499600000000e-01,
  -2.669501100000000e-02,
  5.529123000000000e-02,
  -5.362224200000000e-02,
  -1.511874500000000e-01,
  -1.915567400000000e-01,
  7.200052999999999e-02,
  2.822164600000000e-01,
  -1.699087900000000e-01,
  -4.788293700000000e-02,
  -1.472453600000000e-02,
  2.011782500000000e-01,
  -5.090971000000000e-02,
  1.051542600000000e-01,
  -1.146227050000000e-01,
  3.063372300000000e-02,
  1.032442800000000e-01,
  3.296781000000000e-02,
  -3.481361600000000e-02,
  -1.180953400000000e-01,
  -3.921800000000000e-02,
  -8.983347999999999e-02,
  2.077014100000000e-01,
  6.045018000000000e-02,
  9.582947000000000e-02,
  1.240175440000000e-01,
  -1.189964700000000e-01,
  -9.571069000000000e-02,
  -1.334451400000000e-01,
  -6.073257000000000e-02,
  4.156873000000000e-02,
  -5.441730000000000e-02,
  2.010973000000000e-01,
  -2.016604400
Query:
SELECT p."publication_number", p."filing_date"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    WHERE p."publication_number" != 'US-9741766-B2'
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date
CN-102221073-B,20061003
CN-104032185-A,20140519
JP-S53112560-U,19770214
JP-S6031763-U,19830804
CN-102355073-A,20111027
US-3290735-A,19630410
CN-103939062-A,20140402
US-4009782-A,19750926
US-9346287-B2,20121002
EP-0047436-A1,19810826
US-3053459-A,19600328
US-D769016-S,20140829
US-7001361-B2,20020823
US-8768622-B2,20130916
CN-103146534-B,20130328
CN-105020109-A,20140421
FR-2578945-A1,19850318
EP-0290740-A3,19880309
US-3540309-A,19681120
US-2801452-A,19540111
JP-H07180311-A,19931224
JP-S6215199-U,19850709
US-3800598-A,19721109
JP-H0246961-A,19880804
CN-102042372-A,20110118
FR-2809142-A1,20000518
CN-104549843-A,20150110
US-4788317-A,19870508
EP-2287459-A1,20100622
US-2664108-A,19490214
EP-2179692-A1,20091019
KR-101284644-B1,20110930
NL-9400648-A,19940422
EP-1979633-A1,20070123
CN-102998715-B,20121121
FR-2852304-A1,20030312
US-4401011-A,19800528
US-3980001-A,19740717
US-5652653-A,19960826
US-2003143352-A1,20020920
JP-S63208691-A,19870226
EP-2563640-A1,20110419
JP-H0427918-Y2,19860918
KR-101356112-B1,20120427
JP-S6259586-A,19850909
US-9185508-B2,20140815
US-9083834-B2,20131127
US-7727119-B2,20040927
US-3303559-A,19650512
CN-103352389-A,20130724
CN-104028531-B,20140425
DE-3505676-C1,19850219
US-5720383-A,19960503
US-RE32332-E,19851003
CN-103985745-A,20140424
EP-0329548-A2,19890214
US-2485875-A,19450125
CN-102522656-A,20111209
CN-105136633-A,20150812
CN-103540276-A,20130929
US-3730406-A,19700903
KR-100744037-B1,20001230
CN-102637824-A,20120427
CN-103524225-A,20131016
FR-2709383-A1,19940725
RU-2499633-C1,20120706
DE-102005027051-A1,20050610
JP-H0140471-Y2,19850807
JP-H0234606-A,19880722
JP-H0313720-B2,19811221
CN-104778235-A,20150402
GB-2213649-A,19890419
EP-2469475-A4,20110330
JP-2010197303-A,20090226
JP-H024798-U,19880623
JP-2010172876-A,20090202
EP-0422564-A3,19901008
US-3837365-A,19730730
CN-102911912-A,20110801
US-4621414-A,19850304
EP-0328412-A3,19890210
US-5993589-A,19990223
CN-102123931-B,20101013
WO-2006027770-A2,20050725
JP-2013206416-A,20120329
CN-100452231-C,20010412
CN-101421795-B,20070405
JP-H02154094-A,19881206
CN-102161570-A,20100707
WO-2007047395-A2,20061012
GB-2322958-B,19980225
EP-0776135-A1,19961122
US-8970668-B2,20101129
EP-1149710-A1,20010426
DE-3120669-A1,19810523
JP-H02135027-U,19890412
EP-0164607-A3,19850515
CN-102700048-A,20120606
CN-102813265-A,20120808
CN-103059180-A,20130115
DE-102013104225-A1,20130425
US-6798389-B1,19990430
CN-104689404-A,20141208
CN-105114055-A,20150814
CN-103821063-A,20140312
EP-0666034-A1,19941222
KR-100866495-B1,20070521
KR-100775300-B1,20060109
US-3782807-A,19720307
CN-103279358-A,20130608
JP-S5451949-U,19770920
EP-2115443-A1,20080227
CN-104623631-A,20150109
US-9525112-B2,20130829
EP-2845538-A1,20140905
FR-2595733-A1,19860317
GB-2421384-A,20051209
JP-2002241708-A,20010219
EP-1919491-A2,20060726
EP-1923371-A1,20060816
EP-0420989-A4,19900328
CN-103115642-B,20130121
DE-19639704-C2,19960926
FR-2730895-A1,19950227
CN-102942066-A,20121119
US-4561577-A,19840912
US-6119952-A,19990827
US-5188878-A,19920429
EP-0054298-A2,19811215
CN-101983201-B,20090408
CN-103889450-A,20111012
US-2970525-A,19560718
US-4992202-A,19891013
JP-2015500151-A,20121214
CN-101546982-B,20080328
CN-102035046-B,20090928
DE-2555921-A1,19751212
JP-S61267279-A,19850520
CN-102335484-A,20110719
ES-2378627-A1,20111214
CN-104740019-A,20150407
US-6308050-B1,19990223
CN-104267382-A,20140923
EP-1434226-A1,20031030
CN-103958095-A,20120814
KR-101248374-B1,20111213
CN-102838039-B,20110621
US-2528327-A,19451108
CN-102686551-A,20101125
CN-102972916-A,20121217
CN-102840937-A,20120621
GB-2413368-A,20010705
DE-102012007836-A1,20120419
DE-19846077-C2,19981006
US-4818778-A,19871207
GB-2376065-A,20010531
GB-2391177-B,20020402
WO-9816434-A1,19971013
CN-100533391-C,20070516
KR-100749366-B1,20070430
CN-1989298-B,20050727
JP-2014114627-A,20121211
CN-102001537-B,20100324
US-5194007-A,19910520
CN-102507392-B,20111107
JP-H0370192-A,19890809
CN-103324912-A,20130530
US-2005180256-A1,20030828
EP-2041715-A1,20061208
JP-H0253926-U,19881014
CN-102412303-A,20111103
CN-104254337-A,20130125
CN-102712350-A,20100823
DE-2840696-A1,19780919
EP-0466466-A1,19910709
KR-20150114451-A,20150908
CN-103479066-A,20130912
CN-103604199-B,20131118
CN-104764999-A,20150427
KR-100654685-B1,20050620
CN-101753397-B,20100129
CN-102343833-A,20110729
JP-H0370134-U,19891110
US-6078208-A,19980528
JP-S5039845-U,19730810
CN-102881794-A,20120712
US-3933562-A,19730301
CN-101907585-A,20100613
US-4999400-A,19891201
DE-102010000381-A1,20100211
CN-100594022-C,20050401
US-6870915-B2,20030320
CN-102372790-B,20111028
EP-2372315-A1,20101216
US-5729130-A,19960117
RU-2449358-C1,20090730
US-3138555-A,19580321
US-4480812-A,19830914
US-6117411-A,19990408
JP-2015210130-A,20140424
WO-2008043341-A1,20071006
WO-2016171704-A1,20150423
WO-2014120950-A2,20140130
US-2003119970-A1,20020722
US-7462187-B2,20040903
WO-9951339-A1,19990331
CN-106884928-A,20161215
CN-205704147-U,20160601
WO-2007130918-A2,20070430
US-7331956-B2,20060802
US-2016043763-A1,20140806
US-8
Query:
SELECT t."publication_number", ARRAY_SIZE(t."embedding_v1") AS "embedding_length"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_length
CA-27-A,64
ES-81-Y,64
DE-303-C,0
ES-866-Y,64
FI-150-A,64
FI-250-A,64
FR-336-E,64
NL-284-C,0
NL-947-C,0
BE-107-T1,64
CA-1911-A,64
CA-4005-A,64
CA-4106-A,64
CA-4698-A,64
CA-4801-A,64
CA-5943-A,64
CA-6183-A,64
CA-6207-A,64
CA-6390-A,64
CA-6969-A,64
CA-8931-S,64
CA-9897-A,64
DE-3129-C,0
DE-3301-C,0
DE-3884-C,0
DE-3983-C,0
DE-5976-C,0
DK-2807-C,64
DK-3080-C,64
DK-3107-C,64
DK-3184-C,64
DK-3510-C,64
DK-5867-C,64
DK-5921-C,64
DK-6491-A,64
DK-7210-C,64
DK-8069-C,64
DK-8466-C,64
DK-9281-C,64
DK-9359-C,64
ES-1062-U,64
ES-1498-U,64
ES-1524-Y,64
ES-1872-U,64
ES-2542-Y,64
ES-2819-Y,64
ES-2960-U,64
ES-3045-U,64
ES-4483-Y,64
ES-4723-Y,64
ES-4858-U,64
ES-5089-Y,64
ES-5219-Y,64
ES-5716-U,64
ES-5975-Y,64
ES-6454-U,64
ES-6552-Y,64
ES-6928-Y,64
ES-6962-Y,64
ES-7086-Y,64
ES-7407-Y,64
ES-7489-Y,64
ES-7516-U,64
ES-7538-U,64
ES-764-H3,64
ES-8269-Y,64
FI-1825-A,64
FI-291-U1,64
FI-3021-A,64
FI-4211-A,64
FI-4543-A,64
FI-8034-A,64
FI-8619-A,64
FI-8985-A,64
FI-902-U1,64
FR-1186-E,64
FR-1382-E,64
FR-1550-M,64
FR-2064-E,64
FR-2510-M,64
FR-2578-M,64
FR-2635-E,64
FR-3293-M,64
FR-5174-E,64
FR-5770-E,64
FR-7085-M,64
FR-7747-E,64
FR-8053-M,64
FR-8143-M,64
NL-3613-C,0
NL-4187-C,0
NL-5034-C,0
NL-9752-C,0
NL-9761-C,64
RU-815-U1,64
US-1260-A,64
US-1844-A,64
US-3704-A,64
US-4174-P,64
US-4340-A,64
US-4449-P,64
US-4570-P,64
US-5293-P,64
US-5333-A,64
US-5618-A,64
US-6399-A,64
US-6501-P,64
US-7090-A,64
US-7624-A,64
US-7703-P,64
US-7765-P,0
US-8162-P,64
US-8923-P,0
US-9153-A,64
US-9563-A,64
US-H817-H,64
CA-10240-A,64
CA-10445-A,64
CA-11856-A,64
CA-12085-A,64
CA-12299-A,64
CA-12359-A,64
CA-12986-A,64
CA-14364-A,64
CA-15108-A,64
CA-15467-A,64
CA-16464-A,64
CA-16944-A,64
CA-17107-A,64
CA-18535-S,64
CA-19006-S,64
CA-21676-A,64
CA-21706-A,64
CA-21979-A,64
CA-22497-S,64
CA-22705-A,64
CA-23044-A,64
CA-25240-S,64
CA-25587-A,64
CA-26172-A,64
CA-27810-A,64
CA-29171-S,64
CA-29565-A,64
CA-30563-S,64
CA-30747-A,64
CA-31066-A,64
CA-31656-A,64
CA-34117-A,64
CA-34328-A,64
CA-35530-A,64
CA-36126-A,64
CA-37060-A,64
CA-37412-A,64
CA-38186-A,64
CA-38290-A,64
CA-38566-A,64
CA-39941-A,64
CA-41986-A,64
CA-42957-A,64
CA-43582-A,64
CA-43613-A,64
CA-43665-A,64
CA-44103-A,64
CA-44675-A,64
CA-45114-S,64
CA-45162-A,64
CA-46041-S,64
CA-46346-S,64
CA-46414-S,64
CA-46650-A,64
CA-47228-S,64
CA-47556-A,64
CA-47943-A,64
CA-48005-S,64
CA-50059-A,64
CA-51084-S,64
CA-51448-A,64
CA-53020-A,64
CA-53342-A,64
CA-53679-A,64
CA-54019-A,64
CA-56199-S,64
CA-57871-A,64
CA-58112-A,64
CA-59658-S,64
CA-62116-A,64
CA-63512-A,64
CA-64348-A,64
CA-64895-A,64
CA-64959-A,64
CA-65051-A,64
CA-65468-A,64
CA-66408-A,64
CA-67027-A,64
CA-67256-A,64
CA-68355-A,64
CA-68561-A,64
CA-69952-A,64
CA-69969-A,64
CA-70837-S,64
CA-71352-A,64
CA-72557-S,64
CA-73229-S,64
CA-73434-A,64
CA-73648-A,64
CA-75054-A,64
CA-75833-A,64
CA-75940-A,64
CA-76442-A,64
CA-77673-S,64
CA-78154-A,64
CA-78848-A,64
CA-80485-S,64
CA-81879-A,64
CA-82735-A,64
CA-83640-A,64
CA-84428-S,64
CA-84611-A,64
CA-85458-S,64
CA-87085-A,64
CA-87655-A,64
CA-88869-A,64
CA-89598-S,64
CA-90451-A,64
CA-90703-A,64
CA-91407-A,64
CA-91839-A,64
CA-92136-S,64
CA-92671-S,64
CA-93153-A,64
CA-93847-S,64
CA-94404-A,64
CA-94834-A,64
CA-95812-A,64
CA-96813-A,64
CA-97691-A,64
CA-97784-A,64
CA-98415-S,64
CA-98613-A,64
CA-98742-A,64
CA-99391-S,64
CA-99529-A,64
DE-10599-C,0
DE-10678-C,0
DE-10717-C,0
DE-12268-C,0
DE-16453-C,0
DE-17382-C,0
DE-17635-C,0
DE-18657-C,0
DE-21533-C,0
DE-21800-C,0
DE-22191-C,0
DE-24092-C,64
DE-24550-C,0
DE-26040-C,0
DE-26251-C,0
DE-26645-C,0
DE-27162-C,64
DE-28245-C,0
DE-28664-C,0
DE-29317-C,0
DE-29580-C,0
DE-29751-C,0
DE-29873-C,0
DE-34701-C,0
DE-35759-C,0
DE-36143-C,0
DE-36572-C,0
DE-36880-C,0
DE-37006-C,0
DE-39978-C,0
DE-41212-C,0
DE-41909-C,0
DE-43016-C,0
DE-43252-C,0
DE-43745-C,0
DE-44221-C,0
DE-44490-C,0
DE-46714-C,0
DE-46729-C,0
DE-46866-C,0
DE-47512-C,0
DE-48016-C,0
DE-48200-C,0
DE-48281-C,0
DE-48415-C,0
DE-48624-C,0
DE-48946-C,0
DE-55522-C,64
DE-57100-C,0
DE-59206-C,0
DE-62156-C,0
DE-62668-C,0
DE-64182-C,0
DE-64466-C,0
DE-68843-C,0
DE-69224-C,0
DE-69735-C,0
DE-70329-C,0
DE-70421-C,0
DE-70605-C,0
DE-71525-C,0
DE-72135-C,0
DE-72417-C,0
DE-73920-C,0
DE-75006-C,0
DE-75333-C,0
DE-78770-C,0
DE-82929-C,0
DE-83658-C,0
DE-83966-C,0
DE-84792-C,0
DE-87929-C,0
DE-90760-C,0
DE-91921-C,0
DE-92960-C,0
DE-93320-C,0
DE-93611-C,0
DE-94567-C,0
DE-96265-C,0
DE-97461-C,0
DE-98822-C,0
DK-10751-C,64
DK-11017-C,64
DK-11274-A,64
DK-11549-C,64
DK-13429-C,64
DK-14113-C,64
DK-15486-A,64
DK-15672-C,64
DK-16003-C,64
DK-16200-C,64
DK-16721-C,64
DK-17077-C,64
DK-17891-C,64
DK-18174-A,64
DK-18287-C,64
DK-18953-C,64
DK-19067-C,64
DK-20848-C,64
DK-21534-C,64
DK-21593-C,64
DK-24093-C,64
DK-24122-C,64
DK-24560-C,64
DK-24764-C,64
DK-25033-C,64
DK-26002-C,64
DK-28460-C,64
DK-30663-C,64
DK-31338-C,64
DK-32802-C,64
DK-32923-C,64
DK-32960-C,64
DK-33342-C,64
DK-33585-C,64
DK-34417-C,64
DK-34475-A,64
DK-34847-C,64
DK-3485-D0,64
DK-35287-A,64
DK-35387-A,64
DK-36818-C,64
DK-37723-C,64
DK-38288-C,64
DK-3889-D0,64
DK-40323-C,64
DK-42091-A,64
DK-44173-C,64
DK-
Query:
SELECT t."publication_number", t."title"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
    WHERE t."title" ILIKE '%keyword%'
    LIMIT 1000;
Answer:
publication_number,title
US-2016357749-A1,Associating keywords from communication content with communication participants
US-9015150-B2,Displaying results of keyword search over enterprise data
KR-100823160-B1,Method for surveying efficiency of keyword advertising and system for executing the method
EP-0529416-A1,Cylinder lock keyword: Elongated cylinder housing
US-2013311181-A1,"Systems and methods for identifying concepts and keywords from spoken words in text, audio, and video content"
CN-101201838-A,Method for improving searching engine based on keyword index using phrase index technique
KR-20120021061-A,Method for providing search service to extract keywords in specific region and display apparatus applying the same
KR-20120003689-A,Method and system for providing reprsentation words of real-time popular keyword
US-2007214044-A1,Method and system for adjusting balance of account of advertiser in keyword advertisement
CN-103853816-A,Method and apparatus for translating graphical symbols into query keywords
CN-105005556-A,Index keyword extraction method and system based on big geological data
EP-1376537-A2,"Apparatus, method, and computer-readable recording medium for recognition of keywords from spontaneous speech"
US-8943101-B2,"Keyword acquiring device, content providing system, keyword acquiring method, a computer-readable recording medium and content providing method"
GB-1508741-A,Keyword detection in continuous speech using continuous asynchronous correlation
US-7716211-B2,System and method for facilitating full text searching utilizing inverted keyword indices
US-2010005083-A1,Frequency based keyword extraction method and system using a statistical measure
US-2013091129-A1,Search method and system using keyword
KR-101682659-B1,Method for customized news alarm based on keyword and management server for news search for the same
CN-103593364-A,Method and system for filling keywords in route search
CN-102081638-A,Method and device for matching keywords
US-7546280-B1,Use of neural networks for keyword generation
US-2003037058-A1,Data management system for retriving data based on hierarchezed keywords associated with keyword names
US-9406077-B1,System and method for ad keyword scoring
CN-104933197-A,Method and terminal equipment for determining keywords
KR-20040063641-A,"Device and method for extending keyword, and search system using the same"
JP-3787310-B2,"Keyword determining method, apparatus, program, and recording medium"
KR-20120090251-A,System and method for recommending keyword and system and method for extracting keyword
CA-2104933-A1,Keyword/Non-Keyword Classification in Isolated Word Speech Recognition
EP-2383970-B1,Camera based method for text input and keyword detection
Query:
SELECT t."publication_number", f.value::FLOAT AS "embedding_value"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_value
US-2002199075-A1,0.13273306
US-2002199075-A1,-0.13902488
US-2002199075-A1,-0.0885199
US-2002199075-A1,-0.09534649
US-2002199075-A1,-0.09190446
US-2002199075-A1,-0.077932574
US-2002199075-A1,-0.0022766828
US-2002199075-A1,-0.12735127
US-2002199075-A1,0.1164167
US-2002199075-A1,0.018240772
US-2002199075-A1,0.17687923
US-2002199075-A1,0.20438634
US-2002199075-A1,-0.052144527
US-2002199075-A1,-0.009571314
US-2002199075-A1,-0.22188927
US-2002199075-A1,0.033774134
US-2002199075-A1,0.10922471
US-2002199075-A1,0.14056958
US-2002199075-A1,-0.08305453
US-2002199075-A1,0.13807765
US-2002199075-A1,0.04118194
US-2002199075-A1,0.052235484
US-2002199075-A1,0.06996955
US-2002199075-A1,-0.18632142
US-2002199075-A1,-0.0058793537
US-2002199075-A1,-0.11818092
US-2002199075-A1,0.1821372
US-2002199075-A1,0.01003657
US-2002199075-A1,0.025189882
US-2002199075-A1,0.17004143
US-2002199075-A1,-0.16975418
US-2002199075-A1,-0.09175
US-2002199075-A1,0.059698783
US-2002199075-A1,0.0177247
US-2002199075-A1,-0.10603857
US-2002199075-A1,-0.15920235
US-2002199075-A1,0.0998081
US-2002199075-A1,-0.17713794
US-2002199075-A1,0.012302168
US-2002199075-A1,0.030920839
US-2002199075-A1,-0.10145618
US-2002199075-A1,-0.28283635
US-2002199075-A1,0.13618635
US-2002199075-A1,0.17213033
US-2002199075-A1,-0.04398971
US-2002199075-A1,-0.0138946995
US-2002199075-A1,0.18833812
US-2002199075-A1,-0.045312297
US-2002199075-A1,-0.14307499
US-2002199075-A1,0.1128079
US-2002199075-A1,-0.28147143
US-2002199075-A1,0.025991745
US-2002199075-A1,0.20064642
US-2002199075-A1,-0.032944143
US-2002199075-A1,-0.032292504
US-2002199075-A1,0.03630416
US-2002199075-A1,-0.055392273
US-2002199075-A1,0.032399535
US-2002199075-A1,-0.28090382
US-2002199075-A1,0.10271282
US-2002199075-A1,0.00023517603
US-2002199075-A1,0.16920468
US-2002199075-A1,-0.051613804
US-2002199075-A1,0.12961082
US-2003048328-A1,-0.27026555
US-2003048328-A1,-0.18388064
US-2003048328-A1,0.01285569
US-2003048328-A1,-0.11577638
US-2003048328-A1,-0.122992985
US-2003048328-A1,-0.017014885
US-2003048328-A1,-0.013466444
US-2003048328-A1,-0.031857338
US-2003048328-A1,0.19131888
US-2003048328-A1,-0.0221992
US-2003048328-A1,0.08446085
US-2003048328-A1,0.23299035
US-2003048328-A1,0.18537305
US-2003048328-A1,-0.1128309
US-2003048328-A1,0.13081424
US-2003048328-A1,-0.016817495
US-2003048328-A1,0.0026690378
US-2003048328-A1,-0.03269643
US-2003048328-A1,-0.23394156
US-2003048328-A1,0.085446335
US-2003048328-A1,-0.031117018
US-2003048328-A1,0.061321717
US-2003048328-A1,-0.0061938255
US-2003048328-A1,-0.11941841
US-2003048328-A1,0.03186201
US-2003048328-A1,-0.053852096
US-2003048328-A1,-0.061907347
US-2003048328-A1,-0.17198005
US-2003048328-A1,0.050440125
US-2003048328-A1,-0.14282835
US-2003048328-A1,0.03900431
US-2003048328-A1,-0.16891098
US-2003048328-A1,0.10804295
US-2003048328-A1,0.036285054
US-2003048328-A1,-0.109370135
US-2003048328-A1,-0.04550829
US-2003048328-A1,0.021204263
US-2003048328-A1,-0.3028842
US-2003048328-A1,0.09250326
US-2003048328-A1,0.059866503
US-2003048328-A1,0.08118051
US-2003048328-A1,-0.06228786
US-2003048328-A1,-0.0855851
US-2003048328-A1,-0.0956539
US-2003048328-A1,-0.04911348
US-2003048328-A1,-0.011536206
US-2003048328-A1,-0.11249678
US-2003048328-A1,-0.15494572
US-2003048328-A1,0.21035376
US-2003048328-A1,-0.10873703
US-2003048328-A1,-0.18792066
US-2003048328-A1,0.17746103
US-2003048328-A1,-0.22149852
US-2003048328-A1,-0.0030110483
US-2003048328-A1,-0.14568439
US-2003048328-A1,0.015222142
US-2003048328-A1,-0.01584044
US-2003048328-A1,-0.10459274
US-2003048328-A1,-0.16662467
US-2003048328-A1,-0.021934817
US-2003048328-A1,0.21863575
US-2003048328-A1,0.06251993
US-2003048328-A1,-0.14419636
US-2003048328-A1,0.15701826
US-2003102128-A1,0.06680477
US-2003102128-A1,-0.32990554
US-2003102128-A1,0.07520198
US-2003102128-A1,0.18265425
US-2003102128-A1,-0.0060798246
US-2003102128-A1,0.1689028
US-2003102128-A1,-0.12590034
US-2003102128-A1,-0.13601246
US-2003102128-A1,0.18423653
US-2003102128-A1,-0.1851732
US-2003102128-A1,0.25503907
US-2003102128-A1,0.034948833
US-2003102128-A1,-0.049614336
US-2003102128-A1,0.07020295
US-2003102128-A1,0.057566468
US-2003102128-A1,0.00033874586
US-2003102128-A1,0.01771642
US-2003102128-A1,0.06763998
US-2003102128-A1,-0.12910137
US-2003102128-A1,0.010650494
US-2003102128-A1,0.05928725
US-2003102128-A1,-0.024868054
US-2003102128-A1,0.041777883
US-2003102128-A1,-0.12475092
US-2003102128-A1,0.30493143
US-2003102128-A1,0.19387758
US-2003102128-A1,0.012443095
US-2003102128-A1,0.040692225
US-2003102128-A1,0.07518745
US-2003102128-A1,-0.017897462
US-2003102128-A1,0.19968258
US-2003102128-A1,-0.011954974
US-2003102128-A1,0.04062491
US-2003102128-A1,-0.24412286
US-2003102128-A1,-0.08912602
US-2003102128-A1,-0.11569215
US-2003102128-A1,-0.059544846
US-2003102128-A1,-0.19137983
US-2003102128-A1,0.031908657
US-2003102128-A1,0.08777054
US-2003102128-A1,-0.04238689
US-2003102128-A1,-0.23123185
US-2003102128-A1,0.13014397
US-2003102128-A1,-0.06900159
US-20031
Query:
SELECT SUBSTR(t."filing_date"::VARCHAR, 1, 4) AS "filing_year", COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    GROUP BY SUBSTR(t."filing_date"::VARCHAR, 1, 4)
    LIMIT 1000;
Answer:
filing_year,patent_count
1998,7519
2009,13974
1950,719
1933,477
2006,13217
1937,463
1903,281
1840,1
1994,5986
1854,2
1991,6583
1921,472
1914,358
1878,3
1904,336
1868,3
2001,10687
1957,812
1932,458
1894,57
1882,1
1898,135
1881,2
2005,12846
1945,359
1930,593
2012,18135
2000,9135
1905,359
1907,363
1885,1
1889,1
1942,340
1908,403
1861,3
1871,1
1976,4245
1988,6058
1955,756
1901,244
1995,6453
1912,384
1879,2
1972,3688
1960,1018
1911,391
1895,64
2013,18485
1992,6316
1951,677
2007,13522
1974,3981
1961,961
1913,391
1997,7271
1880,2
1996,6918
0,24236
1953,733
1938,509
1928,589
1940,413
1936,450
1962,959
1918,257
1897,98
1987,5944
1910,352
1968,1916
1970,2480
1941,338
1884,1
2014,18265
1963,979
1952,629
1920,473
1856,2
2017,2059
1935,446
1828,1
2008,13727
1946,439
1915,294
1973,3808
1954,774
1883,2
2015,17871
2016,13431
1922,517
1923,425
1865,1
1959,955
1975,4117
1902,310
1919,409
1893,28
1875,3
1985,5517
1986,5784
1993,6221
1890,2
2011,16557
2004,12088
1989,6076
1969,2201
1929,602
1909,373
1967,1726
1939,432
1944,334
1867,3
1866,1
1978,4163
1983,5193
2002,11042
1917,334
1925,514
1934,456
1916,290
1931,535
1899,228
1971,3109
1943,355
1896,85
1860,2
1858,1
1947,410
1964,1455
1906,355
1900,216
1859,3
1848,1
1977,4026
1857,1
1956,756
2003,11471
1948,467
1863,2
1927,520
1852,1
1850,1
1981,4631
1999,8436
1980,4434
1979,4373
1876,2
2010,14913
1924,452
1926,487
1864,2
1982,4698
1965,1556
1851,1
1990,6545
1958,894
1984,5363
1874,1
1966,1672
1877,1
1949,553
1887,1
End Exploring Related Columns
Task: Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers.

Please answer only one complete SQL in snowflake dialect in ```sql``` format.
Usage example: SELECT S."Column_Name" FROM {Database Name}.{Schema Name}.{Table_name} (ensure all column names are enclosed in double quotations)
Follow the answer format like: ```csv
publication_number
pub1:str
pub2:str
pub3:str
pub4:str
pub5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities by utilizing the `embedding_v1` vectors in the `ABS_AND_EMB` table. First, we retrieved the embedding for `US-9741766-B2` and determined its filing year from the `filing_date` in the `PUBLICATIONS` table. Next, we collected all other patents filed in the same year and obtained their embeddings. We then calculated the similarity scores by computing the dot product between the embedding vector of `US-9741766-B2` and those of the other patents. After ranking the patents based on these similarity scores, we selected the top five patents (excluding `US-9741766-B2` itself) and provided their publication numbers above..
Here are some useful tips for answering:
When performing a UNION operation on many tables, ensure that all table names are explicitly listed. Union first and then add condition and selection. e.g. SELECT "col1", "col2" FROM (TABLE1 UNION ALL TABLE2) WHERE ...; Don't write sqls as (SELECT col1, col2 FROM TABLE1 WHERE ...) UNION ALL (SELECT col1, col2 FROM TABLE2 WHERE ...); Don't use ['-- Include all', '-- Omit', '-- Continue', '-- Union all', '-- ...', '-- List all', '-- Replace this', '-- Each table', '-- Add other'] to omit any table. Table names here: ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}

For string-matching scenarios, if the string is decided, don't use fuzzy query, and avoid using REGEXP. e.g. Get the object's title contains the word "book" SQL: WHERE "title" LIKE '%book%'
However, if the string is not decided, you may use ILIKE and %. e.g. Get articles that mention "education": SQL: "body" ILIKE '%education%' OR "title" ILIKE '%education%'
When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.
When using ORDER BY, if there are duplicate values in the primary sort column, sort by an additional column as a secondary criterion.Keep all decimals to four decimal places.

2025-01-19 03:36:27 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:36:27 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    p."filing_date",
    CAST(p."filing_date" AS VARCHAR) AS "filing_date_str",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "target_value"
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "embedding_value"
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."idx",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS "product"
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe."idx" = te."idx"
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je."product") AS "similarity_score"
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number",
    dp."similarity_score"
  FROM
    dot_products dp
  ORDER BY
    dp."similarity_score" DESC NULLS LAST
  LIMIT 5
)
SELECT 'publication_number' AS "publication_number" UNION ALL
SELECT dp."publication_number"
FROM top5 dp;
```
2025-01-19 03:36:27 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:36:27 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:36:27 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:36:29 - snowflake.connector.cursor - INFO - Number of results in first chunk: 6
2025-01-19 03:36:29 - snowflake.connector.connection - INFO - closed
2025-01-19 03:36:29 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:36:29 - root - INFO - itercount: 1
2025-01-19 03:36:29 - root - INFO - 0
2025-01-19 03:36:29 - root - INFO - results: 
publication_number
CN-105611619-A
CN-106569780-A
JP-6103097-B1
WO-2017078948-A1
CN-205829632-U
publication_number


2025-01-19 03:36:29 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: ```csv
publication_number
pub1:str
pub2:str
pub3:str
pub4:str
pub5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities by utilizing the `embedding_v1` vectors in the `ABS_AND_EMB` table. First, we retrieved the embedding for `US-9741766-B2` and determined its filing year from the `filing_date` in the `PUBLICATIONS` table. Next, we collected all other patents filed in the same year and obtained their embeddings. We then calculated the similarity scores by computing the dot product between the embedding vector of `US-9741766-B2` and those of the other patents. After ranking the patents based on these similarity scores, we selected the top five patents (excluding `US-9741766-B2` itself) and provided their publication numbers above. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
CN-105611619-A
CN-106569780-A
JP-6103097-B1
WO-2017078948-A1
CN-205829632-U
publication_number
Current sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    p."filing_date",
    CAST(p."filing_date" AS VARCHAR) AS "filing_date_str",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "target_value"
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "embedding_value"
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."idx",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS "product"
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe."idx" = te."idx"
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je."product") AS "similarity_score"
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number",
    dp."similarity_score"
  FROM
    dot_products dp
  ORDER BY
    dp."similarity_score" DESC NULLS LAST
  LIMIT 5
)
SELECT 'publication_number' AS "publication_number" UNION ALL
SELECT dp."publication_number"
FROM top5 dp;
2025-01-19 03:37:11 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:37:11 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    p."filing_date",
    CAST(p."filing_date" AS VARCHAR) AS "filing_date_str",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "target_value"
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "embedding_value"
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."idx",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS "product"
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe."idx" = te."idx"
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je."product") AS "similarity_score"
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number",
    dp."similarity_score"
  FROM
    dot_products dp
  ORDER BY
    dp."similarity_score" DESC NULLS LAST
  LIMIT 5
)
SELECT dp."publication_number" AS "publication_number"
FROM top5 dp;
```
2025-01-19 03:37:11 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:37:11 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:37:11 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:37:12 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-19 03:37:12 - snowflake.connector.connection - INFO - closed
2025-01-19 03:37:13 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:37:13 - root - INFO - itercount: 2
2025-01-19 03:37:13 - root - INFO - 0
2025-01-19 03:37:13 - root - INFO - results: 
publication_number
CN-105949673-A
CN-106543634-A
WO-2017088839-A1
WO-2017029104-A1
CN-106279251-A


2025-01-19 03:37:13 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: ```csv
publication_number
pub1:str
pub2:str
pub3:str
pub4:str
pub5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities by utilizing the `embedding_v1` vectors in the `ABS_AND_EMB` table. First, we retrieved the embedding for `US-9741766-B2` and determined its filing year from the `filing_date` in the `PUBLICATIONS` table. Next, we collected all other patents filed in the same year and obtained their embeddings. We then calculated the similarity scores by computing the dot product between the embedding vector of `US-9741766-B2` and those of the other patents. After ranking the patents based on these similarity scores, we selected the top five patents (excluding `US-9741766-B2` itself) and provided their publication numbers above. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
CN-105949673-A
CN-106543634-A
WO-2017088839-A1
WO-2017029104-A1
CN-106279251-A
Current sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    p."filing_date",
    CAST(p."filing_date" AS VARCHAR) AS "filing_date_str",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "target_value"
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS "idx",
    VALUE::FLOAT AS "embedding_value"
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."idx",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS "product"
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe."idx" = te."idx"
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je."product") AS "similarity_score"
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number",
    dp."similarity_score"
  FROM
    dot_products dp
  ORDER BY
    dp."similarity_score" DESC NULLS LAST
  LIMIT 5
)
SELECT dp."publication_number" AS "publication_number"
FROM top5 dp;
2025-01-19 03:37:49 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:37:49 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS product
  FROM
    flattened_embeddings fe
    JOIN target_embedding te
    ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    publication_number,
    SUM(product) AS similarity_score
  FROM
    joined_embeddings
  GROUP BY
    publication_number
),
top5 AS (
  SELECT
    publication_number
  FROM
    dot_products
  ORDER BY
    similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  publication_number
FROM
  top5;
```

```csv
publication_number
CN-105949673-A
CN-106543634-A
WO-2017088839-A1
WO-2017029104-A1
CN-106279251-A
```
2025-01-19 03:37:49 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:37:49 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:37:49 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:37:50 - snowflake.connector.connection - INFO - closed
2025-01-19 03:37:51 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:37:51 - root - INFO - itercount: 3
2025-01-19 03:37:51 - root - INFO - 000904 (42000): 01b9ceb9-0004-7b17-0001-11c300eec676: SQL compilation error: error line 48 at position 4
invalid identifier 'FE."embedding_value"'
2025-01-19 03:37:51 - root - INFO - Input sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1")
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1")
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS product
  FROM
    flattened_embeddings fe
    JOIN target_embedding te
    ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    publication_number,
    SUM(product) AS similarity_score
  FROM
    joined_embeddings
  GROUP BY
    publication_number
),
top5 AS (
  SELECT
    publication_number
  FROM
    dot_products
  ORDER BY
    similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  publication_number
FROM
  top5;
The error information is:
000904 (42000): 01b9ceb9-0004-7b17-0001-11c300eec676: SQL compilation error: error line 48 at position 4
invalid identifier 'FE."embedding_value"'
Please correct it and output only 1 complete SQL query.
2025-01-19 03:38:30 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:38:30 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
  ON
    p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
  ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    publication_number,
    SUM(product) AS similarity_score
  FROM
    joined_embeddings
  GROUP BY
    publication_number
),
top5 AS (
  SELECT
    publication_number
  FROM
    dot_products
  ORDER BY
    similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  publication_number
FROM
  top5;
```
2025-01-19 03:38:30 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:38:30 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:38:30 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:38:31 - snowflake.connector.connection - INFO - closed
2025-01-19 03:38:31 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:38:32 - root - INFO - itercount: 4
2025-01-19 03:38:32 - root - INFO - 000904 (42000): 01b9ceba-0004-7dde-0001-11c300eed332: SQL compilation error: error line 60 at position 4
invalid identifier 'PUBLICATION_NUMBER'
2025-01-19 03:38:32 - root - INFO - Input sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
  ON
    p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
  ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    publication_number,
    SUM(product) AS similarity_score
  FROM
    joined_embeddings
  GROUP BY
    publication_number
),
top5 AS (
  SELECT
    publication_number
  FROM
    dot_products
  ORDER BY
    similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  publication_number
FROM
  top5;
The error information is:
000904 (42000): 01b9ceba-0004-7dde-0001-11c300eed332: SQL compilation error: error line 60 at position 4
invalid identifier 'PUBLICATION_NUMBER'
Please correct it and output only 1 complete SQL query.
2025-01-19 03:39:24 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:39:24 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je.product) AS similarity_score
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number"
  FROM
    dot_products dp
  ORDER BY
    dp.similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  "publication_number"
FROM
  top5;
```
2025-01-19 03:39:24 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:39:24 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:39:24 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:39:26 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-19 03:39:26 - snowflake.connector.connection - INFO - closed
2025-01-19 03:39:26 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:39:26 - root - INFO - itercount: 5
2025-01-19 03:39:26 - root - INFO - 0
2025-01-19 03:39:26 - root - INFO - results: 
publication_number
JP-2016224950-A
WO-2017078890-A1
US-2017146422-A1
WO-2017102101-A1
WO-2017096439-A1


2025-01-19 03:39:26 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: ```csv
publication_number
pub1:str
pub2:str
pub3:str
pub4:str
pub5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities by utilizing the `embedding_v1` vectors in the `ABS_AND_EMB` table. First, we retrieved the embedding for `US-9741766-B2` and determined its filing year from the `filing_date` in the `PUBLICATIONS` table. Next, we collected all other patents filed in the same year and obtained their embeddings. We then calculated the similarity scores by computing the dot product between the embedding vector of `US-9741766-B2` and those of the other patents. After ranking the patents based on these similarity scores, we selected the top five patents (excluding `US-9741766-B2` itself) and provided their publication numbers above. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
JP-2016224950-A
WO-2017078890-A1
US-2017146422-A1
WO-2017102101-A1
WO-2017096439-A1
Current sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je.product) AS similarity_score
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number"
  FROM
    dot_products dp
  ORDER BY
    dp.similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  "publication_number"
FROM
  top5;
2025-01-19 03:40:01 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:40:01 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
  ON
    p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
  ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je.product) AS similarity_score
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number"
  FROM
    dot_products dp
  ORDER BY
    dp.similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  top5."publication_number"
FROM
  top5;
```
2025-01-19 03:40:01 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:40:01 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:40:01 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:40:03 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-19 03:40:03 - snowflake.connector.connection - INFO - closed
2025-01-19 03:40:03 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:40:03 - root - INFO - itercount: 6
2025-01-19 03:40:03 - root - INFO - 0
2025-01-19 03:40:03 - root - INFO - results: 
publication_number
JP-2017115847-A
WO-2017037485-A3
US-2017169326-A1
WO-2016125153-A1
CN-105957084-A


2025-01-19 03:40:03 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: ```csv
publication_number
pub1:str
pub2:str
pub3:str
pub4:str
pub5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities by utilizing the `embedding_v1` vectors in the `ABS_AND_EMB` table. First, we retrieved the embedding for `US-9741766-B2` and determined its filing year from the `filing_date` in the `PUBLICATIONS` table. Next, we collected all other patents filed in the same year and obtained their embeddings. We then calculated the similarity scores by computing the dot product between the embedding vector of `US-9741766-B2` and those of the other patents. After ranking the patents based on these similarity scores, we selected the top five patents (excluding `US-9741766-B2` itself) and provided their publication numbers above. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
JP-2017115847-A
WO-2017037485-A3
US-2017169326-A1
WO-2016125153-A1
CN-105957084-A
Current sql:
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS target_value
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
  ON
    p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS idx,
    f.VALUE::FLOAT AS embedding_value
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe.embedding_value,
    te.target_value,
    fe.embedding_value * te.target_value AS product
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
  ON fe.idx = te.idx
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je.product) AS similarity_score
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number"
  FROM
    dot_products dp
  ORDER BY
    dp.similarity_score DESC NULLS LAST
  LIMIT 5
)
SELECT
  top5."publication_number"
FROM
  top5;
2025-01-19 03:40:52 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-19 03:40:52 - root - INFO - ```sql
WITH target_data AS (
  SELECT
    p."publication_number",
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) AS "filing_year",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    p."publication_number" = 'US-9741766-B2'
),
target_embedding AS (
  SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) - 1 AS "idx",
    f.VALUE::FLOAT AS "target_value"
  FROM
    target_data,
    LATERAL FLATTEN(input => target_data."embedding_v1") f
),
same_year_pubs AS (
  SELECT
    p."publication_number",
    a."embedding_v1"
  FROM
    PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS AS p
  JOIN
    PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB AS a
    ON p."publication_number" = a."publication_number"
  WHERE
    SUBSTR(CAST(p."filing_date" AS VARCHAR), 1, 4) = (SELECT "filing_year" FROM target_data)
    AND p."publication_number" != 'US-9741766-B2'
    AND a."embedding_v1" IS NOT NULL
),
flattened_embeddings AS (
  SELECT
    sp."publication_number",
    ROW_NUMBER() OVER (PARTITION BY sp."publication_number" ORDER BY (SELECT NULL)) - 1 AS "idx",
    f.VALUE::FLOAT AS "embedding_value"
  FROM
    same_year_pubs sp,
    LATERAL FLATTEN(input => sp."embedding_v1") f
),
joined_embeddings AS (
  SELECT
    fe."publication_number",
    fe."embedding_value",
    te."target_value",
    fe."embedding_value" * te."target_value" AS "product"
  FROM
    flattened_embeddings fe
  JOIN
    target_embedding te
    ON fe."idx" = te."idx"
),
dot_products AS (
  SELECT
    je."publication_number",
    SUM(je."product") AS "similarity_score"
  FROM
    joined_embeddings je
  GROUP BY
    je."publication_number"
),
top5 AS (
  SELECT
    dp."publication_number"
  FROM
    dot_products dp
  ORDER BY
    dp."similarity_score" DESC NULLS LAST
  LIMIT 5
)
SELECT
  "publication_number"
FROM
  top5;
```
2025-01-19 03:40:52 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.62-x86_64-with-glibc2.31
2025-01-19 03:40:52 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-19 03:40:52 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-19 03:40:53 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-19 03:40:53 - snowflake.connector.connection - INFO - closed
2025-01-19 03:40:53 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-19 03:40:54 - root - INFO - itercount: 7
2025-01-19 03:40:54 - root - INFO - 0
2025-01-19 03:40:54 - root - INFO - Total iteration counts: 7
