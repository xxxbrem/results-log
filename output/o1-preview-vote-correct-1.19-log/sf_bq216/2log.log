2025-01-20 06:15:24 - openai._base_client - INFO - Retrying request to /chat/completions in 0.474887 seconds
2025-01-20 06:16:35 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-20 06:16:35 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:35 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:35 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:37 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:16:37 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:37 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:37 - root - INFO - SQL:
SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
filing_date
20160511

2025-01-20 06:16:37 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:37 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:37 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:39 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:16:39 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:39 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:39 - root - INFO - SQL:
SELECT "filing_date",
          SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
filing_date,filing_year
20160511,2016

2025-01-20 06:16:39 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:39 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:39 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:41 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-20 06:16:41 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:41 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:41 - root - INFO - SQL:
SELECT "publication_number",
          "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date
CN-104697263-B,20150310
US-9589875-B2,20150909
CN-104569091-A,20150105
CN-104789703-A,20150520
KR-20170002431-U,20151228
EP-3096404-A1,20150521
US-2016347879-A1,20150206
US-2017156202-A1,20151130
US-9645875-B2,20150316
WO-2016086236-A3,20151215
CN-105507308-A,20151231
GB-2539926-A,20150701
CN-104852710-A,20150609
JP-2016032699-A,20151117
CN-104757913-A,20150504
CN-104800294-A,20150428
CN-104944251-A,20150525
US-D761972-S,20150427
KR-101618208-B1,20150901
DE-202015104272-U1,20150813
US-9596361-B2,20151114
WO-2016042057-A1,20150917
CN-205409471-U,20151210
CN-204807148-U,20150514
CN-205087764-U,20150910
US-2016038865-A1,20150520
WO-2016009206-A1,20150715
JP-2016026765-A,20151027
WO-2016040331-A1,20150908
CN-104880406-A,20150603
US-2015310996-A1,20150312
CN-104882531-A,20150608
RU-2600124-C1,20150327
KR-101691427-B1,20150417
CN-104806079-A,20150408
CN-105235104-A,20151026
CN-104876970-A,20150520
CN-104591000-A,20150211
CN-104794677-A,20150505
CN-104828208-A,20150508
EP-2916262-A1,20150114
US-9478132-B1,20151229
CN-104977690-A,20150624
US-2015358175-A1,20150605
RU-2584221-C1,20150625
KR-101716963-B1,20150917
CN-105326409-A,20151118
CN-104557586-A,20150125
CN-104959868-A,20150721
WO-2016041530-A1,20150915
CN-105169796-A,20150914
CN-105044834-A,20150915
CN-105251370-A,20151124
US-2016318160-A1,20150428
CN-105134683-A,20150821
CN-104886923-A,20150618
CN-104604974-A,20150220
CN-105054847-A,20150811
DE-102015117614-A1,20151016
CN-105463535-A,20151223
CN-105107320-A,20150825
CN-104828943-A,20150331
CN-104630155-A,20150129
US-9602787-B2,20150216
CN-105078172-A,20150813
CN-104936370-B,20150616
CN-104713025-A,20150308
CN-104774339-A,20150402
CN-104735756-A,20150312
CN-105349838-A,20151218
CN-105113508-A,20150911
CN-105252582-A,20151112
CN-104632020-B,20150127
CN-105083542-A,20150720
CN-105268300-A,20151111
JP-2016174830-A,20150320
CN-205037871-U,20151020
CN-205234346-U,20151215
JP-2017518961-A,20150410
CN-104801425-B,20150511
CN-104720819-A,20150324
CN-206036159-U,20150202
FI-11117-U1,20150522
CN-204482437-U,20150205
JP-2016153562-A,20150220
CN-204851352-U,20150615
CN-106162267-A,20150427
CN-105713728-A,20150923
CN-106820746-A,20151206
KR-20160084884-A,20150106
EP-3058860-B1,20151120
CN-105373822-A,20151117
CN-105213936-A,20151027
CN-204695342-U,20150227
CN-205013864-U,20150812
CN-205333578-U,20151231
CN-204687212-U,20150528
EP-2939787-A2,20150423
US-9420758-B2,20150518
CN-106878141-A,20151211
CN-104844175-A,20150504
CN-205323931-U,20151113
US-2016374883-A1,20151027
US-9680557-B2,20151214
US-9620764-B2,20150227
DE-102015002573-A1,20150302
US-2015370926-A1,20150619
JP-2015188095-A,20150520
CN-105012459-A,20150630
CN-205377016-U,20151221
CN-104722206-A,20150319
CN-105146854-B,20151030
US-2016380694-A1,20150929
WO-2015173510-A1,20150512
CN-104873509-A,20150527
US-D772301-S,20150604
CN-104792066-A,20150424
CN-104649261-A,20150211
CN-105622540-A,20151224
CN-105380666-B,20151106
CN-105178274-A,20150821
US-2015233226-A1,20150217
CN-104581833-A,20150112
CN-105328519-A,20151029
CN-104954512-A,20150402
DE-102015218187-A1,20150922
CN-105329631-A,20151102
CN-106611627-A,20151023
CN-104703346-A,20150213
CN-104748698-B,20150410
US-2016138809-A1,20151119
WO-2015177990-A1,20150514
KR-101622919-B1,20150325
WO-2016082975-A1,20150925
US-9714722-B2,20150306
CN-204694213-U,20150424
CN-204682370-U,20150519
US-2017144221-A1,20150612
WO-2015136239-A1,20150224
CN-105301020-B,20151111
CN-104744295-A,20150323
US-2016266823-A1,20150618
CN-104992496-A,20150708
RU-2609590-C1,20151207
CN-105174110-A,20150825
JP-WO2016031718-A1,20150821
WO-2015139006-A1,20150313
US-9755000-B2,20150828
CN-106607021-A,20151022
CN-204915452-U,20150807
CN-205230283-U,20151126
WO-2015149655-A1,20150327
US-9421780-B2,20150918
CN-104916075-A,20150629
CN-105463514-A,20150612
CN-106030611-A,20151209
US-9465333-B2,20150120
US-2017075824-A1,20150914
CN-105101164-A,20150723
CN-104716543-B,20150403
KR-101697001-B1,20150430
CN-104741136-A,20150126
FR-3037515-A1,20150616
CN-104857867-B,20150507
WO-2016199206-A1,20150608
EP-2921308-A1,20150318
WO-2015129484-A1,20150213
CN-105490916-A,20151118
US-2015165314-A1,20150224
CN-104629229-A,20150204
US-2015339633-A1,20150526
WO-2016014338-A1,20150716
CN-105048551-A,20150723
US-9534867-B2,20150306
WO-2016001901-A1,20150703
US-9238898-B1,20150903
JP-2015195708-A,20150311
EP-2930313-A1,20150401
CN-105045326-A,20150626
WO-2016145853-A1,20151026
US-2015354689-A1,20150609
WO-2015172017-A1,20150508
CN-105649702-A,20151014
CN-204601816-U,20150130
US-2016018841-A1,20150501
WO-2015171970-A1,20150508
RU-2591293-C1,20150525
CN-105328385-A,20151124
CN-105084827-A,20150828
EP-2982609-A1,20150807
JP-2016146975-A,20150212
CN-105134885-A,20150617
DE-102015008505-A1,20150703
KR-101753069-B1,20150717
US-2015268861-A1,20150602
CN-105014671-A,20150814
KR-101718704-B1,20150430
CN-105112726-A,20150827
US-D771253-S,20150623
US-2017109175-A1,20151015
CN-105096684-A,20150812
US-9295873-B1,20150513
CN-104678339-A,20150211
WO-2016080359-A1

2025-01-20 06:16:41 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:41 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:41 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:43 - snowflake.connector.cursor - INFO - Number of results in first chunk: 71
2025-01-20 06:16:44 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:45 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:45 - root - INFO - SQL:
SELECT t1."publication_number",
          t1."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
     ON t1."publication_number" = t2."publication_number"
   WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_v1
CN-204801515-U,"[
  -1.617039900000000e-01,
  -2.041453000000000e-01,
  1.583752200000000e-01,
  -1.813701800000000e-01,
  -6.593063500000000e-02,
  1.757997500000000e-02,
  1.232799440000000e-01,
  7.822417000000000e-02,
  2.498712100000000e-01,
  -2.559798800000000e-02,
  1.328594400000000e-01,
  1.063814200000000e-01,
  -7.021489000000000e-03,
  -1.691715900000000e-01,
  -1.084881200000000e-01,
  3.786757000000000e-04,
  2.165014300000000e-01,
  -3.672244000000000e-02,
  -2.002787600000000e-01,
  1.521670700000000e-01,
  -6.065763500000000e-02,
  5.232767000000000e-02,
  -1.297323000000000e-01,
  -3.648065400000000e-02,
  1.552067700000000e-01,
  3.195737700000000e-02,
  -4.553948000000000e-02,
  5.762908200000000e-02,
  -2.882783900000000e-02,
  -1.767890300000000e-03,
  6.948511000000000e-02,
  1.571424200000000e-01,
  -7.776790000000000e-02,
  -1.813367000000000e-01,
  -7.031747000000001e-02,
  6.311979000000000e-02,
  1.680935000000000e-01,
  -8.165157600000000e-02,
  1.056606550000000e-01,
  1.978455800000000e-01,
  8.829280000000000e-02,
  -1.274468500000000e-01,
  4.547495000000000e-02,
  -1.912349500000000e-02,
  7.481712000000000e-02,
  6.368551000000000e-02,
  7.399625000000000e-02,
  -1.809017800000000e-01,
  -4.277152000000000e-02,
  4.543160300000000e-02,
  -2.318193900000000e-01,
  -1.419309400000000e-01,
  2.058418400000000e-01,
  6.720073999999999e-02,
  -4.815504700000000e-02,
  -4.238241000000000e-02,
  1.615754100000000e-02,
  2.051622100000000e-01,
  1.033735100000000e-01,
  2.362120400000000e-01,
  -2.552090200000000e-02,
  2.313707900000000e-01,
  1.639270200000000e-02,
  1.389872000000000e-01
]"
CN-204424237-U,"[
  -6.760605000000000e-03,
  4.580350000000000e-02,
  -7.610508000000001e-02,
  3.445182500000000e-03,
  -7.899235000000000e-02,
  -9.900325000000000e-02,
  -9.124407000000000e-02,
  -1.558439000000000e-01,
  5.143846000000000e-02,
  -1.806230800000000e-01,
  1.399277200000000e-01,
  3.497353500000000e-01,
  9.668644500000000e-02,
  7.194656000000001e-02,
  -1.120633500000000e-02,
  4.667864700000000e-02,
  1.038404260000000e-01,
  -1.160869450000000e-01,
  1.229063700000000e-02,
  5.218330300000000e-03,
  2.711003400000000e-03,
  9.662933000000000e-02,
  -1.594891300000000e-01,
  1.067801900000000e-01,
  6.181362000000000e-02,
  3.382827700000000e-02,
  3.016782000000000e-01,
  -8.470138000000001e-02,
  3.162067400000000e-02,
  -7.836760600000001e-02,
  7.276077000000000e-02,
  1.479084200000000e-01,
  -1.459811350000000e-02,
  -1.453842000000000e-01,
  1.161919100000000e-02,
  -1.261618100000000e-01,
  -1.900912500000000e-01,
  -2.159788600000000e-01,
  8.299539000000000e-02,
  -2.205223800000000e-02,
  5.312182400000000e-02,
  -3.868236400000000e-02,
  1.924925000000000e-01,
  9.456760000000000e-02,
  8.227339000000000e-02,
  -8.401968999999999e-02,
  -6.152915000000000e-02,
  -2.328505400000000e-01,
  1.245935200000000e-01,
  -2.035363500000000e-01,
  -2.721936000000000e-01,
  -7.051336000000000e-02,
  -6.496831300000000e-03,
  -1.478801000000000e-01,
  -1.333010500000000e-01,
  -1.114071800000000e-01,
  3.392270200000000e-02,
  -1.976939000000000e-02,
  -1.326692700000000e-01,
  4.978147000000000e-02,
  -4.011337000000000e-02,
  1.648772400000000e-01,
  4.059186200000000e-02,
  2.268262500000000e-01
]"
CN-205352621-U,"[
  2.544930200000000e-02,
  -8.386633500000000e-02,
  2.869848700000000e-02,
  9.847804000000000e-02,
  8.931399000000000e-03,
  -2.289047100000000e-01,
  -7.446997599999999e-02,
  -1.878729500000000e-02,
  1.612916300000000e-01,
  -8.985504000000000e-02,
  8.396658999999999e-02,
  1.032370600000000e-01,
  -7.158653399999999e-02,
  -2.639932600000000e-02,
  -1.655598900000000e-01,
  -1.461305500000000e-01,
  4.423608000000000e-02,
  9.187178000000000e-02,
  -6.147813400000000e-02,
  1.737253400000000e-01,
  1.979040200000000e-01,
  -1.014410800000000e-01,
  -4.211207000000000e-02,
  -7.001325000000000e-02,
  -1.197979400000000e-02,
  2.143231500000000e-01,
  2.757088200000000e-01,
  -1.217770900000000e-01,
  2.792325400000000e-02,
  4.225816600000000e-02,
  -4.061862500000000e-02,
  6.785101300000000e-03,
  -2.403135600000000e-02,
  -1.918753200000000e-01,
  2.340157500000000e-01,
  -2.446222000000000e-02,
  1.127505000000000e-01,
  -3.769849000000000e-02,
  1.888829800000000e-01,
  1.144652000000000e-01,
  8.610803000000000e-02,
  -1.171033600000000e-01,
  1.612983800000000e-01,
  -7.436228000000000e-02,
  -6.006806700000000e-02,
  -2.320233000000000e-02,
  7.646737000000001e-02,
  -1.221230850000000e-01,
  -1.311102500000000e-01,
  9.180926000000000e-02,
  -2.202850900000000e-01,
  -1.130097700000000e-01,
  -2.965519700000000e-01,
  3.186265800000000e-02,
  6.406215600000000e-02,
  -1.403984900000000e-02,
  -6.135984000000000e-02,
  -5.080367600000000e-02,
  -1.020818500000000e-01,
  1.679855700000000e-01,
  -7.533657000000001e-02,
  2.475811700000000e-01,
  -8.751605500000000e-02,
  2.057240200000000e-01
]"
CN-205221425

2025-01-20 06:16:45 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:45 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:45 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:46 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:16:46 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:46 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:46 - root - INFO - SQL:
SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"

2025-01-20 06:16:46 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:46 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:46 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:48 - snowflake.connector.cursor - INFO - Number of results in first chunk: 64
2025-01-20 06:16:48 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:48 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:48 - root - INFO - SQL:
SELECT f.value AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_value
-9.759014000000001e-02
-7.865134600000000e-02
-1.022462700000000e-01
-9.834030000000001e-02
-2.579060200000000e-01
-8.247189000000001e-02
1.374225900000000e-02
-1.229494800000000e-01
8.081952500000000e-02
2.691578000000000e-02
-1.114439740000000e-01
1.340977100000000e-01
7.433381000000000e-02
5.153231300000000e-03
-1.075460760000000e-01
-1.806273000000000e-02
1.831943100000000e-01
-2.954358000000000e-02
-6.046254600000000e-02
7.859522000000000e-05
2.566466300000000e-01
-2.432912800000000e-02
-1.067616100000000e-01
1.014580600000000e-01
-1.380856800000000e-01
-7.149687400000000e-02
2.085472300000000e-01
-1.329061700000000e-01
4.087418700000000e-02
3.374565800000000e-02
-7.300706999999999e-02
-5.706553500000000e-02
1.701403400000000e-02
-4.457178300000000e-02
-8.327014000000001e-02
-1.801684000000000e-01
5.113800200000000e-02
-3.076108700000000e-01
1.580761500000000e-01
-3.533404300000000e-02
4.311743400000000e-02
-1.017805560000000e-01
2.070724500000000e-01
-8.408691000000000e-02
-3.405414800000000e-01
4.591350600000000e-02
-9.560194599999999e-02
1.438113600000000e-01
9.557541000000000e-02
-3.235852300000000e-02
-1.889847800000000e-02
2.546579800000000e-01
-7.303727400000000e-02
1.090229450000000e-01
-3.175191000000000e-02
5.433388400000000e-02
1.566456700000000e-01
7.496597600000000e-02
-2.029408200000000e-01
5.405708800000000e-02
6.993917400000001e-02
2.129010400000000e-01
6.955723700000000e-03
3.396455000000000e-02

2025-01-20 06:16:48 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:48 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:48 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:49 - snowflake.connector.cursor - INFO - Number of results in first chunk: 0
2025-01-20 06:16:51 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:51 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:51 - root - INFO - SQL:
SELECT "publication_number",
          "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_v1
CA-27-A,"[
  1.542691000000000e-01,
  -1.512821800000000e-01,
  -1.650247300000000e-01,
  6.317439500000000e-03,
  -6.877411000000000e-02,
  7.857726000000000e-02,
  1.997577000000000e-02,
  -1.052709150000000e-01,
  1.906607200000000e-01,
  -3.087626800000000e-02,
  -4.402885000000000e-02,
  -1.932268600000000e-02,
  1.498914700000000e-01,
  -1.014574240000000e-01,
  1.522054700000000e-01,
  2.159083800000000e-02,
  3.287851200000000e-01,
  -3.723864300000000e-02,
  -1.093368460000000e-01,
  -2.695568300000000e-02,
  5.093054000000000e-03,
  -2.561860000000000e-02,
  -8.104277999999999e-02,
  4.378689000000000e-02,
  1.772555000000000e-01,
  1.866227200000000e-01,
  4.738728700000000e-02,
  1.293443900000000e-01,
  -9.107929000000001e-03,
  -5.338581700000000e-03,
  -5.402789600000000e-02,
  9.968319500000000e-02,
  -1.297268900000000e-01,
  -6.103027600000000e-02,
  1.034460960000000e-01,
  -1.370337900000000e-01,
  -1.529048900000000e-02,
  -7.281200600000000e-02,
  -6.650846000000000e-03,
  -5.688674000000000e-02,
  -5.571032000000000e-02,
  -2.353075000000000e-02,
  1.588186900000000e-01,
  1.485413600000000e-01,
  1.301227400000000e-02,
  7.831083000000000e-02,
  -1.220956100000000e-01,
  -3.694782800000000e-02,
  1.388754100000000e-01,
  -1.948010500000000e-01,
  1.644870500000000e-02,
  -1.159949600000000e-01,
  7.601101000000000e-02,
  -1.079300800000000e-01,
  3.773738400000000e-02,
  -3.411133600000000e-01,
  1.087194160000000e-01,
  3.469542000000000e-01,
  -1.208127800000000e-01,
  2.158840900000000e-01,
  -1.885225600000000e-02,
  -4.778167200000000e-02,
  1.922371400000000e-01,
  8.118848500000000e-02
]"
ES-81-Y,"[
  5.887155000000000e-02,
  -1.084279900000000e-01,
  -7.473050000000000e-03,
  -1.078326500000000e-01,
  -1.136954200000000e-01,
  -5.629550000000000e-02,
  -1.293592000000000e-01,
  1.470960500000000e-02,
  1.143989640000000e-01,
  -6.502111000000000e-03,
  1.211329850000000e-01,
  -1.472910300000000e-01,
  1.433625000000000e-01,
  -1.972437000000000e-01,
  -1.466153400000000e-01,
  6.347028000000000e-02,
  1.704387400000000e-01,
  -1.788644500000000e-01,
  -2.144294800000000e-01,
  -5.971858000000000e-02,
  -1.807118600000000e-02,
  9.654319999999999e-03,
  -6.319642000000000e-02,
  -1.158018000000000e-01,
  1.591617600000000e-01,
  -8.069207000000000e-02,
  2.444405900000000e-01,
  2.053556900000000e-01,
  2.203187000000000e-01,
  4.123914000000000e-02,
  -1.226528360000000e-01,
  1.756981200000000e-01,
  1.406480400000000e-01,
  -2.614098500000000e-01,
  -3.579098400000000e-02,
  -3.342285000000000e-02,
  5.340901400000000e-02,
  -2.008394400000000e-01,
  7.221930000000000e-02,
  1.083169000000000e-01,
  -1.035950600000000e-01,
  4.522684600000000e-02,
  2.121584000000000e-01,
  -3.648881000000000e-02,
  -4.667341700000000e-02,
  -8.133340000000000e-02,
  -5.762764000000000e-02,
  1.715386000000000e-01,
  -6.118799400000000e-02,
  -1.188068800000000e-01,
  -4.722248400000000e-02,
  -8.758543000000001e-02,
  -1.545800400000000e-02,
  -1.725661600000000e-02,
  -1.594496200000000e-01,
  -3.453176000000000e-02,
  -7.645045000000000e-02,
  9.057411999999999e-02,
  -3.059179000000000e-01,
  1.417563600000000e-01,
  4.234178700000000e-02,
  6.612614000000000e-02,
  1.629971300000000e-02,
  8.276451000000000e-02
]"
DE-303-C,[]
ES-866-Y,"[
  2.173252600000000e-01,
  -5.955347000000000e-02,
  -8.669304000000000e-02,
  -1.435769700000000e-02,
  -1.091980100000000e-01,
  -5.290851000000000e-02,
  -1.218726560000000e-01,
  -1.733191000000000e-02,
  1.428825100000000e-01,
  4.071840600000000e-02,
  1.569196900000000e-01,
  2.504207000000000e-02,
  1.646801100000000e-01,
  -1.555543000000000e-01,
  -1.366939400000000e-01,
  1.551018000000000e-01,
  2.533057300000000e-01,
  -1.034493300000000e-01,
  -3.249411000000000e-03,
  -1.919896700000000e-02,
  -3.357952500000000e-02,
  7.957726000000000e-02,
  -8.258553000000000e-02,
  -1.893159400000000e-01,
  1.380639200000000e-01,
  -1.185456100000000e-01,
  2.993756800000000e-01,
  1.806876800000000e-01,
  2.209677700000000e-01,
  1.239111650000000e-01,
  -3.356762600000000e-02,
  1.042425860000000e-01,
  1.649517100000000e-01,
  -2.388138300000000e-01,
  1.648602600000000e-02,
  -8.377965499999999e-02,
  1.231861600000000e-01,
  -1.706603200000000e-01,
  1.260255400000000e-01,
  1.798895000000000e-01,
  -1.287039000000000e-01,
  5.932817000000000e-02,
  1.091629300000000e-01,
  -9.887335000000000e-02,
  1.712858300000000e-02,
  -1.140154700000000e-01,
  2.210558600000000e-02,
  9.686722000000000e-02,
  -5.223890000000000e-02,
  -2.214440900000000e-01,
  -1.367440600000000e-02,
  -9.799734500000000e-02,
  6.677625000000000e-02,
  1.251626600000000e-01,
  -2.030494800000000e-01,
  -1.921786200000000e-02,
  -3.204157000000000e-02,
  4.560034300000000e-03,
  -1.331128200000000e-01,
  8.321140000000000e-02,
  -6.589308000000001e-02,
  7.723393000000001e-02,
  2.468057500000000e-02,
  6.641050400000000e-02
]"
FI-150-A,"[
 

2025-01-20 06:16:51 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:51 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:51 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:53 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:16:53 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:53 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:53 - root - INFO - SQL:
SELECT COUNT(*)
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
Results:
COUNT(*)
469133

2025-01-20 06:16:53 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:53 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:53 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:55 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:16:55 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:55 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:55 - root - INFO - SQL:
SELECT "similar"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
similar
"[
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6144584-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7920408-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7408212-B1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2009059644-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2008007993-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6958938-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6356477-B1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2005174841-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2005265107-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6577530-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2010290294-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7317641-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2009122598-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2011122676-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2004006579-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2002040992-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2011188284-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2009004725-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-8537615-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2013187118-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2012320678-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2006050552-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2006092739-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2004170050-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2009009657-A"",
    ""type"": """"
  }
]"

2025-01-20 06:16:55 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:55 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:55 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:57 - snowflake.connector.cursor - INFO - Number of results in first chunk: 25
2025-01-20 06:16:57 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:57 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:57 - root - INFO - SQL:
SELECT f.value::STRING AS "similar_publication_number"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."similar") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Results:
similar_publication_number
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6144584-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7920408-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7408212-B1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2009059644-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2008007993-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6958938-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6356477-B1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2005174841-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2005265107-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6577530-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2010290294-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7317641-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2009122598-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2011122676-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2004006579-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2002040992-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2011188284-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2009004725-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-8537615-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2013187118-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2012320678-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2006050552-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2006092739-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2004170050-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2009009657-A"",""type"":""""}"

2025-01-20 06:16:57 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:57 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:57 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:16:58 - snowflake.connector.cursor - INFO - Number of results in first chunk: 10
2025-01-20 06:16:58 - snowflake.connector.connection - INFO - closed
2025-01-20 06:16:59 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:16:59 - root - INFO - SQL:
SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Results:
top_term
line
fig
selection
bit
memory
word
lines
cell
gate
data

2025-01-20 06:16:59 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:16:59 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:16:59 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:17:00 - snowflake.connector.cursor - INFO - Number of results in first chunk: 161
2025-01-20 06:17:00 - snowflake.connector.connection - INFO - closed
2025-01-20 06:17:01 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:17:01 - root - INFO - SQL:
SELECT DISTINCT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    LIMIT 1000;
Results:
filing_year
1962
1918
1897
2006
1937
1903
1840
1994
1854
2012
2000
1905
1907
1885
1889
1898
1881
1949
1887
1960
1972
1911
1895
1978
1983
1936
1904
1868
1997
1880
1988
1976
1955
1901
2005
1945
1930
1927
1850
1852
1910
1970
1941
1884
1985
1986
1993
1890
2017
1935
1828
1968
1940
1928
1967
1939
1998
2009
1950
1933
1922
2002
1917
1934
1916
1925
1975
1959
1919
1902
1893
1875
1996
1953
0
1938
1947
1964
1906
1900
1848
1859
1977
1857
2003
1956
1944
1867
1866
2013
1992
1951
1923
1865
1942
1908
1861
1871
2014
1963
1952
1920
1856
2011
2004
1989
1946
1915
1957
2001
1932
1894
1882
2015
2016
1987
1981
1979
1980
1999
1876
2010
1924
1926
1864
1965
1982
1851
2008
1969
1929
1909
1995
1912
1879
1948
1863
1991
1921
1914
1878
2007
1974
1961
1913
1931
1899
1943
1971
1896
1858
1860
1958
1990
1984
1874
1966
1877
1973
1954
1883

2025-01-20 06:17:01 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:17:01 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:17:01 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:17:02 - snowflake.connector.cursor - INFO - Number of results in first chunk: 161
2025-01-20 06:17:02 - snowflake.connector.connection - INFO - closed
2025-01-20 06:17:02 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:17:03 - root - INFO - SQL:
SELECT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year",
           COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    GROUP BY "filing_year"
    LIMIT 1000;
Results:
filing_year,patent_count
1948,467
1863,2
2006,13217
1937,463
1903,281
1840,1
1975,4117
1959,955
1902,310
1919,409
1893,28
1875,3
1949,553
1887,1
1991,6583
1921,472
1914,358
1878,3
1889,1
1898,135
1881,2
2005,12846
1945,359
1930,593
1987,5944
1904,336
1868,3
1942,340
1908,403
1861,3
1871,1
1996,6918
1953,733
1938,509
0,24236
2017,2059
1935,446
1828,1
1956,756
2003,11471
1962,959
1918,257
1897,98
2012,18135
2000,9135
1905,359
1907,363
1885,1
1981,4631
1980,4434
1999,8436
1979,4373
1876,2
2010,14913
1924,452
1926,487
1864,2
1952,629
2014,18265
1963,979
1920,473
1856,2
1968,1916
1940,413
1928,589
1967,1726
1939,432
2016,13431
2015,17871
1927,520
1850,1
1852,1
2007,13522
1974,3981
1961,961
1913,391
1931,535
1899,228
1988,6058
1976,4245
1955,756
1901,244
1964,1455
1947,410
1900,216
1906,355
1848,1
1859,3
1946,439
1915,294
1973,3808
1954,774
1883,2
2009,13974
1998,7519
1933,477
1950,719
1922,517
2002,11042
1917,334
1934,456
1916,290
1925,514
1994,5986
1854,2
1986,5784
1985,5517
1993,6221
1890,2
1984,5363
1990,6545
1958,894
1874,1
1969,2201
1929,602
1909,373
1995,6453
1912,384
1879,2
1972,3688
1960,1018
1911,391
1895,64
1983,5193
1978,4163
1910,352
1970,2480
1941,338
1884,1
1982,4698
1965,1556
1851,1
1989,6076
2011,16557
2004,12088
1977,4026
1857,1
1936,450
1944,334
1866,1
1867,3
2013,18485
1992,6316
1951,677
1923,425
1865,1
1997,7271
1880,2
1971,3109
1943,355
1896,85
1860,2
1858,1
2008,13727
1966,1672
1877,1
2001,10687
1957,812
1932,458
1894,57
1882,1

2025-01-20 06:17:03 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:17:03 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:17:03 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:17:05 - snowflake.connector.cursor - INFO - Number of results in first chunk: 74
2025-01-20 06:17:06 - snowflake.connector.connection - INFO - closed
2025-01-20 06:17:06 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:17:06 - root - INFO - SQL:
SELECT t1."publication_number",
           t1."filing_date",
           t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
      ON t1."publication_number" = t2."publication_number"
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date,embedding_v1
US-2002199075-A1,20010621,"[
  1.327330600000000e-01,
  -1.390248800000000e-01,
  -8.851990000000000e-02,
  -9.534649000000001e-02,
  -9.190445999999999e-02,
  -7.793257400000000e-02,
  -2.276682800000000e-03,
  -1.273512700000000e-01,
  1.164167000000000e-01,
  1.824077200000000e-02,
  1.768792300000000e-01,
  2.043863400000000e-01,
  -5.214452700000000e-02,
  -9.571313999999999e-03,
  -2.218892700000000e-01,
  3.377413400000000e-02,
  1.092247100000000e-01,
  1.405695800000000e-01,
  -8.305453000000000e-02,
  1.380776500000000e-01,
  4.118194000000000e-02,
  5.223548400000000e-02,
  6.996955000000001e-02,
  -1.863214200000000e-01,
  -5.879353700000000e-03,
  -1.181809200000000e-01,
  1.821372000000000e-01,
  1.003657000000000e-02,
  2.518988200000000e-02,
  1.700414300000000e-01,
  -1.697541800000000e-01,
  -9.175000000000000e-02,
  5.969878300000000e-02,
  1.772470000000000e-02,
  -1.060385700000000e-01,
  -1.592023500000000e-01,
  9.980810000000000e-02,
  -1.771379400000000e-01,
  1.230216800000000e-02,
  3.092083900000000e-02,
  -1.014561800000000e-01,
  -2.828363500000000e-01,
  1.361863500000000e-01,
  1.721303300000000e-01,
  -4.398971000000000e-02,
  -1.389469950000000e-02,
  1.883381200000000e-01,
  -4.531229700000000e-02,
  -1.430749900000000e-01,
  1.128079000000000e-01,
  -2.814714300000000e-01,
  2.599174500000000e-02,
  2.006464200000000e-01,
  -3.294414300000000e-02,
  -3.229250400000000e-02,
  3.630416000000000e-02,
  -5.539227300000000e-02,
  3.239953500000000e-02,
  -2.809038200000000e-01,
  1.027128200000000e-01,
  2.351760300000000e-04,
  1.692046800000000e-01,
  -5.161380400000000e-02,
  1.296108200000000e-01
]"
US-2003048328-A1,20020909,"[
  -2.702655500000000e-01,
  -1.838806400000000e-01,
  1.285569000000000e-02,
  -1.157763800000000e-01,
  -1.229929850000000e-01,
  -1.701488500000000e-02,
  -1.346644400000000e-02,
  -3.185733800000000e-02,
  1.913188800000000e-01,
  -2.219920000000000e-02,
  8.446085000000000e-02,
  2.329903500000000e-01,
  1.853730500000000e-01,
  -1.128309000000000e-01,
  1.308142400000000e-01,
  -1.681749500000000e-02,
  2.669037800000000e-03,
  -3.269643000000000e-02,
  -2.339415600000000e-01,
  8.544633500000000e-02,
  -3.111701800000000e-02,
  6.132171700000000e-02,
  -6.193825500000000e-03,
  -1.194184100000000e-01,
  3.186201000000000e-02,
  -5.385209600000000e-02,
  -6.190734700000000e-02,
  -1.719800500000000e-01,
  5.044012500000000e-02,
  -1.428283500000000e-01,
  3.900431000000000e-02,
  -1.689109800000000e-01,
  1.080429500000000e-01,
  3.628505400000000e-02,
  -1.093701350000000e-01,
  -4.550829000000000e-02,
  2.120426300000000e-02,
  -3.028842000000000e-01,
  9.250326000000000e-02,
  5.986650300000000e-02,
  8.118051000000000e-02,
  -6.228786000000000e-02,
  -8.558510000000000e-02,
  -9.565390000000000e-02,
  -4.911348000000000e-02,
  -1.153620600000000e-02,
  -1.124967800000000e-01,
  -1.549457200000000e-01,
  2.103537600000000e-01,
  -1.087370300000000e-01,
  -1.879206600000000e-01,
  1.774610300000000e-01,
  -2.214985200000000e-01,
  -3.011048300000000e-03,
  -1.456843900000000e-01,
  1.522214200000000e-02,
  -1.584044000000000e-02,
  -1.045927400000000e-01,
  -1.666246700000000e-01,
  -2.193481700000000e-02,
  2.186357500000000e-01,
  6.251993000000000e-02,
  -1.441963600000000e-01,
  1.570182600000000e-01
]"
US-2003102128-A1,20020401,"[
  6.680477000000000e-02,
  -3.299055400000000e-01,
  7.520198000000000e-02,
  1.826542500000000e-01,
  -6.079824600000000e-03,
  1.689028000000000e-01,
  -1.259003400000000e-01,
  -1.360124600000000e-01,
  1.842365300000000e-01,
  -1.851732000000000e-01,
  2.550390700000000e-01,
  3.494883300000000e-02,
  -4.961433600000000e-02,
  7.020295000000000e-02,
  5.756646800000000e-02,
  3.387458600000000e-04,
  1.771642000000000e-02,
  6.763998000000000e-02,
  -1.291013700000000e-01,
  1.065049400000000e-02,
  5.928725000000000e-02,
  -2.486805400000000e-02,
  4.177788300000000e-02,
  -1.247509200000000e-01,
  3.049314300000000e-01,
  1.938775800000000e-01,
  1.244309500000000e-02,
  4.069222500000000e-02,
  7.518745000000000e-02,
  -1.789746200000000e-02,
  1.996825800000000e-01,
  -1.195497400000000e-02,
  4.062491000000000e-02,
  -2.441228600000000e-01,
  -8.912602000000000e-02,
  -1.156921500000000e-01,
  -5.954484600000000e-02,
  -1.913798300000000e-01,
  3.190865700000000e-02,
  8.777053999999999e-02,
  -4.238689000000000e-02,
  -2.312318500000000e-01,
  1.301439700000000e-01,
  -6.900159000000000e-02,
  -1.503533900000000e-01,
  1.719946500000000e-03,
  -7.323673999999999e-02,
  3.023402000000000e-02,
  -1.739042400000000e-01,
  -1.482971900000000e-02,
  -1.961514000000000e-02,
  1.109461500000000e-02,
  1.687544100000000e-01,
  -1.294664100000000e-01,
  1.619266900000000e-01,
  -5.169846000000000e-02,
  2.922115100000000e-02,
  -1.998932000000000e-02,
  -4.254939800000000e-02,
  8.191690000000000e-02,
  5.848678600000000e-02,
  1.285853800000000e-01,
  -1.73541400000

2025-01-20 06:17:06 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:17:06 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:17:06 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:17:08 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-20 06:17:08 - snowflake.connector.connection - INFO - closed
2025-01-20 06:17:08 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:17:08 - root - INFO - SQL:
SELECT t."publication_number",
           t."ipc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Results:
publication_number,ipc
US-9741766-B2,"[
  {
    ""code"": ""G11C7/10"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/24"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L21/768"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/00"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/00"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"

2025-01-20 06:17:08 - root - INFO - itercount: 0
2025-01-20 06:17:08 - root - INFO - Database Name: PATENTS_GOOGLE
Schema Name: PATENTS_GOOGLE
DDL describes table information.
,0
table_name,CPC_DEFINITION
description,
DDL,"create or replace TABLE CPC_DEFINITION (
	""applicationReferences"" VARIANT,
	""breakdownCode"" BOOLEAN,
	""childGroups"" VARIANT,
	""children"" VARIANT,
	""dateRevised"" FLOAT,
	""definition"" VARIANT,
	""glossary"" VARIANT,
	""informativeReferences"" VARIANT,
	""ipcConcordant"" VARCHAR(16777216),
	""level"" FLOAT,
	""limitingReferences"" VARIANT,
	""notAllocatable"" BOOLEAN,
	""parents"" VARIANT,
	""precedenceLimitingReferences"" VARIANT,
	""residualReferences"" VARIANT,
	""rules"" VARIANT,
	""scopeLimitingReferences"" VARIANT,
	""status"" VARCHAR(16777216),
	""symbol"" VARCHAR(16777216),
	""synonyms"" VARIANT,
	""titleFull"" VARCHAR(16777216),
	""titlePart"" VARIANT
);"

,1
table_name,DISCLOSURES_13
description,
DDL,"create or replace TABLE DISCLOSURES_13 (
	""family_id"" VARCHAR(16777216),
	""record_id"" VARCHAR(16777216),
	""disclosure_event"" VARCHAR(16777216),
	""sso"" VARCHAR(16777216),
	""patent_owner_harmonized"" VARCHAR(16777216),
	""patent_owner_unharmonized"" VARCHAR(16777216),
	""date"" NUMBER(38,0),
	""standard"" VARCHAR(16777216),
	""committee_project"" VARCHAR(16777216),
	""tc_name"" VARCHAR(16777216),
	""sc_name"" VARCHAR(16777216),
	""wg_name"" VARCHAR(16777216),
	""licensing_commitment"" VARCHAR(16777216),
	""copyright"" VARCHAR(16777216),
	""blanket_type"" VARCHAR(16777216),
	""blanket_scope"" VARCHAR(16777216),
	""third_party"" VARCHAR(16777216),
	""reciprocity"" VARCHAR(16777216),
	""serial_cleaned"" VARCHAR(16777216),
	""pub_cleaned"" VARCHAR(16777216)
);"

,2
table_name,PUBLICATIONS
description,
DDL,"create or replace TABLE PUBLICATIONS (
	""publication_number"" VARCHAR(16777216),
	""application_number"" VARCHAR(16777216),
	""country_code"" VARCHAR(16777216),
	""kind_code"" VARCHAR(16777216),
	""application_kind"" VARCHAR(16777216),
	""application_number_formatted"" VARCHAR(16777216),
	""pct_number"" VARCHAR(16777216),
	""family_id"" VARCHAR(16777216),
	""title_localized"" VARIANT,
	""abstract_localized"" VARIANT,
	""claims_localized"" VARIANT,
	""description_localized"" VARIANT,
	""publication_date"" NUMBER(38,0),
	""filing_date"" NUMBER(38,0),
	""grant_date"" NUMBER(38,0),
	""priority_date"" NUMBER(38,0),
	""priority_claim"" VARIANT,
	""inventor"" VARIANT,
	""inventor_harmonized"" VARIANT,
	""assignee"" VARIANT,
	""assignee_harmonized"" VARIANT,
	""examiner"" VARIANT,
	""uspc"" VARIANT,
	""ipc"" VARIANT,
	""cpc"" VARIANT,
	""fi"" VARIANT,
	""fterm"" VARIANT,
	""citation"" VARIANT,
	""entity_status"" VARCHAR(16777216),
	""art_unit"" VARCHAR(16777216)
);"

,3
table_name,ABS_AND_EMB
description,
DDL,"create or replace TABLE ABS_AND_EMB (
	""publication_number"" VARCHAR(16777216),
	""title"" VARCHAR(16777216),
	""title_translated"" BOOLEAN,
	""abstract"" VARCHAR(16777216),
	""abstract_translated"" BOOLEAN,
	""cpc"" VARIANT,
	""cpc_low"" VARIANT,
	""cpc_inventive_low"" VARIANT,
	""top_terms"" VARIANT,
	""similar"" VARIANT,
	""url"" VARCHAR(16777216),
	""country"" VARCHAR(16777216),
	""publication_description"" VARCHAR(16777216),
	""cited_by"" VARIANT,
	""embedding_v1"" VARIANT
);"

External knowledge that might be helpful: 
### IPC Codes: Handling Main IPC Code Selection

When dealing with the `ipc` field in the `patents-public-data.patents.publications` dataset, it is important to understand the structure of this field, especially the subfield `first`. This subfield is a boolean that indicates whether a given IPC code is the main code for the publication number in question. This is crucial because each patent publication can be associated with multiple IPC codes, signifying the various aspects of the technology covered by the patent.

However, not every publication in the dataset has a designated main IPC code. This lack of a clearly identified main IPC code complicates the process of determining the most relevant IPC code for each publication, as selecting a single IPC code from multiple possibilities without clear prioritization can lead to inconsistent or skewed analyses.

This approach ensures a more consistent and representative selection of IPC codes across the dataset, facilitating more accurate and meaningful analysis of patent trends and classifications. By focusing on the most frequently occurring 4-digit IPC code, the view helps overcome the limitations posed by the absence of a designated main IPC code, thereby enhancing the reliability of patent-related studies and insights derived from this data.

Here is an example

```
SELECT 
    t1.publication_number, 
    SUBSTR(ipc_u.code, 0, 4) as ipc4, 
    COUNT(
    SUBSTR(ipc_u.code, 0, 4)
    ) as ipc4_count 
FROM 
    `patents-public-data.patents.publications` t1, 
    UNNEST(ipc) AS ipc_u 
GROUP BY 
    t1.publication_number, 
    ipc4

```



# Text Embeddings (Similarity)

Patent documents are rich with textual data. In fact, most of the information contained in a patent document is text. This includes the `abstract_localized`, `description_localized`, and `claims_localized`. Textual data can be a powerful tool to analyze and compare patent scope and content across patents. However, before being able to use textual data, it needs to be vectorized or transformed into text embeddings that can be used by machine learning models. Therefore, creating text embeddings from the textual data of patents is necessary to compare patent contents. Technically speaking, running an NLP algorithm that creates embeddings for all U.S. patents is computationally difficult.

Nevertheless, Google runs their own machine learning algorithm which transforms patent text metadata into text embeddings which they report in `patents-public-data.google_patents_research.publications` table. The textual embeddings of one patent, without any knowledge on the algorithm being used to create them, are meaningless on their own. However, the embeddings are powerful when it comes to comparing textual content of two or more patents. Embeddings can be used to calculate a similarity score between any two patents. This similarity score is calculated by applying the dot product of the embeddings vector of the patents, as shown below:

The similarity \( \text{Similarty}_{i,k} \) between two patents \( i \) and \( k \) is calculated as the dot product of their embedding vectors:

\[
\text{Similarty}_{i,k} = \mathbf{v}_i \cdot \mathbf{v}_k
\]

where

\[
\mathbf{v}_i = [v_{i1}, v_{i2}, v_{i3}, \ldots, v_{iN}]
\]
and
\[
\mathbf{v}_k = [v_{k1}, v_{k2}, v_{k3}, \ldots, v_{kN}]
\]

are the embedding vectors for patents \( i \) and \( k \) respectively. The higher the dot product, the more similar the patents.





# Originality (Trajtenberg)

One of the most important measures of a patent is "basicness". The aspects of basicness are tough to measure. Nevertheless, some literature finds that important aspects of these measures are embodied in the relationship between the invention and the technological predcessors and successors it is connected to through, for example, patent citations. We can thus use patent citations to construct measures that identify basicness and appropriability. Trajtenberg et al. 1997 provide a number of these measures. They distinguish between:

1. Forward-looking measures: measures that are derived from the relationship between an invention and subsequent technologies that build upon it. These measures are thus constructed from the forward citations. One example of a forward-looking basicness measure they provide is Generality, which is calculated as:

\[
\text{GENERALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITING}_{G_k}}{\text{NCITING}_i} \right)
\]


2. Backward-looking measures: measures that are derived from the relationship between a given patent and the body of knowledge that preceded it. These measure are thus constructed from the backward citations. One example of a backward-looking basicness measure they provide is Orginality, which is calculated as:

\[
\text{ORIGINALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITED}_{i,k}}{\text{NCITED}_i} \right)
\]

With **NCITING** and **NCITED** defined as the number of patents citing the focal patent and the number of patents cited by the focal patent, respectively. Index `i` corresponds to the focal patent considered, and `k` is the index of patent classes. For example, **NCITED_2,3** refers to the number of patents in patent class 3 and cited by our focal patent 2.


The table structure information is ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}
Begin Exploring Related Columns
**Relevant Tables and Columns:**

- **Table:** `PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS`
  - **"publication_number"**: Used to identify patents.
  - **"filing_date"**: Used to determine the filing year and filter patents filed in the same year.
- **Table:** `PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB`
  - **"publication_number"**: Used to identify patents and join with the `PUBLICATIONS` table.
  - **"embedding_v1"**: Contains the embedding vectors (in VARIANT format), used to compute technological similarity.
  - **"similar"**: Contains similar patents, possibly used to find related patents.
  - **"top_terms"**: Contains top terms associated with the patent, which might be useful for understanding technological areas.

**Conditions that may be used:**

- Filtering patents to those filed in the same year as `US-9741766-B2` based on `"filing_date"`.
- Joining `ABS_AND_EMB` and `PUBLICATIONS` tables on `"publication_number"` to access both embeddings and filing dates.
- Selecting patents where `"embedding_v1"` is not null to ensure embeddings are available for similarity comparison.

**SQL Queries:**

1. **Get the filing date of `US-9741766-B2` from the `PUBLICATIONS` table:**
   ```sql
   SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

2. **Get the filing date and filing year of `US-9741766-B2`:**
   ```sql
   SELECT "filing_date",
          SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

3. **Get publication numbers and filing dates of patents filed in the same year as `US-9741766-B2`:**
   ```sql
   SELECT "publication_number",
          "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
   ```

4. **Get embedding vectors of patents filed in 2015:**
   ```sql
   SELECT t1."publication_number",
          t1."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
     ON t1."publication_number" = t2."publication_number"
   WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
   ```

5. **Get the embedding vector of `US-9741766-B2` from the `ABS_AND_EMB` table:**
   ```sql
   SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

6. **Preview the structure of `"embedding_v1"` for `US-9741766-B2`:**
   ```sql
   SELECT f.value AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

7. **Get all publication numbers and their embeddings from the `ABS_AND_EMB` table:**
   ```sql
   SELECT "publication_number",
          "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   LIMIT 1000;
   ```

8. **Get the number of patents with non-null embeddings:**
   ```sql
   SELECT COUNT(*)
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
   ```

9. **Get the similar patents listed for `US-9741766-B2`:**
   ```sql
   SELECT "similar"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

10. **Flatten the `"similar"` field to get similar publication numbers for `US-9741766-B2`:**
    ```sql
    SELECT f.value::STRING AS "similar_publication_number"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."similar") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

11. **Get the top terms associated with `US-9741766-B2` from `"top_terms"` column:**
    ```sql
    SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

12. **List distinct filing years from the `PUBLICATIONS` table:**
    ```sql
    SELECT DISTINCT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    LIMIT 1000;
    ```

13. **Get the count of patents filed per year:**
    ```sql
    SELECT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year",
           COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    GROUP BY "filing_year"
    LIMIT 1000;
    ```

14. **Join `PUBLICATIONS` and `ABS_AND_EMB` to get patents with embeddings and their filing dates:**
    ```sql
    SELECT t1."publication_number",
           t1."filing_date",
           t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
      ON t1."publication_number" = t2."publication_number"
    LIMIT 1000;
    ```

15. **Get IPC codes for `US-9741766-B2` from the `PUBLICATIONS` table:**
    ```sql
    SELECT t."publication_number",
           t."ipc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

**Note:** These queries are designed to explore the data relevant to the task and to understand the structure and content of the columns involved. They help in determining how to extract and manipulate the necessary information to identify the top five technologically similar patents filed in the same year as `US-9741766-B2`.Query:
SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
filing_date
20160511
Query:
SELECT "filing_date",
          SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
filing_date,filing_year
20160511,2016
Query:
SELECT "publication_number",
          "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date
CN-104697263-B,20150310
US-9589875-B2,20150909
CN-104569091-A,20150105
CN-104789703-A,20150520
KR-20170002431-U,20151228
EP-3096404-A1,20150521
US-2016347879-A1,20150206
US-2017156202-A1,20151130
US-9645875-B2,20150316
WO-2016086236-A3,20151215
CN-105507308-A,20151231
GB-2539926-A,20150701
CN-104852710-A,20150609
JP-2016032699-A,20151117
CN-104757913-A,20150504
CN-104800294-A,20150428
CN-104944251-A,20150525
US-D761972-S,20150427
KR-101618208-B1,20150901
DE-202015104272-U1,20150813
US-9596361-B2,20151114
WO-2016042057-A1,20150917
CN-205409471-U,20151210
CN-204807148-U,20150514
CN-205087764-U,20150910
US-2016038865-A1,20150520
WO-2016009206-A1,20150715
JP-2016026765-A,20151027
WO-2016040331-A1,20150908
CN-104880406-A,20150603
US-2015310996-A1,20150312
CN-104882531-A,20150608
RU-2600124-C1,20150327
KR-101691427-B1,20150417
CN-104806079-A,20150408
CN-105235104-A,20151026
CN-104876970-A,20150520
CN-104591000-A,20150211
CN-104794677-A,20150505
CN-104828208-A,20150508
EP-2916262-A1,20150114
US-9478132-B1,20151229
CN-104977690-A,20150624
US-2015358175-A1,20150605
RU-2584221-C1,20150625
KR-101716963-B1,20150917
CN-105326409-A,20151118
CN-104557586-A,20150125
CN-104959868-A,20150721
WO-2016041530-A1,20150915
CN-105169796-A,20150914
CN-105044834-A,20150915
CN-105251370-A,20151124
US-2016318160-A1,20150428
CN-105134683-A,20150821
CN-104886923-A,20150618
CN-104604974-A,20150220
CN-105054847-A,20150811
DE-102015117614-A1,20151016
CN-105463535-A,20151223
CN-105107320-A,20150825
CN-104828943-A,20150331
CN-104630155-A,20150129
US-9602787-B2,20150216
CN-105078172-A,20150813
CN-104936370-B,20150616
CN-104713025-A,20150308
CN-104774339-A,20150402
CN-104735756-A,20150312
CN-105349838-A,20151218
CN-105113508-A,20150911
CN-105252582-A,20151112
CN-104632020-B,20150127
CN-105083542-A,20150720
CN-105268300-A,20151111
JP-2016174830-A,20150320
CN-205037871-U,20151020
CN-205234346-U,20151215
JP-2017518961-A,20150410
CN-104801425-B,20150511
CN-104720819-A,20150324
CN-206036159-U,20150202
FI-11117-U1,20150522
CN-204482437-U,20150205
JP-2016153562-A,20150220
CN-204851352-U,20150615
CN-106162267-A,20150427
CN-105713728-A,20150923
CN-106820746-A,20151206
KR-20160084884-A,20150106
EP-3058860-B1,20151120
CN-105373822-A,20151117
CN-105213936-A,20151027
CN-204695342-U,20150227
CN-205013864-U,20150812
CN-205333578-U,20151231
CN-204687212-U,20150528
EP-2939787-A2,20150423
US-9420758-B2,20150518
CN-106878141-A,20151211
CN-104844175-A,20150504
CN-205323931-U,20151113
US-2016374883-A1,20151027
US-9680557-B2,20151214
US-9620764-B2,20150227
DE-102015002573-A1,20150302
US-2015370926-A1,20150619
JP-2015188095-A,20150520
CN-105012459-A,20150630
CN-205377016-U,20151221
CN-104722206-A,20150319
CN-105146854-B,20151030
US-2016380694-A1,20150929
WO-2015173510-A1,20150512
CN-104873509-A,20150527
US-D772301-S,20150604
CN-104792066-A,20150424
CN-104649261-A,20150211
CN-105622540-A,20151224
CN-105380666-B,20151106
CN-105178274-A,20150821
US-2015233226-A1,20150217
CN-104581833-A,20150112
CN-105328519-A,20151029
CN-104954512-A,20150402
DE-102015218187-A1,20150922
CN-105329631-A,20151102
CN-106611627-A,20151023
CN-104703346-A,20150213
CN-104748698-B,20150410
US-2016138809-A1,20151119
WO-2015177990-A1,20150514
KR-101622919-B1,20150325
WO-2016082975-A1,20150925
US-9714722-B2,20150306
CN-204694213-U,20150424
CN-204682370-U,20150519
US-2017144221-A1,20150612
WO-2015136239-A1,20150224
CN-105301020-B,20151111
CN-104744295-A,20150323
US-2016266823-A1,20150618
CN-104992496-A,20150708
RU-2609590-C1,20151207
CN-105174110-A,20150825
JP-WO2016031718-A1,20150821
WO-2015139006-A1,20150313
US-9755000-B2,20150828
CN-106607021-A,20151022
CN-204915452-U,20150807
CN-205230283-U,20151126
WO-2015149655-A1,20150327
US-9421780-B2,20150918
CN-104916075-A,20150629
CN-105463514-A,20150612
CN-106030611-A,20151209
US-9465333-B2,20150120
US-2017075824-A1,20150914
CN-105101164-A,20150723
CN-104716543-B,20150403
KR-101697001-B1,20150430
CN-104741136-A,20150126
FR-3037515-A1,20150616
CN-104857867-B,20150507
WO-2016199206-A1,20150608
EP-2921308-A1,20150318
WO-2015129484-A1,20150213
CN-105490916-A,20151118
US-2015165314-A1,20150224
CN-104629229-A,20150204
US-2015339633-A1,20150526
WO-2016014338-A1,20150716
CN-105048551-A,20150723
US-9534867-B2,20150306
WO-2016001901-A1,20150703
US-9238898-B1,20150903
JP-2015195708-A,20150311
EP-2930313-A1,20150401
CN-105045326-A,20150626
WO-2016145853-A1,20151026
US-2015354689-A1,20150609
WO-2015172017-A1,20150508
CN-105649702-A,20151014
CN-204601816-U,20150130
US-2016018841-A1,20150501
WO-2015171970-A1,20150508
RU-2591293-C1,20150525
CN-105328385-A,20151124
CN-105084827-A,20150828
EP-2982609-A1,20150807
JP-2016146975-A,20150212
CN-105134885-A,20150617
DE-102015008505-A1,20150703
KR-101753069-B1,20150717
US-2015268861-A1,20150602
CN-105014671-A,20150814
KR-101718704-B1,20150430
CN-105112726-A,20150827
US-D771253-S,20150623
US-2017109175-A1,20151015
CN-105096684-A,20150812
US-9295873-B1,20150513
CN-104678339-A,20150211
WO-2016080359-A1
Query:
SELECT t1."publication_number",
          t1."embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
   JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
     ON t1."publication_number" = t2."publication_number"
   WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2015'
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_v1
CN-204801515-U,"[
  -1.617039900000000e-01,
  -2.041453000000000e-01,
  1.583752200000000e-01,
  -1.813701800000000e-01,
  -6.593063500000000e-02,
  1.757997500000000e-02,
  1.232799440000000e-01,
  7.822417000000000e-02,
  2.498712100000000e-01,
  -2.559798800000000e-02,
  1.328594400000000e-01,
  1.063814200000000e-01,
  -7.021489000000000e-03,
  -1.691715900000000e-01,
  -1.084881200000000e-01,
  3.786757000000000e-04,
  2.165014300000000e-01,
  -3.672244000000000e-02,
  -2.002787600000000e-01,
  1.521670700000000e-01,
  -6.065763500000000e-02,
  5.232767000000000e-02,
  -1.297323000000000e-01,
  -3.648065400000000e-02,
  1.552067700000000e-01,
  3.195737700000000e-02,
  -4.553948000000000e-02,
  5.762908200000000e-02,
  -2.882783900000000e-02,
  -1.767890300000000e-03,
  6.948511000000000e-02,
  1.571424200000000e-01,
  -7.776790000000000e-02,
  -1.813367000000000e-01,
  -7.031747000000001e-02,
  6.311979000000000e-02,
  1.680935000000000e-01,
  -8.165157600000000e-02,
  1.056606550000000e-01,
  1.978455800000000e-01,
  8.829280000000000e-02,
  -1.274468500000000e-01,
  4.547495000000000e-02,
  -1.912349500000000e-02,
  7.481712000000000e-02,
  6.368551000000000e-02,
  7.399625000000000e-02,
  -1.809017800000000e-01,
  -4.277152000000000e-02,
  4.543160300000000e-02,
  -2.318193900000000e-01,
  -1.419309400000000e-01,
  2.058418400000000e-01,
  6.720073999999999e-02,
  -4.815504700000000e-02,
  -4.238241000000000e-02,
  1.615754100000000e-02,
  2.051622100000000e-01,
  1.033735100000000e-01,
  2.362120400000000e-01,
  -2.552090200000000e-02,
  2.313707900000000e-01,
  1.639270200000000e-02,
  1.389872000000000e-01
]"
CN-204424237-U,"[
  -6.760605000000000e-03,
  4.580350000000000e-02,
  -7.610508000000001e-02,
  3.445182500000000e-03,
  -7.899235000000000e-02,
  -9.900325000000000e-02,
  -9.124407000000000e-02,
  -1.558439000000000e-01,
  5.143846000000000e-02,
  -1.806230800000000e-01,
  1.399277200000000e-01,
  3.497353500000000e-01,
  9.668644500000000e-02,
  7.194656000000001e-02,
  -1.120633500000000e-02,
  4.667864700000000e-02,
  1.038404260000000e-01,
  -1.160869450000000e-01,
  1.229063700000000e-02,
  5.218330300000000e-03,
  2.711003400000000e-03,
  9.662933000000000e-02,
  -1.594891300000000e-01,
  1.067801900000000e-01,
  6.181362000000000e-02,
  3.382827700000000e-02,
  3.016782000000000e-01,
  -8.470138000000001e-02,
  3.162067400000000e-02,
  -7.836760600000001e-02,
  7.276077000000000e-02,
  1.479084200000000e-01,
  -1.459811350000000e-02,
  -1.453842000000000e-01,
  1.161919100000000e-02,
  -1.261618100000000e-01,
  -1.900912500000000e-01,
  -2.159788600000000e-01,
  8.299539000000000e-02,
  -2.205223800000000e-02,
  5.312182400000000e-02,
  -3.868236400000000e-02,
  1.924925000000000e-01,
  9.456760000000000e-02,
  8.227339000000000e-02,
  -8.401968999999999e-02,
  -6.152915000000000e-02,
  -2.328505400000000e-01,
  1.245935200000000e-01,
  -2.035363500000000e-01,
  -2.721936000000000e-01,
  -7.051336000000000e-02,
  -6.496831300000000e-03,
  -1.478801000000000e-01,
  -1.333010500000000e-01,
  -1.114071800000000e-01,
  3.392270200000000e-02,
  -1.976939000000000e-02,
  -1.326692700000000e-01,
  4.978147000000000e-02,
  -4.011337000000000e-02,
  1.648772400000000e-01,
  4.059186200000000e-02,
  2.268262500000000e-01
]"
CN-205352621-U,"[
  2.544930200000000e-02,
  -8.386633500000000e-02,
  2.869848700000000e-02,
  9.847804000000000e-02,
  8.931399000000000e-03,
  -2.289047100000000e-01,
  -7.446997599999999e-02,
  -1.878729500000000e-02,
  1.612916300000000e-01,
  -8.985504000000000e-02,
  8.396658999999999e-02,
  1.032370600000000e-01,
  -7.158653399999999e-02,
  -2.639932600000000e-02,
  -1.655598900000000e-01,
  -1.461305500000000e-01,
  4.423608000000000e-02,
  9.187178000000000e-02,
  -6.147813400000000e-02,
  1.737253400000000e-01,
  1.979040200000000e-01,
  -1.014410800000000e-01,
  -4.211207000000000e-02,
  -7.001325000000000e-02,
  -1.197979400000000e-02,
  2.143231500000000e-01,
  2.757088200000000e-01,
  -1.217770900000000e-01,
  2.792325400000000e-02,
  4.225816600000000e-02,
  -4.061862500000000e-02,
  6.785101300000000e-03,
  -2.403135600000000e-02,
  -1.918753200000000e-01,
  2.340157500000000e-01,
  -2.446222000000000e-02,
  1.127505000000000e-01,
  -3.769849000000000e-02,
  1.888829800000000e-01,
  1.144652000000000e-01,
  8.610803000000000e-02,
  -1.171033600000000e-01,
  1.612983800000000e-01,
  -7.436228000000000e-02,
  -6.006806700000000e-02,
  -2.320233000000000e-02,
  7.646737000000001e-02,
  -1.221230850000000e-01,
  -1.311102500000000e-01,
  9.180926000000000e-02,
  -2.202850900000000e-01,
  -1.130097700000000e-01,
  -2.965519700000000e-01,
  3.186265800000000e-02,
  6.406215600000000e-02,
  -1.403984900000000e-02,
  -6.135984000000000e-02,
  -5.080367600000000e-02,
  -1.020818500000000e-01,
  1.679855700000000e-01,
  -7.533657000000001e-02,
  2.475811700000000e-01,
  -8.751605500000000e-02,
  2.057240200000000e-01
]"
CN-205221425
Query:
SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"
Query:
SELECT f.value AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
        LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_value
-9.759014000000001e-02
-7.865134600000000e-02
-1.022462700000000e-01
-9.834030000000001e-02
-2.579060200000000e-01
-8.247189000000001e-02
1.374225900000000e-02
-1.229494800000000e-01
8.081952500000000e-02
2.691578000000000e-02
-1.114439740000000e-01
1.340977100000000e-01
7.433381000000000e-02
5.153231300000000e-03
-1.075460760000000e-01
-1.806273000000000e-02
1.831943100000000e-01
-2.954358000000000e-02
-6.046254600000000e-02
7.859522000000000e-05
2.566466300000000e-01
-2.432912800000000e-02
-1.067616100000000e-01
1.014580600000000e-01
-1.380856800000000e-01
-7.149687400000000e-02
2.085472300000000e-01
-1.329061700000000e-01
4.087418700000000e-02
3.374565800000000e-02
-7.300706999999999e-02
-5.706553500000000e-02
1.701403400000000e-02
-4.457178300000000e-02
-8.327014000000001e-02
-1.801684000000000e-01
5.113800200000000e-02
-3.076108700000000e-01
1.580761500000000e-01
-3.533404300000000e-02
4.311743400000000e-02
-1.017805560000000e-01
2.070724500000000e-01
-8.408691000000000e-02
-3.405414800000000e-01
4.591350600000000e-02
-9.560194599999999e-02
1.438113600000000e-01
9.557541000000000e-02
-3.235852300000000e-02
-1.889847800000000e-02
2.546579800000000e-01
-7.303727400000000e-02
1.090229450000000e-01
-3.175191000000000e-02
5.433388400000000e-02
1.566456700000000e-01
7.496597600000000e-02
-2.029408200000000e-01
5.405708800000000e-02
6.993917400000001e-02
2.129010400000000e-01
6.955723700000000e-03
3.396455000000000e-02
Query:
SELECT "publication_number",
          "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_v1
CA-27-A,"[
  1.542691000000000e-01,
  -1.512821800000000e-01,
  -1.650247300000000e-01,
  6.317439500000000e-03,
  -6.877411000000000e-02,
  7.857726000000000e-02,
  1.997577000000000e-02,
  -1.052709150000000e-01,
  1.906607200000000e-01,
  -3.087626800000000e-02,
  -4.402885000000000e-02,
  -1.932268600000000e-02,
  1.498914700000000e-01,
  -1.014574240000000e-01,
  1.522054700000000e-01,
  2.159083800000000e-02,
  3.287851200000000e-01,
  -3.723864300000000e-02,
  -1.093368460000000e-01,
  -2.695568300000000e-02,
  5.093054000000000e-03,
  -2.561860000000000e-02,
  -8.104277999999999e-02,
  4.378689000000000e-02,
  1.772555000000000e-01,
  1.866227200000000e-01,
  4.738728700000000e-02,
  1.293443900000000e-01,
  -9.107929000000001e-03,
  -5.338581700000000e-03,
  -5.402789600000000e-02,
  9.968319500000000e-02,
  -1.297268900000000e-01,
  -6.103027600000000e-02,
  1.034460960000000e-01,
  -1.370337900000000e-01,
  -1.529048900000000e-02,
  -7.281200600000000e-02,
  -6.650846000000000e-03,
  -5.688674000000000e-02,
  -5.571032000000000e-02,
  -2.353075000000000e-02,
  1.588186900000000e-01,
  1.485413600000000e-01,
  1.301227400000000e-02,
  7.831083000000000e-02,
  -1.220956100000000e-01,
  -3.694782800000000e-02,
  1.388754100000000e-01,
  -1.948010500000000e-01,
  1.644870500000000e-02,
  -1.159949600000000e-01,
  7.601101000000000e-02,
  -1.079300800000000e-01,
  3.773738400000000e-02,
  -3.411133600000000e-01,
  1.087194160000000e-01,
  3.469542000000000e-01,
  -1.208127800000000e-01,
  2.158840900000000e-01,
  -1.885225600000000e-02,
  -4.778167200000000e-02,
  1.922371400000000e-01,
  8.118848500000000e-02
]"
ES-81-Y,"[
  5.887155000000000e-02,
  -1.084279900000000e-01,
  -7.473050000000000e-03,
  -1.078326500000000e-01,
  -1.136954200000000e-01,
  -5.629550000000000e-02,
  -1.293592000000000e-01,
  1.470960500000000e-02,
  1.143989640000000e-01,
  -6.502111000000000e-03,
  1.211329850000000e-01,
  -1.472910300000000e-01,
  1.433625000000000e-01,
  -1.972437000000000e-01,
  -1.466153400000000e-01,
  6.347028000000000e-02,
  1.704387400000000e-01,
  -1.788644500000000e-01,
  -2.144294800000000e-01,
  -5.971858000000000e-02,
  -1.807118600000000e-02,
  9.654319999999999e-03,
  -6.319642000000000e-02,
  -1.158018000000000e-01,
  1.591617600000000e-01,
  -8.069207000000000e-02,
  2.444405900000000e-01,
  2.053556900000000e-01,
  2.203187000000000e-01,
  4.123914000000000e-02,
  -1.226528360000000e-01,
  1.756981200000000e-01,
  1.406480400000000e-01,
  -2.614098500000000e-01,
  -3.579098400000000e-02,
  -3.342285000000000e-02,
  5.340901400000000e-02,
  -2.008394400000000e-01,
  7.221930000000000e-02,
  1.083169000000000e-01,
  -1.035950600000000e-01,
  4.522684600000000e-02,
  2.121584000000000e-01,
  -3.648881000000000e-02,
  -4.667341700000000e-02,
  -8.133340000000000e-02,
  -5.762764000000000e-02,
  1.715386000000000e-01,
  -6.118799400000000e-02,
  -1.188068800000000e-01,
  -4.722248400000000e-02,
  -8.758543000000001e-02,
  -1.545800400000000e-02,
  -1.725661600000000e-02,
  -1.594496200000000e-01,
  -3.453176000000000e-02,
  -7.645045000000000e-02,
  9.057411999999999e-02,
  -3.059179000000000e-01,
  1.417563600000000e-01,
  4.234178700000000e-02,
  6.612614000000000e-02,
  1.629971300000000e-02,
  8.276451000000000e-02
]"
DE-303-C,[]
ES-866-Y,"[
  2.173252600000000e-01,
  -5.955347000000000e-02,
  -8.669304000000000e-02,
  -1.435769700000000e-02,
  -1.091980100000000e-01,
  -5.290851000000000e-02,
  -1.218726560000000e-01,
  -1.733191000000000e-02,
  1.428825100000000e-01,
  4.071840600000000e-02,
  1.569196900000000e-01,
  2.504207000000000e-02,
  1.646801100000000e-01,
  -1.555543000000000e-01,
  -1.366939400000000e-01,
  1.551018000000000e-01,
  2.533057300000000e-01,
  -1.034493300000000e-01,
  -3.249411000000000e-03,
  -1.919896700000000e-02,
  -3.357952500000000e-02,
  7.957726000000000e-02,
  -8.258553000000000e-02,
  -1.893159400000000e-01,
  1.380639200000000e-01,
  -1.185456100000000e-01,
  2.993756800000000e-01,
  1.806876800000000e-01,
  2.209677700000000e-01,
  1.239111650000000e-01,
  -3.356762600000000e-02,
  1.042425860000000e-01,
  1.649517100000000e-01,
  -2.388138300000000e-01,
  1.648602600000000e-02,
  -8.377965499999999e-02,
  1.231861600000000e-01,
  -1.706603200000000e-01,
  1.260255400000000e-01,
  1.798895000000000e-01,
  -1.287039000000000e-01,
  5.932817000000000e-02,
  1.091629300000000e-01,
  -9.887335000000000e-02,
  1.712858300000000e-02,
  -1.140154700000000e-01,
  2.210558600000000e-02,
  9.686722000000000e-02,
  -5.223890000000000e-02,
  -2.214440900000000e-01,
  -1.367440600000000e-02,
  -9.799734500000000e-02,
  6.677625000000000e-02,
  1.251626600000000e-01,
  -2.030494800000000e-01,
  -1.921786200000000e-02,
  -3.204157000000000e-02,
  4.560034300000000e-03,
  -1.331128200000000e-01,
  8.321140000000000e-02,
  -6.589308000000001e-02,
  7.723393000000001e-02,
  2.468057500000000e-02,
  6.641050400000000e-02
]"
FI-150-A,"[
 
Query:
SELECT COUNT(*)
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
Answer:
COUNT(*)
469133
Query:
SELECT "similar"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
similar
"[
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6144584-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7920408-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7408212-B1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2009059644-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2008007993-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6958938-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6356477-B1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2005174841-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2005265107-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-6577530-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2010290294-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-7317641-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2009122598-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2011122676-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2004006579-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2002040992-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2011188284-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2009004725-A"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-8537615-B2"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2013187118-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2012320678-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2006050552-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2006092739-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""US-2004170050-A1"",
    ""type"": """"
  },
  {
    ""application_number"": """",
    ""category"": """",
    ""filing_date"": 0,
    ""npl_text"": """",
    ""publication_number"": ""JP-2009009657-A"",
    ""type"": """"
  }
]"
Query:
SELECT f.value::STRING AS "similar_publication_number"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."similar") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Answer:
similar_publication_number
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6144584-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7920408-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7408212-B1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2009059644-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2008007993-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6958938-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6356477-B1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2005174841-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2005265107-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-6577530-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2010290294-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-7317641-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2009122598-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2011122676-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2004006579-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2002040992-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2011188284-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2009004725-A"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-8537615-B2"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2013187118-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2012320678-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2006050552-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2006092739-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""US-2004170050-A1"",""type"":""""}"
"{""application_number"":"""",""category"":"""",""filing_date"":0,""npl_text"":"""",""publication_number"":""JP-2009009657-A"",""type"":""""}"
Query:
SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
         LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Answer:
top_term
line
fig
selection
bit
memory
word
lines
cell
gate
data
Query:
SELECT DISTINCT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    LIMIT 1000;
Answer:
filing_year
1962
1918
1897
2006
1937
1903
1840
1994
1854
2012
2000
1905
1907
1885
1889
1898
1881
1949
1887
1960
1972
1911
1895
1978
1983
1936
1904
1868
1997
1880
1988
1976
1955
1901
2005
1945
1930
1927
1850
1852
1910
1970
1941
1884
1985
1986
1993
1890
2017
1935
1828
1968
1940
1928
1967
1939
1998
2009
1950
1933
1922
2002
1917
1934
1916
1925
1975
1959
1919
1902
1893
1875
1996
1953
0
1938
1947
1964
1906
1900
1848
1859
1977
1857
2003
1956
1944
1867
1866
2013
1992
1951
1923
1865
1942
1908
1861
1871
2014
1963
1952
1920
1856
2011
2004
1989
1946
1915
1957
2001
1932
1894
1882
2015
2016
1987
1981
1979
1980
1999
1876
2010
1924
1926
1864
1965
1982
1851
2008
1969
1929
1909
1995
1912
1879
1948
1863
1991
1921
1914
1878
2007
1974
1961
1913
1931
1899
1943
1971
1896
1858
1860
1958
1990
1984
1874
1966
1877
1973
1954
1883
Query:
SELECT SUBSTRING(CAST("filing_date" AS VARCHAR), 1, 4) AS "filing_year",
           COUNT(*) AS "patent_count"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    GROUP BY "filing_year"
    LIMIT 1000;
Answer:
filing_year,patent_count
1948,467
1863,2
2006,13217
1937,463
1903,281
1840,1
1975,4117
1959,955
1902,310
1919,409
1893,28
1875,3
1949,553
1887,1
1991,6583
1921,472
1914,358
1878,3
1889,1
1898,135
1881,2
2005,12846
1945,359
1930,593
1987,5944
1904,336
1868,3
1942,340
1908,403
1861,3
1871,1
1996,6918
1953,733
1938,509
0,24236
2017,2059
1935,446
1828,1
1956,756
2003,11471
1962,959
1918,257
1897,98
2012,18135
2000,9135
1905,359
1907,363
1885,1
1981,4631
1980,4434
1999,8436
1979,4373
1876,2
2010,14913
1924,452
1926,487
1864,2
1952,629
2014,18265
1963,979
1920,473
1856,2
1968,1916
1940,413
1928,589
1967,1726
1939,432
2016,13431
2015,17871
1927,520
1850,1
1852,1
2007,13522
1974,3981
1961,961
1913,391
1931,535
1899,228
1988,6058
1976,4245
1955,756
1901,244
1964,1455
1947,410
1900,216
1906,355
1848,1
1859,3
1946,439
1915,294
1973,3808
1954,774
1883,2
2009,13974
1998,7519
1933,477
1950,719
1922,517
2002,11042
1917,334
1934,456
1916,290
1925,514
1994,5986
1854,2
1986,5784
1985,5517
1993,6221
1890,2
1984,5363
1990,6545
1958,894
1874,1
1969,2201
1929,602
1909,373
1995,6453
1912,384
1879,2
1972,3688
1960,1018
1911,391
1895,64
1983,5193
1978,4163
1910,352
1970,2480
1941,338
1884,1
1982,4698
1965,1556
1851,1
1989,6076
2011,16557
2004,12088
1977,4026
1857,1
1936,450
1944,334
1866,1
1867,3
2013,18485
1992,6316
1951,677
1923,425
1865,1
1997,7271
1880,2
1971,3109
1943,355
1896,85
1860,2
1858,1
2008,13727
1966,1672
1877,1
2001,10687
1957,812
1932,458
1894,57
1882,1
Query:
SELECT t1."publication_number",
           t1."filing_date",
           t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
      ON t1."publication_number" = t2."publication_number"
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date,embedding_v1
US-2002199075-A1,20010621,"[
  1.327330600000000e-01,
  -1.390248800000000e-01,
  -8.851990000000000e-02,
  -9.534649000000001e-02,
  -9.190445999999999e-02,
  -7.793257400000000e-02,
  -2.276682800000000e-03,
  -1.273512700000000e-01,
  1.164167000000000e-01,
  1.824077200000000e-02,
  1.768792300000000e-01,
  2.043863400000000e-01,
  -5.214452700000000e-02,
  -9.571313999999999e-03,
  -2.218892700000000e-01,
  3.377413400000000e-02,
  1.092247100000000e-01,
  1.405695800000000e-01,
  -8.305453000000000e-02,
  1.380776500000000e-01,
  4.118194000000000e-02,
  5.223548400000000e-02,
  6.996955000000001e-02,
  -1.863214200000000e-01,
  -5.879353700000000e-03,
  -1.181809200000000e-01,
  1.821372000000000e-01,
  1.003657000000000e-02,
  2.518988200000000e-02,
  1.700414300000000e-01,
  -1.697541800000000e-01,
  -9.175000000000000e-02,
  5.969878300000000e-02,
  1.772470000000000e-02,
  -1.060385700000000e-01,
  -1.592023500000000e-01,
  9.980810000000000e-02,
  -1.771379400000000e-01,
  1.230216800000000e-02,
  3.092083900000000e-02,
  -1.014561800000000e-01,
  -2.828363500000000e-01,
  1.361863500000000e-01,
  1.721303300000000e-01,
  -4.398971000000000e-02,
  -1.389469950000000e-02,
  1.883381200000000e-01,
  -4.531229700000000e-02,
  -1.430749900000000e-01,
  1.128079000000000e-01,
  -2.814714300000000e-01,
  2.599174500000000e-02,
  2.006464200000000e-01,
  -3.294414300000000e-02,
  -3.229250400000000e-02,
  3.630416000000000e-02,
  -5.539227300000000e-02,
  3.239953500000000e-02,
  -2.809038200000000e-01,
  1.027128200000000e-01,
  2.351760300000000e-04,
  1.692046800000000e-01,
  -5.161380400000000e-02,
  1.296108200000000e-01
]"
US-2003048328-A1,20020909,"[
  -2.702655500000000e-01,
  -1.838806400000000e-01,
  1.285569000000000e-02,
  -1.157763800000000e-01,
  -1.229929850000000e-01,
  -1.701488500000000e-02,
  -1.346644400000000e-02,
  -3.185733800000000e-02,
  1.913188800000000e-01,
  -2.219920000000000e-02,
  8.446085000000000e-02,
  2.329903500000000e-01,
  1.853730500000000e-01,
  -1.128309000000000e-01,
  1.308142400000000e-01,
  -1.681749500000000e-02,
  2.669037800000000e-03,
  -3.269643000000000e-02,
  -2.339415600000000e-01,
  8.544633500000000e-02,
  -3.111701800000000e-02,
  6.132171700000000e-02,
  -6.193825500000000e-03,
  -1.194184100000000e-01,
  3.186201000000000e-02,
  -5.385209600000000e-02,
  -6.190734700000000e-02,
  -1.719800500000000e-01,
  5.044012500000000e-02,
  -1.428283500000000e-01,
  3.900431000000000e-02,
  -1.689109800000000e-01,
  1.080429500000000e-01,
  3.628505400000000e-02,
  -1.093701350000000e-01,
  -4.550829000000000e-02,
  2.120426300000000e-02,
  -3.028842000000000e-01,
  9.250326000000000e-02,
  5.986650300000000e-02,
  8.118051000000000e-02,
  -6.228786000000000e-02,
  -8.558510000000000e-02,
  -9.565390000000000e-02,
  -4.911348000000000e-02,
  -1.153620600000000e-02,
  -1.124967800000000e-01,
  -1.549457200000000e-01,
  2.103537600000000e-01,
  -1.087370300000000e-01,
  -1.879206600000000e-01,
  1.774610300000000e-01,
  -2.214985200000000e-01,
  -3.011048300000000e-03,
  -1.456843900000000e-01,
  1.522214200000000e-02,
  -1.584044000000000e-02,
  -1.045927400000000e-01,
  -1.666246700000000e-01,
  -2.193481700000000e-02,
  2.186357500000000e-01,
  6.251993000000000e-02,
  -1.441963600000000e-01,
  1.570182600000000e-01
]"
US-2003102128-A1,20020401,"[
  6.680477000000000e-02,
  -3.299055400000000e-01,
  7.520198000000000e-02,
  1.826542500000000e-01,
  -6.079824600000000e-03,
  1.689028000000000e-01,
  -1.259003400000000e-01,
  -1.360124600000000e-01,
  1.842365300000000e-01,
  -1.851732000000000e-01,
  2.550390700000000e-01,
  3.494883300000000e-02,
  -4.961433600000000e-02,
  7.020295000000000e-02,
  5.756646800000000e-02,
  3.387458600000000e-04,
  1.771642000000000e-02,
  6.763998000000000e-02,
  -1.291013700000000e-01,
  1.065049400000000e-02,
  5.928725000000000e-02,
  -2.486805400000000e-02,
  4.177788300000000e-02,
  -1.247509200000000e-01,
  3.049314300000000e-01,
  1.938775800000000e-01,
  1.244309500000000e-02,
  4.069222500000000e-02,
  7.518745000000000e-02,
  -1.789746200000000e-02,
  1.996825800000000e-01,
  -1.195497400000000e-02,
  4.062491000000000e-02,
  -2.441228600000000e-01,
  -8.912602000000000e-02,
  -1.156921500000000e-01,
  -5.954484600000000e-02,
  -1.913798300000000e-01,
  3.190865700000000e-02,
  8.777053999999999e-02,
  -4.238689000000000e-02,
  -2.312318500000000e-01,
  1.301439700000000e-01,
  -6.900159000000000e-02,
  -1.503533900000000e-01,
  1.719946500000000e-03,
  -7.323673999999999e-02,
  3.023402000000000e-02,
  -1.739042400000000e-01,
  -1.482971900000000e-02,
  -1.961514000000000e-02,
  1.109461500000000e-02,
  1.687544100000000e-01,
  -1.294664100000000e-01,
  1.619266900000000e-01,
  -5.169846000000000e-02,
  2.922115100000000e-02,
  -1.998932000000000e-02,
  -4.254939800000000e-02,
  8.191690000000000e-02,
  5.848678600000000e-02,
  1.285853800000000e-01,
  -1.73541400000
Query:
SELECT t."publication_number",
           t."ipc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Answer:
publication_number,ipc
US-9741766-B2,"[
  {
    ""code"": ""G11C7/10"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/24"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L21/768"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/00"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/00"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
End Exploring Related Columns
Task: Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers.

Please answer only one complete SQL in snowflake dialect in ```sql``` format.
Usage example: ```sql
SELECT "COLUMN_NAME" FROM DATABASE.SCHEMA.TABLE WHERE ... ``` (Adjust "DATABASE", "SCHEMA", and "TABLE" to match actual names, ensure all column names are enclosed in double quotations)
Follow the answer format like: ```csv
publication_number
publication_number1:str
publication_number2:str
publication_number3:str
publication_number4:str
publication_number5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` by calculating the similarity scores based on their technological embeddings. The publication numbers listed are the most similar patents according to the computed similarity measures..
Here are some useful tips for answering:
When performing a UNION operation on many tables, ensure that all table names are explicitly listed. Union first and then add condition and selection. e.g. SELECT "col1", "col2" FROM (TABLE1 UNION ALL TABLE2) WHERE ...; Don't write sqls as (SELECT col1, col2 FROM TABLE1 WHERE ...) UNION ALL (SELECT col1, col2 FROM TABLE2 WHERE ...); Don't use ['-- Include all', '-- Omit', '-- Continue', '-- Union all', '-- ...', '-- List all', '-- Replace this', '-- Each table', '-- Add other'] to omit any table. Table names here: ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}

For string-matching scenarios, if the string is decided, don't use fuzzy query, and avoid using REGEXP. e.g. Get the object's title contains the word "book"
However, if the string is not decided, you may use fuzzy query and ignore upper or lower case. e.g. Get articles that mention "education".
When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.
When using ORDER BY, if there are duplicate values in the primary sort column, sort by an additional column as a secondary criterion.Keep all decimals to four decimal places.

2025-01-20 06:17:55 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-20 06:17:55 - root - INFO - ```sql
WITH target_embedding AS (
    SELECT parse_json("embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE "publication_number" = 'US-9741766-B2'
),
other_patents AS (
    SELECT t1."publication_number", parse_json(t1."embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
      ON t1."publication_number" = t2."publication_number"
    WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2016'
      AND t1."embedding_v1" IS NOT NULL
      AND t1."publication_number" <> 'US-9741766-B2'
)
SELECT op."publication_number"
FROM target_embedding te
CROSS JOIN other_patents op,
     LATERAL FLATTEN(input => te.emb) f1,
     LATERAL FLATTEN(input => op.emb) f2
WHERE f1."index" = f2."index"
GROUP BY op."publication_number"
ORDER BY SUM(f1.value::FLOAT * f2.value::FLOAT) DESC NULLS LAST
LIMIT 5;
```
2025-01-20 06:17:55 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:17:55 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:17:55 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:17:56 - snowflake.connector.connection - INFO - closed
2025-01-20 06:17:57 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:17:57 - root - INFO - itercount: 1
2025-01-20 06:17:57 - root - INFO - 000904 (42000): 01b9d4f9-0004-7b17-0001-11c300f07526: SQL compilation error: error line 20 at position 6
invalid identifier 'F1."index"'
2025-01-20 06:17:57 - root - INFO - Input sql:
WITH target_embedding AS (
    SELECT parse_json("embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE "publication_number" = 'US-9741766-B2'
),
other_patents AS (
    SELECT t1."publication_number", parse_json(t1."embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
      ON t1."publication_number" = t2."publication_number"
    WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2016'
      AND t1."embedding_v1" IS NOT NULL
      AND t1."publication_number" <> 'US-9741766-B2'
)
SELECT op."publication_number"
FROM target_embedding te
CROSS JOIN other_patents op,
     LATERAL FLATTEN(input => te.emb) f1,
     LATERAL FLATTEN(input => op.emb) f2
WHERE f1."index" = f2."index"
GROUP BY op."publication_number"
ORDER BY SUM(f1.value::FLOAT * f2.value::FLOAT) DESC NULLS LAST
LIMIT 5;
The error information is:
000904 (42000): 01b9d4f9-0004-7b17-0001-11c300f07526: SQL compilation error: error line 20 at position 6
invalid identifier 'F1."index"'
Please correct it and output only 1 complete SQL query.
2025-01-20 06:18:49 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-20 06:18:49 - root - INFO - ```sql
WITH target_embedding AS (
    SELECT parse_json("embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE "publication_number" = 'US-9741766-B2'
),
other_patents AS (
    SELECT t1."publication_number", parse_json(t1."embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
      ON t1."publication_number" = t2."publication_number"
    WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2016'
      AND t1."embedding_v1" IS NOT NULL
      AND t1."publication_number" <> 'US-9741766-B2'
)
SELECT op."publication_number"
FROM target_embedding te
CROSS JOIN other_patents op,
     LATERAL FLATTEN(input => te.emb) f1,
     LATERAL FLATTEN(input => op.emb) f2
WHERE f1.seq = f2.seq
GROUP BY op."publication_number"
ORDER BY SUM(f1.value::FLOAT * f2.value::FLOAT) DESC NULLS LAST
LIMIT 5;
```
2025-01-20 06:18:49 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:18:49 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:18:49 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:18:58 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-20 06:18:58 - snowflake.connector.connection - INFO - closed
2025-01-20 06:18:59 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:18:59 - root - INFO - itercount: 2
2025-01-20 06:18:59 - root - INFO - 0
2025-01-20 06:18:59 - root - INFO - results: 
publication_number
US-2016196998-A1
CA-166855-S
US-D793323-S
US-D796401-S
CA-166289-S


2025-01-20 06:18:59 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: ```csv
publication_number
publication_number1:str
publication_number2:str
publication_number3:str
publication_number4:str
publication_number5:str
```

We identified the top five patents filed in the same year as `US-9741766-B2` by calculating the similarity scores based on their technological embeddings. The publication numbers listed are the most similar patents according to the computed similarity measures. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
US-2016196998-A1
CA-166855-S
US-D793323-S
US-D796401-S
CA-166289-S
Current sql:
WITH target_embedding AS (
    SELECT parse_json("embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE "publication_number" = 'US-9741766-B2'
),
other_patents AS (
    SELECT t1."publication_number", parse_json(t1."embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
      ON t1."publication_number" = t2."publication_number"
    WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2016'
      AND t1."embedding_v1" IS NOT NULL
      AND t1."publication_number" <> 'US-9741766-B2'
)
SELECT op."publication_number"
FROM target_embedding te
CROSS JOIN other_patents op,
     LATERAL FLATTEN(input => te.emb) f1,
     LATERAL FLATTEN(input => op.emb) f2
WHERE f1.seq = f2.seq
GROUP BY op."publication_number"
ORDER BY SUM(f1.value::FLOAT * f2.value::FLOAT) DESC NULLS LAST
LIMIT 5;
2025-01-20 06:19:29 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-20 06:19:29 - root - INFO - ```sql
WITH target_embedding AS (
    SELECT parse_json("embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE "publication_number" = 'US-9741766-B2'
),
other_patents AS (
    SELECT t1."publication_number", parse_json(t1."embedding_v1") AS emb
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t2
      ON t1."publication_number" = t2."publication_number"
    WHERE SUBSTRING(CAST(t2."filing_date" AS VARCHAR), 1, 4) = '2016'
      AND t1."embedding_v1" IS NOT NULL
      AND t1."publication_number" <> 'US-9741766-B2'
)
SELECT op."publication_number"
FROM target_embedding te
CROSS JOIN other_patents op,
     LATERAL FLATTEN(input => te.emb) f1,
     LATERAL FLATTEN(input => op.emb) f2
WHERE f1.seq = f2.seq
GROUP BY op."publication_number"
ORDER BY SUM(f1.value::FLOAT * f2.value::FLOAT) DESC NULLS LAST
LIMIT 5;
```
2025-01-20 06:19:29 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-20 06:19:29 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-20 06:19:29 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-20 06:19:30 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-20 06:19:30 - snowflake.connector.connection - INFO - closed
2025-01-20 06:19:30 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-20 06:19:30 - root - INFO - itercount: 3
2025-01-20 06:19:30 - root - INFO - 0
2025-01-20 06:19:30 - root - INFO - Total iteration counts: 3
