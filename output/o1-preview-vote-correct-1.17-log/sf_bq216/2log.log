2025-01-16 17:15:15 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:16:06 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:16:06 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:06 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:06 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:07 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:16:07 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:08 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:08 - root - INFO - SQL:
SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
filing_date
20160511

2025-01-16 17:16:08 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:08 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:08 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:09 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:16:09 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:09 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:10 - root - INFO - SQL:
SELECT "publication_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
publication_date
20170822

2025-01-16 17:16:10 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:10 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:10 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:11 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-16 17:16:11 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:11 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:12 - root - INFO - SQL:
SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date
JP-1810118-C,0
JP-1203714-C,0
FR-1500580-A,19661104
ES-8501233-A1,19831124
CA-2165155-A1,19940603
FR-2409943-B1,19771125
GB-1086860-A,19660422
JP-S54117658-A,19780306
JP-H0710178-Y2,19880302
JP-3172057-B2,19950405
US-136580-A,0
US-272220-A,0
US-599187-A,0
CN-1062411-C,19940709
DE-1479218-U,0
EP-2512367-B1,20101209
ES-2312527-T3,20021205
FR-1000748-A,19491117
FR-1573809-A,19640424
JP-S5066757-U,19731018
JP-S5845249-Y2,19751212
US-2103405-A,19310429
GB-201114438-D0,20110822
JP-5707248-B2,20110622
JP-2016211567-A,20160502
KR-20040075216-A,20030220
CN-1954806-A,20051027
CN-201399214-Y,20090409
JP-1368881-C,0
JP-1444589-C,0
FR-1497898-A,19661027
DE-2707796-A1,19770223
DE-2962208-D1,19790928
FR-2233137-A1,19740617
GB-2224027-B,19891011
JP-S5911756-Y2,19790131
JP-2000218515-A,19990204
JP-S56169301-A,19800602
US-2002102047-A1,20020226
CN-1467804-A,20020712
EP-0988417-B1,19980603
JP-H04334685-A,19910509
JP-S6359143-U,19861007
JP-H0685910-B2,19851219
JP-H0350567-B2,19840507
JP-5108773-B2,20060829
CN-2768052-Y,20041102
CN-1940157-B,20060925
CN-202318915-U,20111123
CN-203200362-U,20130419
JP-897785-C,0
JP-1789132-C,0
JP-S62113530-U,19860109
CA-118661-S,20061213
FI-882364-A0,19880519
CA-810158-A,0
DE-2335240-A1,19730711
DE-7610943-U1,19760408
JP-H0673947-U,19930324
JP-S54153049-A,19780523
JP-S5716116-U,19800624
US-548167-A,0
CN-1055840-A,19910408
JP-S6020713-A,19830713
JP-S6234024-A,19850806
JP-H0995081-A,19951002
JP-H1088758-A,19960917
GB-189709494-A,18970414
JP-2001195445-A,20001128
JP-2010101160-A,20091021
CN-101746294-A,20090903
CN-104170353-A,20131227
CN-206056613-U,20160726
JP-1032657-C,0
JP-1654837-C,0
DK-146223-C,19720608
CA-564325-A,0
GB-0802422-D0,20080208
JP-S53139175-U,19770408
JP-H01150349-U,19880407
JP-2600796-Y2,19921015
JP-S591896-U,19820628
JP-S4922438-B1,19691202
US-419959-A,0
DE-69331528-D1,19931110
DE-69430885-T2,19940405
EP-1474362-B1,20030211
JP-2000346423-A,19990531
JP-2765752-B2,19900926
KR-900003183-Y1,19870430
JP-2003229053-A,20020131
JP-2007241524-A,20060307
JP-5129599-B2,20080208
KR-100547071-B1,20030228
KR-20070020426-A,20050210
KR-20130050682-A,20111108
CN-204556165-U,20150506
ES-66185-Y,19580519
CA-1331409-C,19891023
FI-891492-A0,19890329
GB-1348507-A,19710419
JP-S60179587-U,19840510
US-332138-A,0
CN-1112492-C,20000616
DE-566539-C,19280927
DE-845109-C,19500618
JP-S63125649-A,19870430
JP-S6423693-U,19870801
JP-S5243021-U,19750922
JP-S5566205-U,19781031
JP-H0825023-B2,19880630
JP-2003215980-A,20020425
JP-4255884-B2,20040608
KR-100295305-B1,19990212
CN-101547005-A,20080328
CN-101988676-A,20090806
CN-203259375-U,20130516
CN-205932945-U,20160822
DE-202006018912-U1,20061214
FR-2828332-A1,20000623
GB-1375879-A,19730427
JP-S53161674-U,19770523
US-2053075-A,19351119
CN-2484753-Y,20010531
CN-1212523-A,19980910
FI-20010786-A,20010417
JP-S6359144-U,19861004
JP-2799203-B2,19891128
JP-H08143121-A,19941117
US-1837725-A,19290917
US-2304134-A,19410527
US-1864623-A,19310103
JP-5991128-B2,20120929
JP-2016105749-A,20130405
RU-2191214-C2,20010109
RU-2008140707-A,20081015
CN-103265598-B,20130603
CN-203928708-U,20140627
CN-204557664-U,20150410
CN-206326242-U,20160701
CN-104559893-B,20150127
CN-106856628-A,20151209
US-6778773-B2,20020927
JP-H00985753-A,0
JP-1512007-C,0
NL-28211-C,0
CA-2184504-C,19960829
FR-877274-A,19411126
JP-S60218905-A,19850228
JP-H04326774-A,19910426
JP-S5125160-A,19740827
FR-1012104-A,19490609
JP-S5944363-A,19830802
JP-H081564-A,19940615
US-1233474-A,19160803
US-2002011230-A1,20010522
JP-2003169856-A,20011206
US-811638-A,19040305
KR-200338652-Y1,20031028
KR-20070041890-A,20051017
CN-1816294-A,20040705
CN-2858160-Y,20060210
CN-201276086-Y,20080820
CN-201816145-U,20100720
CN-102907994-A,20121109
JP-1573454-C,0
JP-1721868-C,0
JP-2100371-C,0
DK-358583-D0,19830805
ES-146285-Y,19690306
GB-478690-A,19370224
DE-2649618-B2,19761029
DE-3766112-D1,19871124
DE-8007402-U1,19800315
FR-390089-A,19080509
FR-638126-A,19270722
FR-2638622-B1,19881104
JP-H0584037-U,19920421
JP-S4739450-Y1,19670612
JP-H0642846-U,19921120
NL-296405-A,0
NL-7211943-A,19720901
EP-2781788-B1,20140319
JP-S5072414-U,19731109
JP-S5846920-U,19810925
JP-S5874811-U,19811118
JP-S5687776-U,19791211
US-D279853-S,19831227
KR-920008597-Y1,19880908
JP-2004313014-A,20030411
JP-6137070-B2,20140625
RU-2008132286-A,20080804
US-754320-A,19030502
CN-105823611-A,20160326
CN-106739164-A,20161228
CN-205558012-U,20160203
BE-512467-A,0
CA-2244766-A1,19980811
DE-1803332-A1,19681016
DE-2149141-A1,19711001
GB-2089320-A,19811207
JP-S62164685-U,19860407
JP-H066780-Y2,19890523
DE-69322442-T2,19930622
EP-1933436-B1,20071004
EP-0782478-B1,19950906
EP-0993180-B1,19991007
JP-S5128923-U,19740826
JP-S5153284-U,19741022
JP-S5376919-A,19761220
JP-3340813-B2,19930831
JP-2000192758-A,19981225
JP-H11193667-A,19971229
RU-17326-U1,20001209
KR-20110049427-A,20091105
CN-101531763-A,20090402
CN-201900010-U,20101217
CN-202142477-U,20110623
CN-202417422-U,20120104
CN-202807027-U,20120824
CA-27189-A,0
JP-S4874140-A,19711229
JP-2887866-B2,19980107
FR-

2025-01-16 17:16:12 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:12 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:12 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:13 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:16:13 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:13 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:13 - root - INFO - SQL:
SELECT "filing_date", FLOOR("filing_date" / 10000) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
filing_date,filing_year
20160511,2016

2025-01-16 17:16:13 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:13 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:13 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:15 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-16 17:16:15 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:15 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:15 - root - INFO - SQL:
SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number,filing_date
US-2014240005-A1,20130228
US-2014351651-A1,20130525
US-2014103818-A1,20130309
US-D704796-S,20130621
US-2013288391-A1,20130103
WO-2014178485-A1,20130823
CN-103354102-B,20130702
JP-2015121932-A,20131224
US-9313730-B2,20130215
CN-104470412-A,20130513
FR-3011553-A1,20131007
CN-103616203-A,20131209
US-2013310800-A1,20130722
CN-103042910-A,20130115
US-2015175040-A1,20131219
US-9303426-B2,20130301
CN-103547110-A,20131025
CN-104507960-A,20130530
CN-103409720-A,20130823
US-9164170-B2,20130114
CN-103605607-B,20131202
CN-103206736-B,20130318
WO-2013159946-A1,20130220
CN-203487136-U,20130813
CN-203502326-U,20131021
US-2015000790-A1,20130315
KR-101773267-B1,20130925
CN-104969057-A,20131202
US-8741361-B2,20130913
US-2014231961-A1,20130221
EP-2847134-A1,20130509
CN-103428908-B,20130812
CN-103217775-A,20130402
US-D737366-S,20130312
CN-103505416-A,20130924
CN-103591222-B,20131126
JP-2015035568-A,20130809
CN-103391114-B,20130729
CN-103687275-A,20130925
CN-103540698-A,20131102
US-2015212161-A1,20130920
CN-104520501-A,20130627
CN-103603525-B,20131030
CN-103629728-B,20131209
JP-2014051503-A,20131002
CN-104569952-B,20131024
US-2014035781-A1,20130130
KR-101486666-B1,20131101
JP-2014201698-A,20130408
CN-103423048-A,20130711
CN-103467811-A,20130816
KR-101374838-B1,20130325
CN-103864511-A,20131223
CN-103271698-A,20130523
CN-103706374-B,20131230
EP-2979323-A1,20130324
CN-104550135-A,20131015
CN-103415002-A,20130826
CN-103277435-A,20130619
US-2013318442-A1,20130517
US-2013268456-A1,20130401
CN-203527053-U,20131031
DE-102013111830-A1,20131028
US-2015325842-A1,20130522
JP-2015022523-A,20130719
US-2014130657-A1,20131104
KR-101623834-B1,20130809
CN-104726490-A,20131219
CN-103590480-A,20131023
CN-104144368-A,20130508
CN-103930364-A,20130130
KR-101467243-B1,20130326
EP-2719434-A1,20130319
CN-103424131-B,20130826
GB-2513643-A,20130502
CN-103677448-B,20131231
CN-103250592-A,20130531
CN-103511780-A,20130917
US-8627869-B1,20130125
CN-104145118-A,20130409
EP-2926131-A1,20131029
CN-103658112-A,20131220
CN-104346380-A,20130731
CN-103391409-A,20130725
CN-103584401-A,20131122
US-9293519-B2,20130621
EP-2645369-A3,20130314
DE-102013003505-A1,20130304
CN-104375173-B,20130815
RU-2504289-C1,20130225
US-9624723-B2,20131024
JP-5936769-B2,20130408
WO-2014112205-A1,20131122
US-9703618-B1,20130628
US-2014327579-A1,20130503
US-9077131-B2,20130606
US-2014207983-A1,20130122
CN-104251265-A,20130628
US-9108579-B2,20130621
CN-103640346-A,20131203
CN-103314981-A,20130711
CN-103524018-A,20130918
CN-103479187-A,20131007
CN-103300151-B,20130520
JP-2014000475-A,20131007
EP-2872449-A1,20130709
CN-103257513-A,20130207
CN-103322475-A,20130620
WO-2013153811-A1,20130410
WO-2013189349-A3,20130816
WO-2014011005-A1,20130712
US-2014153051-A1,20131129
US-2013252459-A1,20130515
US-2014042836-A1,20130703
US-2014062501-A1,20130905
US-2014257418-A1,20130307
JP-2014015461-A,20130704
WO-2014079812-A1,20131118
CN-103147710-B,20130221
EP-2796821-A1,20130426
KR-101386713-B1,20131004
JP-2015055334-A,20130913
JP-2015043119-A,20130826
CN-103405983-A,20130726
CN-103323019-A,20130117
CN-103086333-A,20130115
WO-2013129099-A1,20130213
US-2014040080-A1,20131008
CN-104302228-A,20130318
JP-2014181286-A,20130319
CN-103807435-B,20131029
CN-104149138-A,20130515
CN-103770994-A,20131129
CN-103496712-A,20130910
JP-2015065961-A,20131001
EP-2906314-A2,20131011
LU-92308-A1,20131113
CN-103500518-A,20131023
US-9520822-B2,20130426
CN-103697041-B,20131227
CN-103691154-B,20131205
CN-103432790-B,20130902
KR-101493797-B1,20131018
CN-103730984-A,20131225
CN-104412873-A,20130819
US-9634345-B2,20130524
CN-104936898-B,20131203
CN-103770639-A,20131212
CN-104252998-A,20130625
CN-103047204-A,20130105
KR-200476698-Y1,20131118
CN-103242971-A,20130503
CN-103501205-A,20131011
EP-2680136-A1,20130627
CN-103132095-A,20130131
CN-103146927-B,20130402
JP-2014224921-A,20130516
US-9224656-B2,20130725
CN-103431981-A,20130908
CN-103945090-B,20130117
CN-103235869-A,20130329
US-2015250755-A1,20131105
US-2014117855-A1,20130620
CN-103481344-A,20130917
US-2015172982-A1,20130801
CN-103601283-A,20131203
CN-103137850-B,20130221
GB-2508073-A,20130913
GB-2521319-B,20131002
CN-103651100-A,20131205
CN-103626067-B,20131113
JP-2013107008-A,20130313
EP-2724926-A1,20131024
US-D741298-S,20130123
CN-103709539-A,20131219
CN-103990582-A,20130216
CN-103531313-A,20130620
CN-104129667-A,20131129
CN-103426201-B,20130830
CN-103682186-B,20130830
CN-103808192-B,20131121
CN-103441181-A,20130830
EP-2743032-A1,20130311
EP-2839737-A1,20130821
CN-104246178-A,20130219
JP-5528646-B1,20130612
DE-102013216490-A1,20130820
CN-103552159-B,20131125
US-9326313-B2,20131028
CN-104546875-A,20131009
CN-103568666-A,20130907
KR-101365773-B1,20130923
CN-104048282-A,20130316
CN-103639477-B,20131205
CN-103163068-A,20130204
CN-103321161-A,20130708
KR-101466491-B1,20130618
JP-2015075357-A,20131007
CN-103352334-B,20130802
CN-103255303-A,20130516
EP-2676919-A1,20130621
CN-103618689-A,20130912
US-2014058243-A1,20130108
US-2015235611-A1,20130912
CN-103698194-

2025-01-16 17:16:15 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:15 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:15 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:17 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:16:17 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:17 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:17 - root - INFO - SQL:
SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"

2025-01-16 17:16:17 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:17 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:17 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:18 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-16 17:16:18 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:18 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:19 - root - INFO - SQL:
SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number
US-2002199075-A1
US-2003048328-A1
US-2003102128-A1
US-2003177113-A1
US-2004074387-A1
US-2004113364-A1
US-2004134953-A1
US-2004205498-A1
US-2004211554-A1
US-2004268070-A1
US-2005087824-A1
US-2005137363-A1
US-2005219456-A1
US-2007191504-A1
US-2007206259-A1
US-2007245673-A1
US-2007256734-A1
US-2008004039-A1
US-2008093571-A1
US-2008109298-A1
US-2009139775-A1
US-2009192703-A1
US-2009277763-A1
US-2009317817-A1
US-2009318914-A1
US-2010197310-A1
US-2011135550-A1
US-2012010547-A1
US-2013169571-A1
WO-2007096405-A1
US-1374446-A
US-1394328-A
US-2408627-A
US-2563456-A
US-2701131-A
US-2932152-A
US-3094695-A
US-3147792-A
US-3194312-A
US-3327855-A
US-3329640-A
US-3607670-A
US-3644831-A
US-3859370-A
US-3937405-A
US-3937535-A
US-3999214-A
US-4012887-A
US-4069973-A
US-4119578-A
US-4147795-A
US-4369743-A
US-4479329-A
US-4523847-A
US-4554569-A
US-4590077-A
US-4650684-A
US-4663453-A
US-4694030-A
US-4708433-A
US-4735768-A
US-4754323-A
US-4769634-A
US-4809272-A
US-4851409-A
US-4980052-A
US-4984435-A
US-5248292-A
US-5299775-A
US-5347275-A
US-5380026-A
US-5447012-A
US-5564650-A
US-5595304-A
US-5602890-A
US-5718563-A
US-5753999-A
US-5792086-A
US-5817591-A
US-5856797-A
US-5873663-A
US-5952273-A
US-6011555-A
US-6071627-A
US-6084911-A
US-6087029-A
EP-1065496-A2
JP-S4728555-U
JP-S5146714-A
US-6218671-B1
US-6476737-B1
US-6561612-B2
US-6592268-B2
US-6666924-B1
US-6671418-B2
US-6752433-B2
US-6753754-B1
US-6831544-B2
US-6854476-B1
US-6893428-B2
US-6962028-B2
US-7106438-B2
US-7116003-B2
US-7140390-B2
US-7219083-B2
US-7444791-B1
US-7935140-B2
US-8713311-B1
WO-0133176-A1
WO-9004898-A1
WO-9952047-A1
CN-101441869-A
DE-10204477-A1
DE-10242257-B4
DE-19653503-A1
JP-H09213662-A
WO-02097090-A1
JP-2006078326-A
JP-2007290689-A
US-2001035801-A1
US-2002018432-A1
US-2002053196-A1
US-2002146214-A1
US-2002154037-A1
US-2004042671-A1
US-2004072119-A1
US-2004258922-A1
US-2005186904-A1
US-2006154097-A1
US-2006235539-A1
US-2007143171-A1
US-2007281762-A1
US-2008065154-A1
US-2008301497-A1
US-2009014625-A1
US-2009107160-A1
US-2009188127-A1
US-2011072355-A1
WO-2007082874-A1
US-791905-A
GB-2346632-A
US-1738893-A
US-1838213-A
US-2070281-A
US-2540130-A
US-2595499-A
US-2783046-A
US-3212127-A
US-3542052-A
US-3574065-A
US-3682027-A
US-3717947-A
US-3834670-A
US-3983363-A
US-4180111-A
US-4291244-A
US-4709320-A
US-4804696-A
US-4858719-A
US-4929189-A
US-5116320-A
US-5165792-A
US-5228678-A
US-5352111-A
US-5484078-A
US-5488872-A
US-5520160-A
US-5598869-A
US-5633590-A
US-5772309-A
US-5776966-A
US-5808597-A
US-5866740-A
US-5911742-A
US-5981843-A
EP-0206897-A2
EP-0696040-A1
US-6251456-B1
US-6255263-B1
US-6372495-B1
US-6391509-B1
US-6410846-B1
US-6446768-B2
US-6474522-B1
US-6593115-B2
US-6747606-B2
US-6782924-B2
US-6799999-B2
US-6986591-B2
US-6994437-B2
US-7118536-B2
US-7218854-B1
US-7278663-B2
US-7310109-B2
US-7431628-B2
US-7637823-B2
US-8388639-B2
US-9039757-B2
WO-0013685-A1
WO-8602561-A1
WO-9118512-A1
CN-101624192-A
CN-202479774-U
JP-H02144675-A
JP-S63297108-A
JP-2002097551-A
JP-2006042087-A
US-2001010544-A1
US-2002146958-A1
US-2002188881-A1
US-2003174075-A1
US-2004061474-A1
US-2004096382-A1
US-2004124550-A1
US-2004238931-A1
US-2004264634-A1
US-2005138019-A1
US-2005211658-A1
US-2005237396-A1
US-2006094603-A1
US-2007178679-A1
US-2007269197-A1
US-2008057277-A1
US-2011196200-A1
US-2013097526-A1
US-1345443-A
US-2076632-A
US-2364262-A
US-2556571-A
US-2625793-A
US-2807264-A
US-3303902-A
US-3333328-A
US-3390671-A
US-3658244-A
US-3664495-A
US-3716865-A
US-3828726-A
US-3844843-A
US-4039069-A
US-4057719-A
US-4125017-A
US-4139262-A
US-4191985-A
US-4725024-A
US-4787195-A
US-4800429-A
US-4836857-A
US-4843762-A
US-4885491-A
US-4963013-A
US-5024712-A
US-5096286-A
US-5280695-A
US-5308981-A
US-5382988-A
US-2951957-A
US-4897035-A
US-5832509-A
US-4560189-A
US-2952719-A
US-5311659-A
US-5623359-A
US-5073716-A
US-4209136-A
US-3739180-A
US-4817320-A
US-5360080-A
US-6064490-A
US-4535175-A
US-4857209-A
US-5942450-A
US-31614-A
US-5499036-A
US-2400726-A
US-D730919-S
GB-190818602-A
GB-2455446-B
CN-101174240-A
CN-101707380-A
US-2004180945-A1
US-2008124681-A1
US-2003148107-A1
US-2002178236-A1
US-2004071219-A1
US-2008173322-A1
US-2009025927-A1
US-2009222086-A1
US-2003086172-A1
US-2002177265-A1
US-2012104230-A1
US-2010081380-A1
US-2010045047-A1
US-2005020232-A1
US-2005286811-A1
US-2007172819-A1
US-2006192323-A1
US-2004168263-A1
US-2002097399-A1
US-2005267875-A1
US-2010301212-A1
US-2009121948-A1
US-2005251164-A1
US-2002057222-A1
US-2007267889-A1
US-2004067731-A1
US-2003131133-A1
US-2003136523-A1
US-2004033246-A1
US-2005091341-A1
DE-2452532-A1
DE-19807875-A1
US-7103817-B1
US-6270443-B1
US-6342700-B1
US-6553552-B1
US-6450549-B1
US-6677038-B1
US-6515122-B1
US-6446619-B1
US-6309207-B1
JP-2003164560-A
JP-S61159135-A
JP-2007289281-A
JP-2005255806-A
JP-H1083709-A
JP-H07122961-A
JP-2000142025-A
JP-2005085990-A
JP-H10182150-A
JP-2003022658-A
FR-2728459-A1
US-7009386-B2
US-6758348-B2
US-7686650-B2
US-6676707-B2
US-7321997-B2
US-6906028-B2
US-6809752-B2
US-7190869-B2
US-7432823-B2
US-6914349-B2
US-676040

2025-01-16 17:16:19 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:19 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:19 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:20 - snowflake.connector.cursor - INFO - Number of results in first chunk: 64
2025-01-16 17:16:20 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:20 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:20 - root - INFO - SQL:
SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
   LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Results:
embedding_value
-0.09759014
-0.078651346
-0.10224627
-0.0983403
-0.25790602
-0.08247189
0.013742259
-0.12294948
0.080819525
0.02691578
-0.111443974
0.13409771
0.07433381
0.0051532313
-0.107546076
-0.01806273
0.18319431
-0.02954358
-0.060462546
7.859522e-05
0.25664663
-0.024329128
-0.10676161
0.10145806
-0.13808568
-0.071496874
0.20854723
-0.13290617
0.040874187
0.033745658
-0.07300707
-0.057065535
0.017014034
-0.044571783
-0.08327014
-0.1801684
0.051138002
-0.30761087
0.15807615
-0.035334043
0.043117434
-0.101780556
0.20707245
-0.08408691
-0.34054148
0.045913506
-0.095601946
0.14381136
0.09557541
-0.032358523
-0.018898478
0.25465798
-0.073037274
0.109022945
-0.03175191
0.054333884
0.15664567
0.074965976
-0.20294082
0.054057088
0.069939174
0.21290104
0.0069557237
0.03396455

2025-01-16 17:16:20 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:20 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:20 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:22 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1000
2025-01-16 17:16:22 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:22 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:22 - root - INFO - SQL:
SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   AND "publication_number" IN (
     SELECT "publication_number"
     FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
     WHERE "embedding_v1" IS NOT NULL
   )
   LIMIT 1000;
Results:
Too long, hard cut:
publication_number
CN-203085932-U
WO-2014067348-A1
US-2014187204-A1
US-2014066435-A1
US-2014264575-A1
CN-203284459-U
CN-103337651-A
CN-203299231-U
US-2014303915-A1
US-2013221189-A1
CN-203353924-U
CN-103446031-B
RU-2013113552-A
CN-203361176-U
CN-103264663-A
CN-203106714-U
CN-203408889-U
US-2015049396-A1
CN-203517598-U
WO-2013157859-A1
EP-2841128-A4
US-2016034307-A1
WO-2014065408-A1
CN-103451476-A
CN-103431153-A
US-9599895-B2
US-9182419-B2
CN-203512882-U
US-9599650-B2
CN-103315858-A
CN-103469377-A
EP-3047617-A1
CN-103300288-A
US-9231016-B2
WO-2014188512-A1
US-8888421-B1
US-9056913-B2
CN-203174284-U
CN-105051476-B
CN-203391155-U
CN-103128551-A
US-8825476-B2
CN-203262802-U
EP-3061684-A1
CN-103737674-B
CN-203053096-U
CN-103260042-A
CN-103217819-B
CN-103587666-A
US-2014325349-A1
CN-103256435-A
WO-2014027331-A3
CN-103596410-B
US-2013286359-A1
CN-103434507-B
EP-2931411-A1
CN-103089120-B
CN-203581811-U
US-2013222998-A1
CN-203524581-U
CN-104584349-A
CN-203174118-U
CN-203119384-U
CN-104671085-B
CN-203246175-U
CN-203767868-U
CN-203381169-U
CN-203484834-U
JP-2015527040-A
CN-104676744-A
US-8696367-B2
CN-103205340-B
CN-203623666-U
CN-103344191-A
CN-103110441-A
CN-103310403-A
CN-103452517-A
US-9253028-B2
CN-103677052-A
CN-103641225-A
JP-5511039-B1
CN-203254585-U
CN-103316811-A
JP-5997062-B2
CN-203130197-U
CN-203577539-U
FR-3012337-B1
JP-2014050945-A
CN-203144294-U
CN-203568092-U
WO-2013174951-A1
CN-103657647-B
JP-5897497-B2
EP-2644446-A2
CN-203516521-U
JP-6127609-B2
CN-103386558-B
CN-203072832-U
CN-104170162-B
KR-20150064998-A
US-2014270241-A1
US-2014152072-A1
CN-104364640-B
US-8831478-B2
JP-2014192620-A
CN-203368574-U
US-2015285146-A1
CN-203245657-U
EP-2743238-A3
GB-2519571-A
CN-104168871-A
WO-2014163676-A1
JP-6158534-B2
US-9583820-B2
CN-103601878-A
JP-2015082097-A
JP-5877170-B2
JP-2015059895-A
EP-2997217-A4
RU-2625792-C2
WO-2014018923-A2
CN-103381769-A
JP-6049150-B2
EP-2931717-A1
KR-20140013914-A
RU-132560-U1
JP-5770808-B2
US-D722424-S
EP-2835095-A4
NL-2010592-C
US-9459186-B2
CN-103360942-B
US-2014310497-A1
EP-2700882-A3
CN-103699426-B
RU-2013120470-A
CN-103763706-B
JP-5956944-B2
WO-2014199482-A1
JP-6026379-B2
WO-2013186759-A1
EP-2683042-A2
JP-2014163922-A
US-2015002292-A1
CN-203294492-U
CN-203719666-U
CN-103468244-A
CN-203121023-U
GB-2512589-A
US-2014168876-A1
CN-203581885-U
US-2013168837-A1
US-2014191071-A1
CN-203311805-U
CN-104514540-A
US-2014250178-A1
US-2015144813-A1
US-8700968-B2
US-2013124748-A1
CA-2894615-A1
CN-203474572-U
US-9575480-B1
CN-203582137-U
US-2013253331-A1
CN-103585968-A
CN-103346922-B
CN-103397740-B
CN-103266223-B
JP-2015014308-A
CN-103606826-A
CN-103428996-A
CN-103120065-A
CN-104575757-A
EP-2701199-A3
CN-104013285-A
CN-104461183-A
CN-104508518-A
CN-203090270-U
WO-2013161468-A1
CN-103304404-A
US-2014048849-A1
KR-101740088-B1
CN-103670428-A
CN-203182978-U
CN-103226580-B
KR-101445593-B1
CN-103640346-A
US-2015004631-A1
CN-104271773-B
US-2014352899-A1
CN-103073696-B
CN-103067053-B
CN-203390253-U
CN-103683218-B
CN-103710137-A
CN-103411740-A
WO-2014007772-A3
US-2015085889-A1
EP-2780528-A1
JP-WO2014050803-A1
CN-104053992-A
JP-5877186-B2
CN-104508556-A
US-2013145150-A1
JP-5660150-B2
EP-2931781-A1
US-2014351327-A1
CN-103446752-A
CN-103682334-A
KR-20140107016-A
CN-105164647-A
CN-203209722-U
US-2014012042-A1
CN-103424907-A
CN-105103066-A
CN-103436567-B
RU-2515201-C1
JP-2013100108-A
EP-2621031-A2
US-2014093753-A1
CN-103172927-B
WO-2014064361-A1
EP-3058533-A1
CN-103697915-B
JP-2016533123-A
CN-103644536-B
US-9539539-B2
CN-103557404-B
RU-2554614-C2
CN-103421334-A
US-2015092286-A1
CN-203530992-U
CN-203091412-U
CN-203139411-U
CN-104414814-A
CN-104169723-A
WO-2014054061-A2
CN-203602872-U
KR-20150008668-A
CN-103040564-A
CN-103707618-A
CN-103551533-A
JP-2014222151-A
RU-2507287-C1
CN-103412224-A
CN-104426896-A
CN-103630439-A
US-2013306063-A1
WO-2013189726-A1
CN-103568013-B
KR-101446872-B1
CN-103793464-A
CN-203465818-U
CN-203077485-U
US-2015036846-A1
JP-2015124064-A
CN-203515456-U
CN-103601741-A
JP-2015512112-A
US-2015238728-A1
US-2014040393-A1
US-2014229377-A1
WO-2014051421-A3
CN-103297864-A
KR-101351400-B1
US-2015052993-A1
US-2013166409-A1
US-2014105865-A1
CN-203321504-U
US-2016369226-A1
EP-2687615-A2
CN-103377098-A
WO-2015049745-A1
US-2015032050-A1
CN-104937041-A
CN-103725065-A
WO-2014008511-A1
CN-103812398-A
CN-104283977-A
EP-2863772-B1
CN-203362157-U
CN-103383906-A
CN-203378838-U
CN-103584401-A
JP-2016508151-A
KR-20150011283-A
KR-20150060169-A
CN-203333915-U
CN-203445205-U
WO-2014094630-A1
US-2013162738-A1
JP-2013167150-A
CN-103449128-B
CN-203534074-U
CN-203071125-U
CN-203706710-U
US-2014054042-A1
US-2016334290-A1
CN-103783596-A
CN-103575237-A
CN-203609460-U
CN-103193040-A
CN-203273923-U
US-2015325318-A1
WO-2014062389-A2
KR-20140095846-A
US-8804872-B1
CN-103587940-A
CN-103392556-A
CN-103110638-A
CN-203575401-U
CN-103506417-A
JP-2014143408-A
WO-2013133434-A1
CN-103561023-A
US-2013285621-A1
CN-103335651-A
CN-203244833-U
CN-103745248-A
US-8665376-B2
EP-2851907-A1
CN-103578420-B
CN-104884644-A
CN-103198243-B
US-9259281-B

2025-01-16 17:16:22 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:22 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:22 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:25 - snowflake.connector.cursor - INFO - Number of results in first chunk: 73
2025-01-16 17:16:26 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:26 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:26 - root - INFO - SQL:
SELECT t1."publication_number", t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
    ON t1."publication_number" = t2."publication_number"
    WHERE FLOOR(t1."filing_date" / 10000) = 2013
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,embedding_v1
US-8554997-B1,"[
  -8.250444999999999e-02,
  -1.710680000000000e-01,
  -8.058429500000000e-02,
  -1.776437200000000e-01,
  -2.119537600000000e-01,
  -1.599637100000000e-01,
  -1.398428500000000e-01,
  -9.731123600000000e-02,
  1.545770000000000e-01,
  -6.818004000000000e-02,
  -4.961892000000000e-02,
  2.232717000000000e-01,
  -4.151114000000000e-02,
  -8.944259600000000e-02,
  -1.894027900000000e-01,
  5.836225300000000e-02,
  1.388387900000000e-02,
  -1.649990400000000e-01,
  6.128464600000000e-02,
  -2.178155400000000e-02,
  1.960998500000000e-01,
  2.747434600000000e-02,
  -1.099247800000000e-01,
  -4.587950000000000e-02,
  -6.597027600000000e-03,
  2.968162500000000e-02,
  1.911340700000000e-01,
  2.968327400000000e-03,
  2.054702800000000e-01,
  2.042513800000000e-01,
  -9.683183600000000e-02,
  -4.681838300000000e-02,
  -1.095023400000000e-01,
  8.547725500000000e-02,
  -1.536064100000000e-01,
  -1.613503100000000e-01,
  -8.310392000000000e-02,
  -2.032790800000000e-01,
  6.393608000000001e-02,
  -5.749258600000000e-04,
  -1.531140000000000e-01,
  -1.147272700000000e-01,
  2.719014600000000e-01,
  6.032276000000000e-02,
  -1.248303400000000e-01,
  4.400011600000000e-03,
  -3.194304600000000e-02,
  6.847679000000000e-02,
  1.703955000000000e-02,
  4.343584000000000e-02,
  -1.633246200000000e-01,
  -1.119821400000000e-02,
  6.993881600000000e-02,
  1.435678900000000e-01,
  9.783652399999999e-02,
  -3.719759400000000e-02,
  1.526583900000000e-01,
  8.395795000000000e-02,
  -2.246724000000000e-01,
  5.273677000000000e-02,
  -4.536501300000000e-02,
  4.946659000000000e-02,
  -2.370834000000000e-01,
  1.094236100000000e-01
]"
US-8806576-B1,"[
  -1.564216600000000e-02,
  -3.909041600000000e-01,
  1.898517600000000e-02,
  -1.484045000000000e-01,
  -7.696050400000000e-02,
  -1.672188200000000e-01,
  8.338847500000001e-04,
  -1.182967650000000e-01,
  1.088115300000000e-01,
  -1.120274140000000e-01,
  1.253927500000000e-01,
  1.444476700000000e-01,
  2.233864200000000e-02,
  -2.075008900000000e-02,
  3.575833700000000e-03,
  4.409090800000000e-02,
  -1.843273800000000e-02,
  -6.939334400000000e-02,
  1.683077600000000e-02,
  1.646315600000000e-01,
  7.416774000000000e-02,
  1.341052200000000e-01,
  -4.091450200000000e-02,
  -2.528860400000000e-02,
  -2.776720700000000e-02,
  1.774820700000000e-01,
  3.432411600000000e-01,
  9.626434000000000e-02,
  1.364537200000000e-01,
  -2.438634400000000e-03,
  -8.924128000000001e-02,
  1.174802300000000e-02,
  3.673669700000000e-02,
  -3.906260800000000e-02,
  -7.106171500000000e-02,
  6.386095000000000e-02,
  3.921813000000000e-02,
  -1.119349000000000e-01,
  -2.009314000000000e-02,
  9.909318000000000e-03,
  -3.365039000000000e-02,
  -8.766731000000000e-02,
  4.311543000000000e-02,
  1.861599100000000e-01,
  1.612983300000000e-01,
  4.469404400000000e-02,
  1.459620900000000e-02,
  -8.901618400000000e-02,
  -1.728157300000000e-01,
  8.700885600000000e-02,
  -2.907790200000000e-01,
  -1.894055100000000e-02,
  -4.003992300000000e-02,
  1.550799800000000e-02,
  -3.025997000000000e-02,
  2.070812300000000e-01,
  3.454935500000000e-03,
  -1.103280100000000e-02,
  -3.072734500000000e-01,
  2.208325000000000e-01,
  -1.320568700000000e-02,
  8.993078000000000e-02,
  6.440867000000000e-02,
  1.913789200000000e-01
]"
US-9166332-B2,"[
  -7.085666000000000e-02,
  -2.033819100000000e-01,
  -2.320469200000000e-02,
  -1.386202600000000e-01,
  -4.288875300000000e-02,
  -1.685402800000000e-01,
  -8.623867500000000e-02,
  1.241327300000000e-02,
  8.699438000000000e-02,
  -2.323668000000000e-01,
  8.866887499999999e-02,
  1.386992800000000e-02,
  -8.382101000000000e-02,
  1.997755700000000e-02,
  -5.622283400000000e-02,
  -8.552690999999999e-03,
  1.018030350000000e-01,
  1.676478800000000e-01,
  -2.182107100000000e-01,
  2.221019900000000e-01,
  6.796289000000000e-02,
  -2.033459600000000e-02,
  -2.188032700000000e-01,
  1.435412000000000e-01,
  -3.413684300000000e-02,
  2.078379000000000e-01,
  3.445979200000000e-02,
  1.635818300000000e-01,
  -5.791418600000000e-02,
  3.418623300000000e-02,
  3.342397500000000e-02,
  1.596238800000000e-01,
  -8.456411000000000e-02,
  -1.787647500000000e-03,
  -2.919114800000000e-02,
  -2.407133900000000e-01,
  4.936260000000000e-02,
  -1.882336700000000e-01,
  5.722904000000000e-03,
  5.924567600000000e-02,
  1.643058500000000e-01,
  -4.645414700000000e-02,
  1.294502900000000e-01,
  2.959425600000000e-02,
  -5.032646000000000e-02,
  -6.140311000000000e-03,
  1.769238700000000e-01,
  6.436124000000000e-02,
  1.480919300000000e-01,
  -1.401374000000000e-01,
  -7.689495000000000e-02,
  1.398213000000000e-01,
  -1.905379700000000e-01,
  2.116795200000000e-01,
  -1.709760700000000e-01,
  1.995408800000000e-01,
  -8.469106999999999e-02,
  -8.347738500000000e-02,
  1.450400800000000e-03,
  8.831372000000000e-02,
  -8.226142000000000e-02,
  1.560426500000000e-01,
  -1.930279400000000e-01,
  6.097224000000000e-02
]"
CN-103211297-

2025-01-16 17:16:26 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:26 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:26 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:28 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:16:28 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:28 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:28 - root - INFO - SQL:
SELECT "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Results:
Too long, hard cut:
cpc
"[
  {
    ""code"": ""G11C13/0026"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0069"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1233"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/003"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/149"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/31"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C7/1006"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/004"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0023"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0002"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/71"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0097"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/146"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/35"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1608"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2454"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2481"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0028"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0007"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/147"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66666"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/063"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L21/768"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/78"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C7/1006"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0026"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/35"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2454"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/31"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/78"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0023"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1608"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/149"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/71"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0028"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66666"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/004"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/063"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0069"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/146"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0007"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/147"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": 

2025-01-16 17:16:28 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:28 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:28 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:30 - snowflake.connector.cursor - INFO - Number of results in first chunk: 301
2025-01-16 17:16:30 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:31 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:31 - root - INFO - SQL:
SELECT "publication_number", "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "cpc" IS NOT NULL
    LIMIT 1000;
Results:
Too long, hard cut:
publication_number,cpc
CN-104260754-A,"[
  {
    ""code"": ""B61K9/08"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-3939506-A,"[
  {
    ""code"": ""E03D9/04"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""E03D9/052"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
KR-101486666-B1,"[
  {
    ""code"": ""H02K5/18"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H05K7/20"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
KR-101017597-B1,"[
  {
    ""code"": ""G01V2210/661"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G01V99/005"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T17/05"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
JP-2010511460-A,"[
  {
    ""code"": ""A61L9/037"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""A61L9/127"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""A61L9/122"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-102085956-B,[]
RU-2039928-C1,[]
CN-104891425-A,[]
US-8520301-B2,"[
  {
    ""code"": ""G02B5/281"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/208"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/281"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/208"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B7/021"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B1/115"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-4767715-A,"[
  {
    ""code"": ""C12C1/0275"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""C12C1/10"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-8463797-B2,"[
  {
    ""code"": ""H04L9/3247"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G06F17/30386"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06F21/564"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
EP-1506427-A1,"[
  {
    ""code"": ""G06T15/08"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T5/50"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/30016"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/20221"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G01R33/56341"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/10092"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  }
]"
US-4168984-A,"[
  {
    ""code"": ""C04B24/045"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-3328541-A,"[
  {
    ""code"": ""G07F7/025"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06Q20/342"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G07F7/0833"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G07F7/08"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-4520785-A,"[
  {
    ""code"": ""Y02T10/36"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""F02M21/0239"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""F02B43/00"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""Y02T10/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""F02M21/04"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""F02D19/0642"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-102699533-B,[]
WO-2010013298-A1,"[
  {
    ""code"": ""B62D5/0463"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""B62D5/0472"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
JP-2014201698-A,[]
CN-100462795-C,"[
  {
    ""code"": ""G02F1/13392"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-103105794-A,[]
US-7173260-B2,"[
  {
    ""code"": ""H01J2237/0213"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01J37/165"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01J2237/31705"",
    ""first"": false

2025-01-16 17:16:31 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:31 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:31 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:32 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:32 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:16:52 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:16:52 - root - INFO - The error occurs because the alias `t` is not defined in your query. In the subquery within the `WHERE` clause, you're referencing `t."publication_number"`, but the main table `ABS_AND_EMB` hasn't been assigned the alias `t`.

**Explanation:**

- **Alias Missing:** You need to assign an alias to the `ABS_AND_EMB` table so that `t` is recognized.
- **Subquery Inefficiency:** Using a subquery in the `WHERE` clause for each row can be inefficient. It's better to use a `JOIN` to combine the tables based on the `publication_number`.

**Corrected Query Using Alias:**

Here's the corrected version of your query with the alias `t` properly defined:

```sql
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
WHERE FLOOR((
  SELECT "filing_date"
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
  WHERE "publication_number" = t."publication_number"
) / 10000) = 2013
LIMIT 1000;
```

**Optimized Query Using JOIN:**

However, a more efficient way is to use a `JOIN` to connect the two tables:

```sql
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
  ON t."publication_number" = p."publication_number"
WHERE FLOOR(p."filing_date" / 10000) = 2013
LIMIT 1000;
```

**Benefits of Using JOIN:**

- **Performance Improvement:** Joins are generally faster than subqueries because the database can optimize the join operation.
- **Clarity:** It's clearer to read and understand.
- **Scalability:** Better suited for large datasets.

**Summary:**

- **Define the Alias:** Always ensure that if you're using an alias like `t`, it's defined in the `FROM` clause.
- **Use JOINs When Appropriate:** They are often more efficient and make the query easier to understand.

**Final Answer:**

Use the following query to retrieve the abstracts for patents filed in 2013:

```sql
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
  ON t."publication_number" = p."publication_number"
WHERE FLOOR(p."filing_date" / 10000) = 2013
LIMIT 1000;
```

This should resolve the error and provide you with the desired results.
2025-01-16 17:16:52 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:16:52 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:16:52 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:16:54 - snowflake.connector.connection - INFO - closed
2025-01-16 17:16:54 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:17:27 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:17:27 - root - INFO - The error you're encountering:

```
002031 (42601): None: SQL compilation error:
Unsupported subquery type cannot be evaluated
```

occurs because the SQL engine does not support the use of a scalar subquery in the `WHERE` clause in the way you've written it. Specifically, the subquery:

```sql
(
  SELECT "filing_date"
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
  WHERE "publication_number" = t."publication_number"
)
```

is attempting to correlate with the outer query using `t."publication_number"`, but this type of correlated subquery is not supported in the `WHERE` clause by your SQL engine.

**Solution:**

To resolve this issue, you should use a `JOIN` to combine the two tables based on the `publication_number`. This approach avoids the use of the unsupported correlated subquery and is more efficient.

Here is the corrected query:

```sql
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
  ON t."publication_number" = p."publication_number"
WHERE FLOOR(p."filing_date" / 10000) = 2013
LIMIT 1000;
```

**Explanation:**

- **`JOIN` Clause:** We join the `ABS_AND_EMB` table (aliased as `t`) with the `PUBLICATIONS` table (aliased as `p`) on the `publication_number` column. This effectively brings the `filing_date` into the scope of the main query.
- **`WHERE` Clause:** We apply the `FLOOR` function to `p."filing_date"` to extract the year by dividing by 10,000 and taking the integer part. We then compare it to `2013` to filter patents filed in that year.
- **Aliases:** Using table aliases (`t` and `p`) makes the query more readable and ensures that column references are unambiguous.
- **Avoiding Subqueries:** By using a `JOIN`, we avoid the need for a subquery in the `WHERE` clause, which is causing the compilation error.

**Benefits of Using `JOIN`:**

- **Performance Improvement:** Joins are generally optimized by SQL engines and can perform better than correlated subqueries.
- **Error Avoidance:** Eliminates issues with unsupported subquery types.
- **Clarity:** The query is easier to read and understand.

**Final Remarks:**

- **Ensure Table Aliases are Defined:** When using aliases like `t` and `p`, make sure they are properly defined in the `FROM` and `JOIN` clauses.
- **Check for Null Values:** If there's a possibility of `NULL` values in `filing_date`, you might want to add a condition to handle them appropriately.
- **Test the Query:** Run the corrected query to ensure it returns the expected results without errors.

**Example Result Format:**

```csv
publication_number,abstract
publication_number_1,abstract_text_1
publication_number_2,abstract_text_2
...
```

This query will give you the `publication_number` and `abstract` of all patents filed in the year 2013, as required.
2025-01-16 17:17:27 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:17:27 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:17:27 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:17:29 - snowflake.connector.cursor - INFO - Number of results in first chunk: 407
2025-01-16 17:17:30 - snowflake.connector.connection - INFO - closed
2025-01-16 17:17:30 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:17:31 - root - INFO - SQL:
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
  ON t."publication_number" = p."publication_number"
WHERE FLOOR(p."filing_date" / 10000) = 2013
LIMIT 1000;
Results:
Too long, hard cut:
publication_number,abstract
ES-1078947-Y,
ES-1085131-Y,
ES-1088829-U,"1. headpiece (1), particularly for a user to fall conditioned hair by medicine, with an inner cap (2) having on the outside a closing means (4) for releasable connection with closure means (5) corresponding to the inside of an outer cap (6), wherein the inner cap (2) is made of a textile functional material.  2. headpiece (1) according to claim 1, characterized in that the textile functional material has chemical fiber, preferably chemical fibers of synthetic polymers, particularly polyamide, polypropylene, polyester or polyurethane, or chemical fibers of natural polymers in particular Lyocell.  3. headpiece (1) according to claim 1, characterized in that the functional textile material has natural fibers, preferably lana merino.  4. headpiece (1) according to one of claims 1 to 3, characterized in that the textile functional material comprises at least two layers, such as a Softshell material.  5. headpiece (1) according to one of claims 1 to 4, wherein the closure means (4) of the inner cap (2) elements are provided push button (7) for attachment elements pushbutton (7 &#39;) adapted to the outer cap (6).  6. headpiece (1) according to claim 5, wherein the closing means (4) are arranged on the encircling collar (8) of the inner cap (2).  7. headpiece (1) according to claim 5 or 6, characterized in that the push button (7) of the inner cap (2) are fixed in a flexible textile tape (9).  8. headpiece (1) according to claim 6 or 7, characterized in that the push button (7) are arranged at substantially regular intervals along the encircling collar (8) of the inner cap (2) .  9. headpiece (1) according to one of claims 1 to 8, wherein the inner cap (2) has several pieces of cap (2 &#39;) which are joined together by seams (10) extending on the outside of the inner cap (2).  10. headpiece (1) according to one of claims 1 to 9, wherein the inner cap (2) has on the inner side anti-sliding means (16) for inhibiting sliding touched for use head (1).  11. headpiece (1) according to claim 10, characterized in that for the configuration of the antislip means (16) an area (17) preferably in tape form, having greater slip resistance is provided at least the functional textile material.  12. headpiece (1) according to claim 11, characterized in that the zone of greater slip resistance is formed of a rubber material.  13. headpiece (1) according to claim 10, wherein the functional textile material has, for the configuration of the antislip means, threads which reinforce adhesion, preferably a rubber material, in particular rubber or silicone.  14. headpiece (1) according to one of claims 1 to 13, wherein the inner cap (2) has an adjusting (12) for adjusting the width of an opening (2 &#39; &#39;) of the inner cap (2).  15. headpiece (1) according to claim 14, characterized in that the adjusting device (12) has a closure strip (13) fixable in various positions.  16. headpiece (1) according to one of claims 1 to 15, wherein the inner cap (2) has a section expansion (11) which has greater flexibility in the circumferential direction another section of the inner cap (2).  17. headpiece (1) according to claim 16 to claim 14, characterized in that the adjusting device (12) is arranged along the expansion section (11) of the inner cap (2).  18. headpiece (1) according to claim 16 or 17, characterized in that for setting the expansion section (11) are provided folds (11 &#39;) extending in longitudinal direction of the inner cap ( 2).  19. headpiece (1) according to one of claims 1 to 18, wherein the inner cap (2) is connected to the outer cap (6) through the closure means (4, 5)."
ES-1091930-Y,
ES-1092405-Y,
ES-1095932-Y,
ES-1096432-U,"1. Protection device in soda cans against pollutants, characterized by being a circular plastic element, covering the entire top surface of the can and is attached thereto, also has a coined area, which follows in part, and is bent on itself to create an extra surface for the lips."
ES-1128130-Y,
GB-2499345-B,"A supervisory system controller for controlling and monitoring the generation of electrical energy from renewable sources and management methods for the storage of energy so generated and interconnecting the energy-generating elements, storage and load. The supervisory system controller operates to maximum the power transfer from a wind turbine to a battery by automatically varying the threshold levels at which turbine dump loads are switched based on system inputs and measurements. The method conserves generator fuel by delaying a scheduled generator maintenance running period such that it to occurs when renewable energy availability is predicted to be low and battery is in a reduced state of charge. Further modifications and management methods are also provided."
GB-2499513-A,"The invention relates to a liquid-crystalline medium characterised in that it contains one or more compounds of the formula IA, and at least one c

2025-01-16 17:17:31 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:17:31 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:17:31 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:17:32 - snowflake.connector.cursor - INFO - Number of results in first chunk: 10
2025-01-16 17:17:32 - snowflake.connector.connection - INFO - closed
2025-01-16 17:17:32 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:17:33 - root - INFO - SQL:
SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
    LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Results:
top_term
line
fig
selection
bit
memory
word
lines
cell
gate
data

2025-01-16 17:17:33 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:17:33 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:17:33 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:17:34 - snowflake.connector.cursor - INFO - Number of results in first chunk: 0
2025-01-16 17:17:34 - snowflake.connector.connection - INFO - closed
2025-01-16 17:17:34 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:19:09 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:19:09 - root - INFO - ```sql
WITH target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),

other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
),

dot_products AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)

SELECT "publication_number"
FROM dot_products
ORDER BY similarity_score DESC
LIMIT 5;
```
2025-01-16 17:19:09 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:19:09 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:19:09 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:19:10 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:19:10 - snowflake.connector.connection - INFO - closed
2025-01-16 17:19:11 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:19:11 - root - INFO - SQL:
WITH target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),

other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
),

dot_products AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)

SELECT "publication_number"
FROM dot_products
ORDER BY similarity_score DESC
LIMIT 5;
Results:
publication_number
US-D796401-S

2025-01-16 17:19:11 - root - INFO - itercount: 0
2025-01-16 17:19:11 - root - INFO - Database Name: PATENTS_GOOGLE
Schema Name: PATENTS_GOOGLE
DDL describes table information.
,0
table_name,CPC_DEFINITION
description,
DDL,"create or replace TABLE CPC_DEFINITION (
	""applicationReferences"" VARIANT,
	""breakdownCode"" BOOLEAN,
	""childGroups"" VARIANT,
	""children"" VARIANT,
	""dateRevised"" FLOAT,
	""definition"" VARIANT,
	""glossary"" VARIANT,
	""informativeReferences"" VARIANT,
	""ipcConcordant"" VARCHAR(16777216),
	""level"" FLOAT,
	""limitingReferences"" VARIANT,
	""notAllocatable"" BOOLEAN,
	""parents"" VARIANT,
	""precedenceLimitingReferences"" VARIANT,
	""residualReferences"" VARIANT,
	""rules"" VARIANT,
	""scopeLimitingReferences"" VARIANT,
	""status"" VARCHAR(16777216),
	""symbol"" VARCHAR(16777216),
	""synonyms"" VARIANT,
	""titleFull"" VARCHAR(16777216),
	""titlePart"" VARIANT
);"

,1
table_name,DISCLOSURES_13
description,
DDL,"create or replace TABLE DISCLOSURES_13 (
	""family_id"" VARCHAR(16777216),
	""record_id"" VARCHAR(16777216),
	""disclosure_event"" VARCHAR(16777216),
	""sso"" VARCHAR(16777216),
	""patent_owner_harmonized"" VARCHAR(16777216),
	""patent_owner_unharmonized"" VARCHAR(16777216),
	""date"" NUMBER(38,0),
	""standard"" VARCHAR(16777216),
	""committee_project"" VARCHAR(16777216),
	""tc_name"" VARCHAR(16777216),
	""sc_name"" VARCHAR(16777216),
	""wg_name"" VARCHAR(16777216),
	""licensing_commitment"" VARCHAR(16777216),
	""copyright"" VARCHAR(16777216),
	""blanket_type"" VARCHAR(16777216),
	""blanket_scope"" VARCHAR(16777216),
	""third_party"" VARCHAR(16777216),
	""reciprocity"" VARCHAR(16777216),
	""serial_cleaned"" VARCHAR(16777216),
	""pub_cleaned"" VARCHAR(16777216)
);"

,2
table_name,PUBLICATIONS
description,
DDL,"create or replace TABLE PUBLICATIONS (
	""publication_number"" VARCHAR(16777216),
	""application_number"" VARCHAR(16777216),
	""country_code"" VARCHAR(16777216),
	""kind_code"" VARCHAR(16777216),
	""application_kind"" VARCHAR(16777216),
	""application_number_formatted"" VARCHAR(16777216),
	""pct_number"" VARCHAR(16777216),
	""family_id"" VARCHAR(16777216),
	""title_localized"" VARIANT,
	""abstract_localized"" VARIANT,
	""claims_localized"" VARIANT,
	""description_localized"" VARIANT,
	""publication_date"" NUMBER(38,0),
	""filing_date"" NUMBER(38,0),
	""grant_date"" NUMBER(38,0),
	""priority_date"" NUMBER(38,0),
	""priority_claim"" VARIANT,
	""inventor"" VARIANT,
	""inventor_harmonized"" VARIANT,
	""assignee"" VARIANT,
	""assignee_harmonized"" VARIANT,
	""examiner"" VARIANT,
	""uspc"" VARIANT,
	""ipc"" VARIANT,
	""cpc"" VARIANT,
	""fi"" VARIANT,
	""fterm"" VARIANT,
	""citation"" VARIANT,
	""entity_status"" VARCHAR(16777216),
	""art_unit"" VARCHAR(16777216)
);"

,3
table_name,ABS_AND_EMB
description,
DDL,"create or replace TABLE ABS_AND_EMB (
	""publication_number"" VARCHAR(16777216),
	""title"" VARCHAR(16777216),
	""title_translated"" BOOLEAN,
	""abstract"" VARCHAR(16777216),
	""abstract_translated"" BOOLEAN,
	""cpc"" VARIANT,
	""cpc_low"" VARIANT,
	""cpc_inventive_low"" VARIANT,
	""top_terms"" VARIANT,
	""similar"" VARIANT,
	""url"" VARCHAR(16777216),
	""country"" VARCHAR(16777216),
	""publication_description"" VARCHAR(16777216),
	""cited_by"" VARIANT,
	""embedding_v1"" VARIANT
);"

External knowledge that might be helpful: 
### IPC Codes: Handling Main IPC Code Selection

When dealing with the `ipc` field in the `patents-public-data.patents.publications` dataset, it is important to understand the structure of this field, especially the subfield `first`. This subfield is a boolean that indicates whether a given IPC code is the main code for the publication number in question. This is crucial because each patent publication can be associated with multiple IPC codes, signifying the various aspects of the technology covered by the patent.

However, not every publication in the dataset has a designated main IPC code. This lack of a clearly identified main IPC code complicates the process of determining the most relevant IPC code for each publication, as selecting a single IPC code from multiple possibilities without clear prioritization can lead to inconsistent or skewed analyses.

This approach ensures a more consistent and representative selection of IPC codes across the dataset, facilitating more accurate and meaningful analysis of patent trends and classifications. By focusing on the most frequently occurring 4-digit IPC code, the view helps overcome the limitations posed by the absence of a designated main IPC code, thereby enhancing the reliability of patent-related studies and insights derived from this data.

Here is an example

```
SELECT 
    t1.publication_number, 
    SUBSTR(ipc_u.code, 0, 4) as ipc4, 
    COUNT(
    SUBSTR(ipc_u.code, 0, 4)
    ) as ipc4_count 
FROM 
    `patents-public-data.patents.publications` t1, 
    UNNEST(ipc) AS ipc_u 
GROUP BY 
    t1.publication_number, 
    ipc4

```



# Text Embeddings (Similarity)

Patent documents are rich with textual data. In fact, most of the information contained in a patent document is text. This includes the `abstract_localized`, `description_localized`, and `claims_localized`. Textual data can be a powerful tool to analyze and compare patent scope and content across patents. However, before being able to use textual data, it needs to be vectorized or transformed into text embeddings that can be used by machine learning models. Therefore, creating text embeddings from the textual data of patents is necessary to compare patent contents. Technically speaking, running an NLP algorithm that creates embeddings for all U.S. patents is computationally difficult.

Nevertheless, Google runs their own machine learning algorithm which transforms patent text metadata into text embeddings which they report in `patents-public-data.google_patents_research.publications` table. The textual embeddings of one patent, without any knowledge on the algorithm being used to create them, are meaningless on their own. However, the embeddings are powerful when it comes to comparing textual content of two or more patents. Embeddings can be used to calculate a similarity score between any two patents. This similarity score is calculated by applying the dot product of the embeddings vector of the patents, as shown below:

The similarity \( \text{Similarty}_{i,k} \) between two patents \( i \) and \( k \) is calculated as the dot product of their embedding vectors:

\[
\text{Similarty}_{i,k} = \mathbf{v}_i \cdot \mathbf{v}_k
\]

where

\[
\mathbf{v}_i = [v_{i1}, v_{i2}, v_{i3}, \ldots, v_{iN}]
\]
and
\[
\mathbf{v}_k = [v_{k1}, v_{k2}, v_{k3}, \ldots, v_{kN}]
\]

are the embedding vectors for patents \( i \) and \( k \) respectively. The higher the dot product, the more similar the patents.





# Originality (Trajtenberg)

One of the most important measures of a patent is "basicness". The aspects of basicness are tough to measure. Nevertheless, some literature finds that important aspects of these measures are embodied in the relationship between the invention and the technological predcessors and successors it is connected to through, for example, patent citations. We can thus use patent citations to construct measures that identify basicness and appropriability. Trajtenberg et al. 1997 provide a number of these measures. They distinguish between:

1. Forward-looking measures: measures that are derived from the relationship between an invention and subsequent technologies that build upon it. These measures are thus constructed from the forward citations. One example of a forward-looking basicness measure they provide is Generality, which is calculated as:

\[
\text{GENERALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITING}_{G_k}}{\text{NCITING}_i} \right)
\]


2. Backward-looking measures: measures that are derived from the relationship between a given patent and the body of knowledge that preceded it. These measure are thus constructed from the backward citations. One example of a backward-looking basicness measure they provide is Orginality, which is calculated as:

\[
\text{ORIGINALITY}_i = 1 - \sum_{k=1}^{N_i} \left( \frac{\text{NCITED}_{i,k}}{\text{NCITED}_i} \right)
\]

With **NCITING** and **NCITED** defined as the number of patents citing the focal patent and the number of patents cited by the focal patent, respectively. Index `i` corresponds to the focal patent considered, and `k` is the index of patent classes. For example, **NCITED_2,3** refers to the number of patents in patent class 3 and cited by our focal patent 2.


The table structure information is ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}
Begin Exploring Related Columns
**Relevant Tables and Columns:**

- **Table:** `PUBLICATIONS`
  - `"publication_number"`: Used to identify patents.
  - `"filing_date"`: Helps determine the filing year of patents.
- **Table:** `ABS_AND_EMB`
  - `"publication_number"`: To match patents with their embeddings.
  - `"embedding_v1"`: Contains the textual embeddings for patents, used to compute similarities.
- **Conditions:**
  - `"publication_number"` = `'US-9741766-B2'`: To locate the specific patent.
  - Same filing year as `'US-9741766-B2'`: To find patents filed in the same year.
  - `"embedding_v1"` IS NOT NULL: To ensure patents have embeddings available for similarity comparison.

**Sample SQL Queries to Explore the Data:**

1. **Retrieve the filing date of `US-9741766-B2`:**

   ```sql
   SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

2. **Get the publication date of `US-9741766-B2`:**

   ```sql
   SELECT "publication_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

3. **List patents with their filing dates to understand the date format:**

   ```sql
   SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   LIMIT 1000;
   ```

4. **Extract the filing year of `US-9741766-B2` by dividing the date:**

   ```sql
   SELECT "filing_date", FLOOR("filing_date" / 10000) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

5. **Find patents filed in the same year as `US-9741766-B2`:**

   ```sql
   SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   LIMIT 1000;
   ```

6. **Retrieve embeddings for `US-9741766-B2`:**

   ```sql
   SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

7. **List patents with available embeddings:**

   ```sql
   SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
   ```

8. **Explore embedding values for `US-9741766-B2`:**

   ```sql
   SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
   LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
   ```

9. **Identify patents filed in 2013 with available embeddings:**

   ```sql
   SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   AND "publication_number" IN (
     SELECT "publication_number"
     FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
     WHERE "embedding_v1" IS NOT NULL
   )
   LIMIT 1000;
   ```

10. **Retrieve embeddings for patents filed in 2013:**

    ```sql
    SELECT t1."publication_number", t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
    ON t1."publication_number" = t2."publication_number"
    WHERE FLOOR(t1."filing_date" / 10000) = 2013
    LIMIT 1000;
    ```

11. **List CPC codes for `US-9741766-B2` to understand its technological classification:**

    ```sql
    SELECT "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

12. **Explore patents with similar CPC classifications:**

    ```sql
    SELECT "publication_number", "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "cpc" IS NOT NULL
    LIMIT 1000;
    ```

13. **Retrieve abstracts for patents filed in 2013 for content analysis:**

    ```sql
    SELECT "publication_number", "abstract"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
    WHERE FLOOR((
      SELECT "filing_date"
      FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
      WHERE "publication_number" = t."publication_number"
    ) / 10000) = 2013
    LIMIT 1000;
    ```

14. **Find the top terms associated with `US-9741766-B2`:**

    ```sql
    SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
    LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

15. **List patents citing `US-9741766-B2` to understand its impact:**

    ```sql
    SELECT f.value::STRING AS "citing_patent"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
    LATERAL FLATTEN(input => t."cited_by") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
    ```

**Note:** The queries above are designed to explore the relevant data necessary for identifying patents similar to `US-9741766-B2`. They help in understanding the filing dates, embeddings, and classifications required to perform a similarity analysis based on technological aspects.Query:
SELECT "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
filing_date
20160511
Query:
SELECT "publication_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
publication_date
20170822
Query:
SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date
JP-1810118-C,0
JP-1203714-C,0
FR-1500580-A,19661104
ES-8501233-A1,19831124
CA-2165155-A1,19940603
FR-2409943-B1,19771125
GB-1086860-A,19660422
JP-S54117658-A,19780306
JP-H0710178-Y2,19880302
JP-3172057-B2,19950405
US-136580-A,0
US-272220-A,0
US-599187-A,0
CN-1062411-C,19940709
DE-1479218-U,0
EP-2512367-B1,20101209
ES-2312527-T3,20021205
FR-1000748-A,19491117
FR-1573809-A,19640424
JP-S5066757-U,19731018
JP-S5845249-Y2,19751212
US-2103405-A,19310429
GB-201114438-D0,20110822
JP-5707248-B2,20110622
JP-2016211567-A,20160502
KR-20040075216-A,20030220
CN-1954806-A,20051027
CN-201399214-Y,20090409
JP-1368881-C,0
JP-1444589-C,0
FR-1497898-A,19661027
DE-2707796-A1,19770223
DE-2962208-D1,19790928
FR-2233137-A1,19740617
GB-2224027-B,19891011
JP-S5911756-Y2,19790131
JP-2000218515-A,19990204
JP-S56169301-A,19800602
US-2002102047-A1,20020226
CN-1467804-A,20020712
EP-0988417-B1,19980603
JP-H04334685-A,19910509
JP-S6359143-U,19861007
JP-H0685910-B2,19851219
JP-H0350567-B2,19840507
JP-5108773-B2,20060829
CN-2768052-Y,20041102
CN-1940157-B,20060925
CN-202318915-U,20111123
CN-203200362-U,20130419
JP-897785-C,0
JP-1789132-C,0
JP-S62113530-U,19860109
CA-118661-S,20061213
FI-882364-A0,19880519
CA-810158-A,0
DE-2335240-A1,19730711
DE-7610943-U1,19760408
JP-H0673947-U,19930324
JP-S54153049-A,19780523
JP-S5716116-U,19800624
US-548167-A,0
CN-1055840-A,19910408
JP-S6020713-A,19830713
JP-S6234024-A,19850806
JP-H0995081-A,19951002
JP-H1088758-A,19960917
GB-189709494-A,18970414
JP-2001195445-A,20001128
JP-2010101160-A,20091021
CN-101746294-A,20090903
CN-104170353-A,20131227
CN-206056613-U,20160726
JP-1032657-C,0
JP-1654837-C,0
DK-146223-C,19720608
CA-564325-A,0
GB-0802422-D0,20080208
JP-S53139175-U,19770408
JP-H01150349-U,19880407
JP-2600796-Y2,19921015
JP-S591896-U,19820628
JP-S4922438-B1,19691202
US-419959-A,0
DE-69331528-D1,19931110
DE-69430885-T2,19940405
EP-1474362-B1,20030211
JP-2000346423-A,19990531
JP-2765752-B2,19900926
KR-900003183-Y1,19870430
JP-2003229053-A,20020131
JP-2007241524-A,20060307
JP-5129599-B2,20080208
KR-100547071-B1,20030228
KR-20070020426-A,20050210
KR-20130050682-A,20111108
CN-204556165-U,20150506
ES-66185-Y,19580519
CA-1331409-C,19891023
FI-891492-A0,19890329
GB-1348507-A,19710419
JP-S60179587-U,19840510
US-332138-A,0
CN-1112492-C,20000616
DE-566539-C,19280927
DE-845109-C,19500618
JP-S63125649-A,19870430
JP-S6423693-U,19870801
JP-S5243021-U,19750922
JP-S5566205-U,19781031
JP-H0825023-B2,19880630
JP-2003215980-A,20020425
JP-4255884-B2,20040608
KR-100295305-B1,19990212
CN-101547005-A,20080328
CN-101988676-A,20090806
CN-203259375-U,20130516
CN-205932945-U,20160822
DE-202006018912-U1,20061214
FR-2828332-A1,20000623
GB-1375879-A,19730427
JP-S53161674-U,19770523
US-2053075-A,19351119
CN-2484753-Y,20010531
CN-1212523-A,19980910
FI-20010786-A,20010417
JP-S6359144-U,19861004
JP-2799203-B2,19891128
JP-H08143121-A,19941117
US-1837725-A,19290917
US-2304134-A,19410527
US-1864623-A,19310103
JP-5991128-B2,20120929
JP-2016105749-A,20130405
RU-2191214-C2,20010109
RU-2008140707-A,20081015
CN-103265598-B,20130603
CN-203928708-U,20140627
CN-204557664-U,20150410
CN-206326242-U,20160701
CN-104559893-B,20150127
CN-106856628-A,20151209
US-6778773-B2,20020927
JP-H00985753-A,0
JP-1512007-C,0
NL-28211-C,0
CA-2184504-C,19960829
FR-877274-A,19411126
JP-S60218905-A,19850228
JP-H04326774-A,19910426
JP-S5125160-A,19740827
FR-1012104-A,19490609
JP-S5944363-A,19830802
JP-H081564-A,19940615
US-1233474-A,19160803
US-2002011230-A1,20010522
JP-2003169856-A,20011206
US-811638-A,19040305
KR-200338652-Y1,20031028
KR-20070041890-A,20051017
CN-1816294-A,20040705
CN-2858160-Y,20060210
CN-201276086-Y,20080820
CN-201816145-U,20100720
CN-102907994-A,20121109
JP-1573454-C,0
JP-1721868-C,0
JP-2100371-C,0
DK-358583-D0,19830805
ES-146285-Y,19690306
GB-478690-A,19370224
DE-2649618-B2,19761029
DE-3766112-D1,19871124
DE-8007402-U1,19800315
FR-390089-A,19080509
FR-638126-A,19270722
FR-2638622-B1,19881104
JP-H0584037-U,19920421
JP-S4739450-Y1,19670612
JP-H0642846-U,19921120
NL-296405-A,0
NL-7211943-A,19720901
EP-2781788-B1,20140319
JP-S5072414-U,19731109
JP-S5846920-U,19810925
JP-S5874811-U,19811118
JP-S5687776-U,19791211
US-D279853-S,19831227
KR-920008597-Y1,19880908
JP-2004313014-A,20030411
JP-6137070-B2,20140625
RU-2008132286-A,20080804
US-754320-A,19030502
CN-105823611-A,20160326
CN-106739164-A,20161228
CN-205558012-U,20160203
BE-512467-A,0
CA-2244766-A1,19980811
DE-1803332-A1,19681016
DE-2149141-A1,19711001
GB-2089320-A,19811207
JP-S62164685-U,19860407
JP-H066780-Y2,19890523
DE-69322442-T2,19930622
EP-1933436-B1,20071004
EP-0782478-B1,19950906
EP-0993180-B1,19991007
JP-S5128923-U,19740826
JP-S5153284-U,19741022
JP-S5376919-A,19761220
JP-3340813-B2,19930831
JP-2000192758-A,19981225
JP-H11193667-A,19971229
RU-17326-U1,20001209
KR-20110049427-A,20091105
CN-101531763-A,20090402
CN-201900010-U,20101217
CN-202142477-U,20110623
CN-202417422-U,20120104
CN-202807027-U,20120824
CA-27189-A,0
JP-S4874140-A,19711229
JP-2887866-B2,19980107
FR-
Query:
SELECT "filing_date", FLOOR("filing_date" / 10000) AS "filing_year"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
filing_date,filing_year
20160511,2016
Query:
SELECT "publication_number", "filing_date"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,filing_date
US-2014240005-A1,20130228
US-2014351651-A1,20130525
US-2014103818-A1,20130309
US-D704796-S,20130621
US-2013288391-A1,20130103
WO-2014178485-A1,20130823
CN-103354102-B,20130702
JP-2015121932-A,20131224
US-9313730-B2,20130215
CN-104470412-A,20130513
FR-3011553-A1,20131007
CN-103616203-A,20131209
US-2013310800-A1,20130722
CN-103042910-A,20130115
US-2015175040-A1,20131219
US-9303426-B2,20130301
CN-103547110-A,20131025
CN-104507960-A,20130530
CN-103409720-A,20130823
US-9164170-B2,20130114
CN-103605607-B,20131202
CN-103206736-B,20130318
WO-2013159946-A1,20130220
CN-203487136-U,20130813
CN-203502326-U,20131021
US-2015000790-A1,20130315
KR-101773267-B1,20130925
CN-104969057-A,20131202
US-8741361-B2,20130913
US-2014231961-A1,20130221
EP-2847134-A1,20130509
CN-103428908-B,20130812
CN-103217775-A,20130402
US-D737366-S,20130312
CN-103505416-A,20130924
CN-103591222-B,20131126
JP-2015035568-A,20130809
CN-103391114-B,20130729
CN-103687275-A,20130925
CN-103540698-A,20131102
US-2015212161-A1,20130920
CN-104520501-A,20130627
CN-103603525-B,20131030
CN-103629728-B,20131209
JP-2014051503-A,20131002
CN-104569952-B,20131024
US-2014035781-A1,20130130
KR-101486666-B1,20131101
JP-2014201698-A,20130408
CN-103423048-A,20130711
CN-103467811-A,20130816
KR-101374838-B1,20130325
CN-103864511-A,20131223
CN-103271698-A,20130523
CN-103706374-B,20131230
EP-2979323-A1,20130324
CN-104550135-A,20131015
CN-103415002-A,20130826
CN-103277435-A,20130619
US-2013318442-A1,20130517
US-2013268456-A1,20130401
CN-203527053-U,20131031
DE-102013111830-A1,20131028
US-2015325842-A1,20130522
JP-2015022523-A,20130719
US-2014130657-A1,20131104
KR-101623834-B1,20130809
CN-104726490-A,20131219
CN-103590480-A,20131023
CN-104144368-A,20130508
CN-103930364-A,20130130
KR-101467243-B1,20130326
EP-2719434-A1,20130319
CN-103424131-B,20130826
GB-2513643-A,20130502
CN-103677448-B,20131231
CN-103250592-A,20130531
CN-103511780-A,20130917
US-8627869-B1,20130125
CN-104145118-A,20130409
EP-2926131-A1,20131029
CN-103658112-A,20131220
CN-104346380-A,20130731
CN-103391409-A,20130725
CN-103584401-A,20131122
US-9293519-B2,20130621
EP-2645369-A3,20130314
DE-102013003505-A1,20130304
CN-104375173-B,20130815
RU-2504289-C1,20130225
US-9624723-B2,20131024
JP-5936769-B2,20130408
WO-2014112205-A1,20131122
US-9703618-B1,20130628
US-2014327579-A1,20130503
US-9077131-B2,20130606
US-2014207983-A1,20130122
CN-104251265-A,20130628
US-9108579-B2,20130621
CN-103640346-A,20131203
CN-103314981-A,20130711
CN-103524018-A,20130918
CN-103479187-A,20131007
CN-103300151-B,20130520
JP-2014000475-A,20131007
EP-2872449-A1,20130709
CN-103257513-A,20130207
CN-103322475-A,20130620
WO-2013153811-A1,20130410
WO-2013189349-A3,20130816
WO-2014011005-A1,20130712
US-2014153051-A1,20131129
US-2013252459-A1,20130515
US-2014042836-A1,20130703
US-2014062501-A1,20130905
US-2014257418-A1,20130307
JP-2014015461-A,20130704
WO-2014079812-A1,20131118
CN-103147710-B,20130221
EP-2796821-A1,20130426
KR-101386713-B1,20131004
JP-2015055334-A,20130913
JP-2015043119-A,20130826
CN-103405983-A,20130726
CN-103323019-A,20130117
CN-103086333-A,20130115
WO-2013129099-A1,20130213
US-2014040080-A1,20131008
CN-104302228-A,20130318
JP-2014181286-A,20130319
CN-103807435-B,20131029
CN-104149138-A,20130515
CN-103770994-A,20131129
CN-103496712-A,20130910
JP-2015065961-A,20131001
EP-2906314-A2,20131011
LU-92308-A1,20131113
CN-103500518-A,20131023
US-9520822-B2,20130426
CN-103697041-B,20131227
CN-103691154-B,20131205
CN-103432790-B,20130902
KR-101493797-B1,20131018
CN-103730984-A,20131225
CN-104412873-A,20130819
US-9634345-B2,20130524
CN-104936898-B,20131203
CN-103770639-A,20131212
CN-104252998-A,20130625
CN-103047204-A,20130105
KR-200476698-Y1,20131118
CN-103242971-A,20130503
CN-103501205-A,20131011
EP-2680136-A1,20130627
CN-103132095-A,20130131
CN-103146927-B,20130402
JP-2014224921-A,20130516
US-9224656-B2,20130725
CN-103431981-A,20130908
CN-103945090-B,20130117
CN-103235869-A,20130329
US-2015250755-A1,20131105
US-2014117855-A1,20130620
CN-103481344-A,20130917
US-2015172982-A1,20130801
CN-103601283-A,20131203
CN-103137850-B,20130221
GB-2508073-A,20130913
GB-2521319-B,20131002
CN-103651100-A,20131205
CN-103626067-B,20131113
JP-2013107008-A,20130313
EP-2724926-A1,20131024
US-D741298-S,20130123
CN-103709539-A,20131219
CN-103990582-A,20130216
CN-103531313-A,20130620
CN-104129667-A,20131129
CN-103426201-B,20130830
CN-103682186-B,20130830
CN-103808192-B,20131121
CN-103441181-A,20130830
EP-2743032-A1,20130311
EP-2839737-A1,20130821
CN-104246178-A,20130219
JP-5528646-B1,20130612
DE-102013216490-A1,20130820
CN-103552159-B,20131125
US-9326313-B2,20131028
CN-104546875-A,20131009
CN-103568666-A,20130907
KR-101365773-B1,20130923
CN-104048282-A,20130316
CN-103639477-B,20131205
CN-103163068-A,20130204
CN-103321161-A,20130708
KR-101466491-B1,20130618
JP-2015075357-A,20131007
CN-103352334-B,20130802
CN-103255303-A,20130516
EP-2676919-A1,20130621
CN-103618689-A,20130912
US-2014058243-A1,20130108
US-2015235611-A1,20130912
CN-103698194-
Query:
SELECT "embedding_v1"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_v1
"[
  -9.759014000000001e-02,
  -7.865134600000000e-02,
  -1.022462700000000e-01,
  -9.834030000000001e-02,
  -2.579060200000000e-01,
  -8.247189000000001e-02,
  1.374225900000000e-02,
  -1.229494800000000e-01,
  8.081952500000000e-02,
  2.691578000000000e-02,
  -1.114439740000000e-01,
  1.340977100000000e-01,
  7.433381000000000e-02,
  5.153231300000000e-03,
  -1.075460760000000e-01,
  -1.806273000000000e-02,
  1.831943100000000e-01,
  -2.954358000000000e-02,
  -6.046254600000000e-02,
  7.859522000000000e-05,
  2.566466300000000e-01,
  -2.432912800000000e-02,
  -1.067616100000000e-01,
  1.014580600000000e-01,
  -1.380856800000000e-01,
  -7.149687400000000e-02,
  2.085472300000000e-01,
  -1.329061700000000e-01,
  4.087418700000000e-02,
  3.374565800000000e-02,
  -7.300706999999999e-02,
  -5.706553500000000e-02,
  1.701403400000000e-02,
  -4.457178300000000e-02,
  -8.327014000000001e-02,
  -1.801684000000000e-01,
  5.113800200000000e-02,
  -3.076108700000000e-01,
  1.580761500000000e-01,
  -3.533404300000000e-02,
  4.311743400000000e-02,
  -1.017805560000000e-01,
  2.070724500000000e-01,
  -8.408691000000000e-02,
  -3.405414800000000e-01,
  4.591350600000000e-02,
  -9.560194599999999e-02,
  1.438113600000000e-01,
  9.557541000000000e-02,
  -3.235852300000000e-02,
  -1.889847800000000e-02,
  2.546579800000000e-01,
  -7.303727400000000e-02,
  1.090229450000000e-01,
  -3.175191000000000e-02,
  5.433388400000000e-02,
  1.566456700000000e-01,
  7.496597600000000e-02,
  -2.029408200000000e-01,
  5.405708800000000e-02,
  6.993917400000001e-02,
  2.129010400000000e-01,
  6.955723700000000e-03,
  3.396455000000000e-02
]"
Query:
SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
   WHERE "embedding_v1" IS NOT NULL
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number
US-2002199075-A1
US-2003048328-A1
US-2003102128-A1
US-2003177113-A1
US-2004074387-A1
US-2004113364-A1
US-2004134953-A1
US-2004205498-A1
US-2004211554-A1
US-2004268070-A1
US-2005087824-A1
US-2005137363-A1
US-2005219456-A1
US-2007191504-A1
US-2007206259-A1
US-2007245673-A1
US-2007256734-A1
US-2008004039-A1
US-2008093571-A1
US-2008109298-A1
US-2009139775-A1
US-2009192703-A1
US-2009277763-A1
US-2009317817-A1
US-2009318914-A1
US-2010197310-A1
US-2011135550-A1
US-2012010547-A1
US-2013169571-A1
WO-2007096405-A1
US-1374446-A
US-1394328-A
US-2408627-A
US-2563456-A
US-2701131-A
US-2932152-A
US-3094695-A
US-3147792-A
US-3194312-A
US-3327855-A
US-3329640-A
US-3607670-A
US-3644831-A
US-3859370-A
US-3937405-A
US-3937535-A
US-3999214-A
US-4012887-A
US-4069973-A
US-4119578-A
US-4147795-A
US-4369743-A
US-4479329-A
US-4523847-A
US-4554569-A
US-4590077-A
US-4650684-A
US-4663453-A
US-4694030-A
US-4708433-A
US-4735768-A
US-4754323-A
US-4769634-A
US-4809272-A
US-4851409-A
US-4980052-A
US-4984435-A
US-5248292-A
US-5299775-A
US-5347275-A
US-5380026-A
US-5447012-A
US-5564650-A
US-5595304-A
US-5602890-A
US-5718563-A
US-5753999-A
US-5792086-A
US-5817591-A
US-5856797-A
US-5873663-A
US-5952273-A
US-6011555-A
US-6071627-A
US-6084911-A
US-6087029-A
EP-1065496-A2
JP-S4728555-U
JP-S5146714-A
US-6218671-B1
US-6476737-B1
US-6561612-B2
US-6592268-B2
US-6666924-B1
US-6671418-B2
US-6752433-B2
US-6753754-B1
US-6831544-B2
US-6854476-B1
US-6893428-B2
US-6962028-B2
US-7106438-B2
US-7116003-B2
US-7140390-B2
US-7219083-B2
US-7444791-B1
US-7935140-B2
US-8713311-B1
WO-0133176-A1
WO-9004898-A1
WO-9952047-A1
CN-101441869-A
DE-10204477-A1
DE-10242257-B4
DE-19653503-A1
JP-H09213662-A
WO-02097090-A1
JP-2006078326-A
JP-2007290689-A
US-2001035801-A1
US-2002018432-A1
US-2002053196-A1
US-2002146214-A1
US-2002154037-A1
US-2004042671-A1
US-2004072119-A1
US-2004258922-A1
US-2005186904-A1
US-2006154097-A1
US-2006235539-A1
US-2007143171-A1
US-2007281762-A1
US-2008065154-A1
US-2008301497-A1
US-2009014625-A1
US-2009107160-A1
US-2009188127-A1
US-2011072355-A1
WO-2007082874-A1
US-791905-A
GB-2346632-A
US-1738893-A
US-1838213-A
US-2070281-A
US-2540130-A
US-2595499-A
US-2783046-A
US-3212127-A
US-3542052-A
US-3574065-A
US-3682027-A
US-3717947-A
US-3834670-A
US-3983363-A
US-4180111-A
US-4291244-A
US-4709320-A
US-4804696-A
US-4858719-A
US-4929189-A
US-5116320-A
US-5165792-A
US-5228678-A
US-5352111-A
US-5484078-A
US-5488872-A
US-5520160-A
US-5598869-A
US-5633590-A
US-5772309-A
US-5776966-A
US-5808597-A
US-5866740-A
US-5911742-A
US-5981843-A
EP-0206897-A2
EP-0696040-A1
US-6251456-B1
US-6255263-B1
US-6372495-B1
US-6391509-B1
US-6410846-B1
US-6446768-B2
US-6474522-B1
US-6593115-B2
US-6747606-B2
US-6782924-B2
US-6799999-B2
US-6986591-B2
US-6994437-B2
US-7118536-B2
US-7218854-B1
US-7278663-B2
US-7310109-B2
US-7431628-B2
US-7637823-B2
US-8388639-B2
US-9039757-B2
WO-0013685-A1
WO-8602561-A1
WO-9118512-A1
CN-101624192-A
CN-202479774-U
JP-H02144675-A
JP-S63297108-A
JP-2002097551-A
JP-2006042087-A
US-2001010544-A1
US-2002146958-A1
US-2002188881-A1
US-2003174075-A1
US-2004061474-A1
US-2004096382-A1
US-2004124550-A1
US-2004238931-A1
US-2004264634-A1
US-2005138019-A1
US-2005211658-A1
US-2005237396-A1
US-2006094603-A1
US-2007178679-A1
US-2007269197-A1
US-2008057277-A1
US-2011196200-A1
US-2013097526-A1
US-1345443-A
US-2076632-A
US-2364262-A
US-2556571-A
US-2625793-A
US-2807264-A
US-3303902-A
US-3333328-A
US-3390671-A
US-3658244-A
US-3664495-A
US-3716865-A
US-3828726-A
US-3844843-A
US-4039069-A
US-4057719-A
US-4125017-A
US-4139262-A
US-4191985-A
US-4725024-A
US-4787195-A
US-4800429-A
US-4836857-A
US-4843762-A
US-4885491-A
US-4963013-A
US-5024712-A
US-5096286-A
US-5280695-A
US-5308981-A
US-5382988-A
US-2951957-A
US-4897035-A
US-5832509-A
US-4560189-A
US-2952719-A
US-5311659-A
US-5623359-A
US-5073716-A
US-4209136-A
US-3739180-A
US-4817320-A
US-5360080-A
US-6064490-A
US-4535175-A
US-4857209-A
US-5942450-A
US-31614-A
US-5499036-A
US-2400726-A
US-D730919-S
GB-190818602-A
GB-2455446-B
CN-101174240-A
CN-101707380-A
US-2004180945-A1
US-2008124681-A1
US-2003148107-A1
US-2002178236-A1
US-2004071219-A1
US-2008173322-A1
US-2009025927-A1
US-2009222086-A1
US-2003086172-A1
US-2002177265-A1
US-2012104230-A1
US-2010081380-A1
US-2010045047-A1
US-2005020232-A1
US-2005286811-A1
US-2007172819-A1
US-2006192323-A1
US-2004168263-A1
US-2002097399-A1
US-2005267875-A1
US-2010301212-A1
US-2009121948-A1
US-2005251164-A1
US-2002057222-A1
US-2007267889-A1
US-2004067731-A1
US-2003131133-A1
US-2003136523-A1
US-2004033246-A1
US-2005091341-A1
DE-2452532-A1
DE-19807875-A1
US-7103817-B1
US-6270443-B1
US-6342700-B1
US-6553552-B1
US-6450549-B1
US-6677038-B1
US-6515122-B1
US-6446619-B1
US-6309207-B1
JP-2003164560-A
JP-S61159135-A
JP-2007289281-A
JP-2005255806-A
JP-H1083709-A
JP-H07122961-A
JP-2000142025-A
JP-2005085990-A
JP-H10182150-A
JP-2003022658-A
FR-2728459-A1
US-7009386-B2
US-6758348-B2
US-7686650-B2
US-6676707-B2
US-7321997-B2
US-6906028-B2
US-6809752-B2
US-7190869-B2
US-7432823-B2
US-6914349-B2
US-676040
Query:
SELECT f.value::FLOAT AS "embedding_value"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
   LATERAL FLATTEN(input => t."embedding_v1") f
   WHERE t."publication_number" = 'US-9741766-B2'
   LIMIT 1000;
Answer:
embedding_value
-0.09759014
-0.078651346
-0.10224627
-0.0983403
-0.25790602
-0.08247189
0.013742259
-0.12294948
0.080819525
0.02691578
-0.111443974
0.13409771
0.07433381
0.0051532313
-0.107546076
-0.01806273
0.18319431
-0.02954358
-0.060462546
7.859522e-05
0.25664663
-0.024329128
-0.10676161
0.10145806
-0.13808568
-0.071496874
0.20854723
-0.13290617
0.040874187
0.033745658
-0.07300707
-0.057065535
0.017014034
-0.044571783
-0.08327014
-0.1801684
0.051138002
-0.30761087
0.15807615
-0.035334043
0.043117434
-0.101780556
0.20707245
-0.08408691
-0.34054148
0.045913506
-0.095601946
0.14381136
0.09557541
-0.032358523
-0.018898478
0.25465798
-0.073037274
0.109022945
-0.03175191
0.054333884
0.15664567
0.074965976
-0.20294082
0.054057088
0.069939174
0.21290104
0.0069557237
0.03396455
Query:
SELECT "publication_number"
   FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
   WHERE FLOOR("filing_date" / 10000) = 2013
   AND "publication_number" IN (
     SELECT "publication_number"
     FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB
     WHERE "embedding_v1" IS NOT NULL
   )
   LIMIT 1000;
Answer:
Too long, hard cut:
publication_number
CN-203085932-U
WO-2014067348-A1
US-2014187204-A1
US-2014066435-A1
US-2014264575-A1
CN-203284459-U
CN-103337651-A
CN-203299231-U
US-2014303915-A1
US-2013221189-A1
CN-203353924-U
CN-103446031-B
RU-2013113552-A
CN-203361176-U
CN-103264663-A
CN-203106714-U
CN-203408889-U
US-2015049396-A1
CN-203517598-U
WO-2013157859-A1
EP-2841128-A4
US-2016034307-A1
WO-2014065408-A1
CN-103451476-A
CN-103431153-A
US-9599895-B2
US-9182419-B2
CN-203512882-U
US-9599650-B2
CN-103315858-A
CN-103469377-A
EP-3047617-A1
CN-103300288-A
US-9231016-B2
WO-2014188512-A1
US-8888421-B1
US-9056913-B2
CN-203174284-U
CN-105051476-B
CN-203391155-U
CN-103128551-A
US-8825476-B2
CN-203262802-U
EP-3061684-A1
CN-103737674-B
CN-203053096-U
CN-103260042-A
CN-103217819-B
CN-103587666-A
US-2014325349-A1
CN-103256435-A
WO-2014027331-A3
CN-103596410-B
US-2013286359-A1
CN-103434507-B
EP-2931411-A1
CN-103089120-B
CN-203581811-U
US-2013222998-A1
CN-203524581-U
CN-104584349-A
CN-203174118-U
CN-203119384-U
CN-104671085-B
CN-203246175-U
CN-203767868-U
CN-203381169-U
CN-203484834-U
JP-2015527040-A
CN-104676744-A
US-8696367-B2
CN-103205340-B
CN-203623666-U
CN-103344191-A
CN-103110441-A
CN-103310403-A
CN-103452517-A
US-9253028-B2
CN-103677052-A
CN-103641225-A
JP-5511039-B1
CN-203254585-U
CN-103316811-A
JP-5997062-B2
CN-203130197-U
CN-203577539-U
FR-3012337-B1
JP-2014050945-A
CN-203144294-U
CN-203568092-U
WO-2013174951-A1
CN-103657647-B
JP-5897497-B2
EP-2644446-A2
CN-203516521-U
JP-6127609-B2
CN-103386558-B
CN-203072832-U
CN-104170162-B
KR-20150064998-A
US-2014270241-A1
US-2014152072-A1
CN-104364640-B
US-8831478-B2
JP-2014192620-A
CN-203368574-U
US-2015285146-A1
CN-203245657-U
EP-2743238-A3
GB-2519571-A
CN-104168871-A
WO-2014163676-A1
JP-6158534-B2
US-9583820-B2
CN-103601878-A
JP-2015082097-A
JP-5877170-B2
JP-2015059895-A
EP-2997217-A4
RU-2625792-C2
WO-2014018923-A2
CN-103381769-A
JP-6049150-B2
EP-2931717-A1
KR-20140013914-A
RU-132560-U1
JP-5770808-B2
US-D722424-S
EP-2835095-A4
NL-2010592-C
US-9459186-B2
CN-103360942-B
US-2014310497-A1
EP-2700882-A3
CN-103699426-B
RU-2013120470-A
CN-103763706-B
JP-5956944-B2
WO-2014199482-A1
JP-6026379-B2
WO-2013186759-A1
EP-2683042-A2
JP-2014163922-A
US-2015002292-A1
CN-203294492-U
CN-203719666-U
CN-103468244-A
CN-203121023-U
GB-2512589-A
US-2014168876-A1
CN-203581885-U
US-2013168837-A1
US-2014191071-A1
CN-203311805-U
CN-104514540-A
US-2014250178-A1
US-2015144813-A1
US-8700968-B2
US-2013124748-A1
CA-2894615-A1
CN-203474572-U
US-9575480-B1
CN-203582137-U
US-2013253331-A1
CN-103585968-A
CN-103346922-B
CN-103397740-B
CN-103266223-B
JP-2015014308-A
CN-103606826-A
CN-103428996-A
CN-103120065-A
CN-104575757-A
EP-2701199-A3
CN-104013285-A
CN-104461183-A
CN-104508518-A
CN-203090270-U
WO-2013161468-A1
CN-103304404-A
US-2014048849-A1
KR-101740088-B1
CN-103670428-A
CN-203182978-U
CN-103226580-B
KR-101445593-B1
CN-103640346-A
US-2015004631-A1
CN-104271773-B
US-2014352899-A1
CN-103073696-B
CN-103067053-B
CN-203390253-U
CN-103683218-B
CN-103710137-A
CN-103411740-A
WO-2014007772-A3
US-2015085889-A1
EP-2780528-A1
JP-WO2014050803-A1
CN-104053992-A
JP-5877186-B2
CN-104508556-A
US-2013145150-A1
JP-5660150-B2
EP-2931781-A1
US-2014351327-A1
CN-103446752-A
CN-103682334-A
KR-20140107016-A
CN-105164647-A
CN-203209722-U
US-2014012042-A1
CN-103424907-A
CN-105103066-A
CN-103436567-B
RU-2515201-C1
JP-2013100108-A
EP-2621031-A2
US-2014093753-A1
CN-103172927-B
WO-2014064361-A1
EP-3058533-A1
CN-103697915-B
JP-2016533123-A
CN-103644536-B
US-9539539-B2
CN-103557404-B
RU-2554614-C2
CN-103421334-A
US-2015092286-A1
CN-203530992-U
CN-203091412-U
CN-203139411-U
CN-104414814-A
CN-104169723-A
WO-2014054061-A2
CN-203602872-U
KR-20150008668-A
CN-103040564-A
CN-103707618-A
CN-103551533-A
JP-2014222151-A
RU-2507287-C1
CN-103412224-A
CN-104426896-A
CN-103630439-A
US-2013306063-A1
WO-2013189726-A1
CN-103568013-B
KR-101446872-B1
CN-103793464-A
CN-203465818-U
CN-203077485-U
US-2015036846-A1
JP-2015124064-A
CN-203515456-U
CN-103601741-A
JP-2015512112-A
US-2015238728-A1
US-2014040393-A1
US-2014229377-A1
WO-2014051421-A3
CN-103297864-A
KR-101351400-B1
US-2015052993-A1
US-2013166409-A1
US-2014105865-A1
CN-203321504-U
US-2016369226-A1
EP-2687615-A2
CN-103377098-A
WO-2015049745-A1
US-2015032050-A1
CN-104937041-A
CN-103725065-A
WO-2014008511-A1
CN-103812398-A
CN-104283977-A
EP-2863772-B1
CN-203362157-U
CN-103383906-A
CN-203378838-U
CN-103584401-A
JP-2016508151-A
KR-20150011283-A
KR-20150060169-A
CN-203333915-U
CN-203445205-U
WO-2014094630-A1
US-2013162738-A1
JP-2013167150-A
CN-103449128-B
CN-203534074-U
CN-203071125-U
CN-203706710-U
US-2014054042-A1
US-2016334290-A1
CN-103783596-A
CN-103575237-A
CN-203609460-U
CN-103193040-A
CN-203273923-U
US-2015325318-A1
WO-2014062389-A2
KR-20140095846-A
US-8804872-B1
CN-103587940-A
CN-103392556-A
CN-103110638-A
CN-203575401-U
CN-103506417-A
JP-2014143408-A
WO-2013133434-A1
CN-103561023-A
US-2013285621-A1
CN-103335651-A
CN-203244833-U
CN-103745248-A
US-8665376-B2
EP-2851907-A1
CN-103578420-B
CN-104884644-A
CN-103198243-B
US-9259281-B
Query:
SELECT t1."publication_number", t2."embedding_v1"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS t1
    JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
    ON t1."publication_number" = t2."publication_number"
    WHERE FLOOR(t1."filing_date" / 10000) = 2013
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,embedding_v1
US-8554997-B1,"[
  -8.250444999999999e-02,
  -1.710680000000000e-01,
  -8.058429500000000e-02,
  -1.776437200000000e-01,
  -2.119537600000000e-01,
  -1.599637100000000e-01,
  -1.398428500000000e-01,
  -9.731123600000000e-02,
  1.545770000000000e-01,
  -6.818004000000000e-02,
  -4.961892000000000e-02,
  2.232717000000000e-01,
  -4.151114000000000e-02,
  -8.944259600000000e-02,
  -1.894027900000000e-01,
  5.836225300000000e-02,
  1.388387900000000e-02,
  -1.649990400000000e-01,
  6.128464600000000e-02,
  -2.178155400000000e-02,
  1.960998500000000e-01,
  2.747434600000000e-02,
  -1.099247800000000e-01,
  -4.587950000000000e-02,
  -6.597027600000000e-03,
  2.968162500000000e-02,
  1.911340700000000e-01,
  2.968327400000000e-03,
  2.054702800000000e-01,
  2.042513800000000e-01,
  -9.683183600000000e-02,
  -4.681838300000000e-02,
  -1.095023400000000e-01,
  8.547725500000000e-02,
  -1.536064100000000e-01,
  -1.613503100000000e-01,
  -8.310392000000000e-02,
  -2.032790800000000e-01,
  6.393608000000001e-02,
  -5.749258600000000e-04,
  -1.531140000000000e-01,
  -1.147272700000000e-01,
  2.719014600000000e-01,
  6.032276000000000e-02,
  -1.248303400000000e-01,
  4.400011600000000e-03,
  -3.194304600000000e-02,
  6.847679000000000e-02,
  1.703955000000000e-02,
  4.343584000000000e-02,
  -1.633246200000000e-01,
  -1.119821400000000e-02,
  6.993881600000000e-02,
  1.435678900000000e-01,
  9.783652399999999e-02,
  -3.719759400000000e-02,
  1.526583900000000e-01,
  8.395795000000000e-02,
  -2.246724000000000e-01,
  5.273677000000000e-02,
  -4.536501300000000e-02,
  4.946659000000000e-02,
  -2.370834000000000e-01,
  1.094236100000000e-01
]"
US-8806576-B1,"[
  -1.564216600000000e-02,
  -3.909041600000000e-01,
  1.898517600000000e-02,
  -1.484045000000000e-01,
  -7.696050400000000e-02,
  -1.672188200000000e-01,
  8.338847500000001e-04,
  -1.182967650000000e-01,
  1.088115300000000e-01,
  -1.120274140000000e-01,
  1.253927500000000e-01,
  1.444476700000000e-01,
  2.233864200000000e-02,
  -2.075008900000000e-02,
  3.575833700000000e-03,
  4.409090800000000e-02,
  -1.843273800000000e-02,
  -6.939334400000000e-02,
  1.683077600000000e-02,
  1.646315600000000e-01,
  7.416774000000000e-02,
  1.341052200000000e-01,
  -4.091450200000000e-02,
  -2.528860400000000e-02,
  -2.776720700000000e-02,
  1.774820700000000e-01,
  3.432411600000000e-01,
  9.626434000000000e-02,
  1.364537200000000e-01,
  -2.438634400000000e-03,
  -8.924128000000001e-02,
  1.174802300000000e-02,
  3.673669700000000e-02,
  -3.906260800000000e-02,
  -7.106171500000000e-02,
  6.386095000000000e-02,
  3.921813000000000e-02,
  -1.119349000000000e-01,
  -2.009314000000000e-02,
  9.909318000000000e-03,
  -3.365039000000000e-02,
  -8.766731000000000e-02,
  4.311543000000000e-02,
  1.861599100000000e-01,
  1.612983300000000e-01,
  4.469404400000000e-02,
  1.459620900000000e-02,
  -8.901618400000000e-02,
  -1.728157300000000e-01,
  8.700885600000000e-02,
  -2.907790200000000e-01,
  -1.894055100000000e-02,
  -4.003992300000000e-02,
  1.550799800000000e-02,
  -3.025997000000000e-02,
  2.070812300000000e-01,
  3.454935500000000e-03,
  -1.103280100000000e-02,
  -3.072734500000000e-01,
  2.208325000000000e-01,
  -1.320568700000000e-02,
  8.993078000000000e-02,
  6.440867000000000e-02,
  1.913789200000000e-01
]"
US-9166332-B2,"[
  -7.085666000000000e-02,
  -2.033819100000000e-01,
  -2.320469200000000e-02,
  -1.386202600000000e-01,
  -4.288875300000000e-02,
  -1.685402800000000e-01,
  -8.623867500000000e-02,
  1.241327300000000e-02,
  8.699438000000000e-02,
  -2.323668000000000e-01,
  8.866887499999999e-02,
  1.386992800000000e-02,
  -8.382101000000000e-02,
  1.997755700000000e-02,
  -5.622283400000000e-02,
  -8.552690999999999e-03,
  1.018030350000000e-01,
  1.676478800000000e-01,
  -2.182107100000000e-01,
  2.221019900000000e-01,
  6.796289000000000e-02,
  -2.033459600000000e-02,
  -2.188032700000000e-01,
  1.435412000000000e-01,
  -3.413684300000000e-02,
  2.078379000000000e-01,
  3.445979200000000e-02,
  1.635818300000000e-01,
  -5.791418600000000e-02,
  3.418623300000000e-02,
  3.342397500000000e-02,
  1.596238800000000e-01,
  -8.456411000000000e-02,
  -1.787647500000000e-03,
  -2.919114800000000e-02,
  -2.407133900000000e-01,
  4.936260000000000e-02,
  -1.882336700000000e-01,
  5.722904000000000e-03,
  5.924567600000000e-02,
  1.643058500000000e-01,
  -4.645414700000000e-02,
  1.294502900000000e-01,
  2.959425600000000e-02,
  -5.032646000000000e-02,
  -6.140311000000000e-03,
  1.769238700000000e-01,
  6.436124000000000e-02,
  1.480919300000000e-01,
  -1.401374000000000e-01,
  -7.689495000000000e-02,
  1.398213000000000e-01,
  -1.905379700000000e-01,
  2.116795200000000e-01,
  -1.709760700000000e-01,
  1.995408800000000e-01,
  -8.469106999999999e-02,
  -8.347738500000000e-02,
  1.450400800000000e-03,
  8.831372000000000e-02,
  -8.226142000000000e-02,
  1.560426500000000e-01,
  -1.930279400000000e-01,
  6.097224000000000e-02
]"
CN-103211297-
Query:
SELECT "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Answer:
Too long, hard cut:
cpc
"[
  {
    ""code"": ""G11C13/0026"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0069"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1233"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/003"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/149"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/31"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C7/1006"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/004"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0023"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0002"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/71"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0097"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/146"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/35"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1608"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2454"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2481"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0028"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0007"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/147"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66666"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/063"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L21/768"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/78"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C7/1006"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0026"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/35"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01L27/2454"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/31"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/78"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/06"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0023"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/02"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/1608"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/149"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C2213/71"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0028"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L29/66666"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/004"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C5/063"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0069"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/146"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G11C13/0007"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01L45/147"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": 
Query:
SELECT "publication_number", "cpc"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS
    WHERE "cpc" IS NOT NULL
    LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,cpc
CN-104260754-A,"[
  {
    ""code"": ""B61K9/08"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-3939506-A,"[
  {
    ""code"": ""E03D9/04"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""E03D9/052"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
KR-101486666-B1,"[
  {
    ""code"": ""H02K5/18"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H05K7/20"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
KR-101017597-B1,"[
  {
    ""code"": ""G01V2210/661"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G01V99/005"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T17/05"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
JP-2010511460-A,"[
  {
    ""code"": ""A61L9/037"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""A61L9/127"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""A61L9/122"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-102085956-B,[]
RU-2039928-C1,[]
CN-104891425-A,[]
US-8520301-B2,"[
  {
    ""code"": ""G02B5/281"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/208"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/281"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B5/208"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B7/021"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G02B1/115"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-4767715-A,"[
  {
    ""code"": ""C12C1/0275"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""C12C1/10"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-8463797-B2,"[
  {
    ""code"": ""H04L9/3247"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G06F17/30386"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06F21/564"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
EP-1506427-A1,"[
  {
    ""code"": ""G06T15/08"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T5/50"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/30016"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/20221"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""G01R33/56341"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06T2207/10092"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  }
]"
US-4168984-A,"[
  {
    ""code"": ""C04B24/045"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-3328541-A,"[
  {
    ""code"": ""G07F7/025"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G06Q20/342"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G07F7/0833"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""G07F7/08"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
US-4520785-A,"[
  {
    ""code"": ""Y02T10/36"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""F02M21/0239"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""F02B43/00"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""Y02T10/32"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""F02M21/04"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""F02D19/0642"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-102699533-B,[]
WO-2010013298-A1,"[
  {
    ""code"": ""B62D5/0463"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""B62D5/0472"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  }
]"
JP-2014201698-A,[]
CN-100462795-C,"[
  {
    ""code"": ""G02F1/13392"",
    ""first"": true,
    ""inventive"": true,
    ""tree"": []
  }
]"
CN-103105794-A,[]
US-7173260-B2,"[
  {
    ""code"": ""H01J2237/0213"",
    ""first"": false,
    ""inventive"": false,
    ""tree"": []
  },
  {
    ""code"": ""H01J37/165"",
    ""first"": false,
    ""inventive"": true,
    ""tree"": []
  },
  {
    ""code"": ""H01J2237/31705"",
    ""first"": false
Query:
SELECT t."publication_number", t."abstract"
FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t
JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
  ON t."publication_number" = p."publication_number"
WHERE FLOOR(p."filing_date" / 10000) = 2013
LIMIT 1000;
Answer:
Too long, hard cut:
publication_number,abstract
ES-1078947-Y,
ES-1085131-Y,
ES-1088829-U,"1. headpiece (1), particularly for a user to fall conditioned hair by medicine, with an inner cap (2) having on the outside a closing means (4) for releasable connection with closure means (5) corresponding to the inside of an outer cap (6), wherein the inner cap (2) is made of a textile functional material.  2. headpiece (1) according to claim 1, characterized in that the textile functional material has chemical fiber, preferably chemical fibers of synthetic polymers, particularly polyamide, polypropylene, polyester or polyurethane, or chemical fibers of natural polymers in particular Lyocell.  3. headpiece (1) according to claim 1, characterized in that the functional textile material has natural fibers, preferably lana merino.  4. headpiece (1) according to one of claims 1 to 3, characterized in that the textile functional material comprises at least two layers, such as a Softshell material.  5. headpiece (1) according to one of claims 1 to 4, wherein the closure means (4) of the inner cap (2) elements are provided push button (7) for attachment elements pushbutton (7 &#39;) adapted to the outer cap (6).  6. headpiece (1) according to claim 5, wherein the closing means (4) are arranged on the encircling collar (8) of the inner cap (2).  7. headpiece (1) according to claim 5 or 6, characterized in that the push button (7) of the inner cap (2) are fixed in a flexible textile tape (9).  8. headpiece (1) according to claim 6 or 7, characterized in that the push button (7) are arranged at substantially regular intervals along the encircling collar (8) of the inner cap (2) .  9. headpiece (1) according to one of claims 1 to 8, wherein the inner cap (2) has several pieces of cap (2 &#39;) which are joined together by seams (10) extending on the outside of the inner cap (2).  10. headpiece (1) according to one of claims 1 to 9, wherein the inner cap (2) has on the inner side anti-sliding means (16) for inhibiting sliding touched for use head (1).  11. headpiece (1) according to claim 10, characterized in that for the configuration of the antislip means (16) an area (17) preferably in tape form, having greater slip resistance is provided at least the functional textile material.  12. headpiece (1) according to claim 11, characterized in that the zone of greater slip resistance is formed of a rubber material.  13. headpiece (1) according to claim 10, wherein the functional textile material has, for the configuration of the antislip means, threads which reinforce adhesion, preferably a rubber material, in particular rubber or silicone.  14. headpiece (1) according to one of claims 1 to 13, wherein the inner cap (2) has an adjusting (12) for adjusting the width of an opening (2 &#39; &#39;) of the inner cap (2).  15. headpiece (1) according to claim 14, characterized in that the adjusting device (12) has a closure strip (13) fixable in various positions.  16. headpiece (1) according to one of claims 1 to 15, wherein the inner cap (2) has a section expansion (11) which has greater flexibility in the circumferential direction another section of the inner cap (2).  17. headpiece (1) according to claim 16 to claim 14, characterized in that the adjusting device (12) is arranged along the expansion section (11) of the inner cap (2).  18. headpiece (1) according to claim 16 or 17, characterized in that for setting the expansion section (11) are provided folds (11 &#39;) extending in longitudinal direction of the inner cap ( 2).  19. headpiece (1) according to one of claims 1 to 18, wherein the inner cap (2) is connected to the outer cap (6) through the closure means (4, 5)."
ES-1091930-Y,
ES-1092405-Y,
ES-1095932-Y,
ES-1096432-U,"1. Protection device in soda cans against pollutants, characterized by being a circular plastic element, covering the entire top surface of the can and is attached thereto, also has a coined area, which follows in part, and is bent on itself to create an extra surface for the lips."
ES-1128130-Y,
GB-2499345-B,"A supervisory system controller for controlling and monitoring the generation of electrical energy from renewable sources and management methods for the storage of energy so generated and interconnecting the energy-generating elements, storage and load. The supervisory system controller operates to maximum the power transfer from a wind turbine to a battery by automatically varying the threshold levels at which turbine dump loads are switched based on system inputs and measurements. The method conserves generator fuel by delaying a scheduled generator maintenance running period such that it to occurs when renewable energy availability is predicted to be low and battery is in a reduced state of charge. Further modifications and management methods are also provided."
GB-2499513-A,"The invention relates to a liquid-crystalline medium characterised in that it contains one or more compounds of the formula IA, and at least one c
Query:
SELECT f.value::STRING AS "top_term"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
    LATERAL FLATTEN(input => t."top_terms") f
    WHERE t."publication_number" = 'US-9741766-B2'
    LIMIT 1000;
Answer:
top_term
line
fig
selection
bit
memory
word
lines
cell
gate
data
Query:
WITH target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),

other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
),

dot_products AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)

SELECT "publication_number"
FROM dot_products
ORDER BY similarity_score DESC
LIMIT 5;
Answer:
publication_number
US-D796401-S
End Exploring Related Columns
Task: Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers.

Please answer only one complete SQL in snowflake dialect in ```sql``` format.
Usage example: SELECT S."Column_Name" FROM {Database Name}.{Schema Name}.{Table_name} (ensure all column names are enclosed in double quotations)
Follow the answer format like: Based on technological similarities, the top five patents filed in the same year as **US-9741766-B2** are:

```csv
publication_number
pub_number_1:str
pub_number_2:str
pub_number_3:str
pub_number_4:str
pub_number_5:str
```

**Explanation:**

The publication numbers listed are placeholders (`pub_number_n:str`) representing the top five patents most similar to **US-9741766-B2**. These patents were identified by calculating the similarity between the embedding vectors of patents filed in the same year as **US-9741766-B2**. The similarity was measured using the dot product of the embedding vectors, with higher values indicating greater technological similarity..
Here are some useful tips for answering:
When calculating distances between two geometries, use `ST_MakePoint(x, y)` to make a point and `ST_Distance(geometry1 GEOMETRY, geometry2 GEOMETRY)` to compute. No need to convert from meters to miles unless requested. Don't use Haversine like 2 * 6371000 * ASIN(...), use ST_DISTANCE for more precise results.
When performing a UNION operation on many tables, ensure that all table names are explicitly listed. Union first and then add condition and selection. e.g. SELECT "col1", "col2" FROM (TABLE1 UNION ALL TABLE2) WHERE ...; Don't write sqls as (SELECT col1, col2 FROM TABLE1 WHERE ...) UNION ALL (SELECT col1, col2 FROM TABLE2 WHERE ...); Don't use ['-- Include all', '-- Omit', '-- Continue', '-- Union all', '-- ...', '-- List all', '-- Replace this', '-- Each table', '-- Add other'] to omit any table. Table names here: ({database name: {schema name: {table name}}}): 
{'PATENTS_GOOGLE': {'PATENTS_GOOGLE': ['ABS_AND_EMB', 'CPC_DEFINITION', 'DISCLOSURES_13', 'PUBLICATIONS']}}

For string-matching scenarios, if the string is decided, don't use fuzzy query, and avoid using REGEXP. e.g. Get the object's title contains the word "book" SQL: WHERE "title" LIKE '%book%'
However, if the string is not decided, you may use ILIKE and %. e.g. Get articles that mention "education": SQL: "body" ILIKE '%education%' OR "title" ILIKE '%education%'
When handling TO_TIMESTAMP_NTZ conversions, use query like: SELECT CASE WHEN "date" >= 1e15 THEN TO_TIMESTAMP_NTZ("date" / 1000000) WHEN "date" >= 1e12 THEN TO_TIMESTAMP_NTZ("date" / 1000) ELSE TO_TIMESTAMP_NTZ("date") END AS parsed_timestamp FROM my_table;
When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.
Keep all decimals to four decimal places.

2025-01-16 17:19:57 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:19:57 - root - INFO - ```sql
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents filed in the same year, excluding the target patent
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;
```
2025-01-16 17:19:57 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:19:57 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:19:57 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:19:59 - snowflake.connector.cursor - INFO - Number of results in first chunk: 0
2025-01-16 17:19:59 - snowflake.connector.connection - INFO - closed
2025-01-16 17:19:59 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:19:59 - root - INFO - itercount: 1
2025-01-16 17:19:59 - root - INFO - No data found for the specified query.

2025-01-16 17:19:59 - root - INFO - Input sql:
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents filed in the same year, excluding the target patent
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;
The error information is:
 No data found for the specified query.
When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.

2025-01-16 17:20:46 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:20:46 - root - INFO - Apologies for the inconvenience.

The error occurs because there are no other patents filed in 2016 with available embeddings in the `ABS_AND_EMB` table besides `US-9741766-B2`. As a result, the query returns no data.

To resolve this issue, we can adjust the query by removing the filing year condition. This will allow us to find the top five patents most similar to `US-9741766-B2` based on technological similarities, regardless of their filing year.

Here is the updated SQL query:

```sql
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents with available embeddings
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;
```

**Explanation:**

- **Removal of the Filing Year Condition:** By removing the condition `FLOOR(p."filing_date" / 10000) = 2016`, we include all patents with available embeddings, regardless of their filing year.

- **Computing Similarities:** We calculate the similarity between `US-9741766-B2` and all other patents using the dot product of their embedding vectors.

- **Selecting the Top 5 Patents:** We order the patents by their similarity scores in descending order and select the top five.

This query will provide the publication numbers of the top five patents most similar to `US-9741766-B2` based on technological similarities.

**Note:** If you prefer to limit the search to patents filed in a specific year where embeddings are available (e.g., 2013), you can adjust the query by replacing the year in the filing date condition:

```sql
-- Modify this line to change the filing year
WHERE FLOOR(p."filing_date" / 10000) = 2013
```

However, keep in mind that the availability of embeddings may vary by year, and limiting the query to a specific year might still result in no data if embeddings are unavailable for that period.
2025-01-16 17:20:46 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:20:46 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:20:46 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:20:47 - snowflake.connector.cursor - INFO - Number of results in first chunk: 1
2025-01-16 17:20:47 - snowflake.connector.connection - INFO - closed
2025-01-16 17:20:48 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:20:48 - root - INFO - itercount: 2
2025-01-16 17:20:48 - root - INFO - 0
2025-01-16 17:20:48 - root - INFO - results: 
publication_number
CN-204068275-U


2025-01-16 17:20:48 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: Based on technological similarities, the top five patents filed in the same year as **US-9741766-B2** are:

```csv
publication_number
pub_number_1:str
pub_number_2:str
pub_number_3:str
pub_number_4:str
pub_number_5:str
```

**Explanation:**

The publication numbers listed are placeholders (`pub_number_n:str`) representing the top five patents most similar to **US-9741766-B2**. These patents were identified by calculating the similarity between the embedding vectors of patents filed in the same year as **US-9741766-B2**. The similarity was measured using the dot product of the embedding vectors, with higher values indicating greater technological similarity. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
CN-204068275-U
Current sql:
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents with available embeddings
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.

2025-01-16 17:21:54 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:21:54 - root - INFO - ```sql
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents filed in the same year, excluding the target patent
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;
```
2025-01-16 17:21:54 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:21:54 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:21:54 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:21:55 - snowflake.connector.cursor - INFO - Number of results in first chunk: 0
2025-01-16 17:21:55 - snowflake.connector.connection - INFO - closed
2025-01-16 17:21:56 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:21:56 - root - INFO - itercount: 3
2025-01-16 17:21:56 - root - INFO - No data found for the specified query.

2025-01-16 17:21:56 - root - INFO - Input sql:
WITH
-- Extract the embedding of the target patent
target_embedding AS (
  SELECT f.seq AS pos, f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t,
       LATERAL FLATTEN(input => t."embedding_v1") f
  WHERE t."publication_number" = 'US-9741766-B2'
),
-- Get embeddings of other patents filed in the same year, excluding the target patent
other_patents_embeddings AS (
  SELECT t2."publication_number",
         f.seq AS pos,
         f.value::FLOAT AS emb_value
  FROM PATENTS_GOOGLE.PATENTS_GOOGLE.ABS_AND_EMB t2
  JOIN PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p
    ON t2."publication_number" = p."publication_number"
  , LATERAL FLATTEN(input => t2."embedding_v1") f
  WHERE FLOOR(p."filing_date" / 10000) = 2016
    AND t2."publication_number" != 'US-9741766-B2'
    AND t2."embedding_v1" IS NOT NULL
),
-- Compute the similarity scores
similarities AS (
  SELECT o."publication_number",
         SUM(t.emb_value * o.emb_value) AS similarity_score
  FROM target_embedding t
  JOIN other_patents_embeddings o
    ON t.pos = o.pos
  GROUP BY o."publication_number"
)
-- Select the top 5 most similar patents
SELECT s."publication_number"
FROM similarities s
ORDER BY s.similarity_score DESC NULLS LAST
LIMIT 5;
The error information is:
 No data found for the specified query.
When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.

2025-01-16 17:22:39 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:22:39 - root - INFO - ```csv
publication_number
pub_number_1
pub_number_2
pub_number_3
pub_number_4
pub_number_5
```

These publication numbers represent the top five patents filed in the same year as **US-9741766-B2** that are most similar based on technological similarities.

**SQL Query:**

```sql
WITH target_cpc AS (
    SELECT
        cpc.value:"code"::STRING AS cpc_code
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE p."publication_number" = 'US-9741766-B2'
),

other_patents_cpc AS (
    SELECT
        p."publication_number",
        cpc.value:"code"::STRING AS cpc_code
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE FLOOR(p."filing_date" / 10000) = 2016
      AND p."publication_number" != 'US-9741766-B2'
),

shared_cpc_counts AS (
    SELECT
        o."publication_number",
        COUNT(*) AS shared_cpc_count
    FROM other_patents_cpc o
    JOIN target_cpc t ON o.cpc_code = t.cpc_code
    GROUP BY o."publication_number"
)

SELECT "publication_number"
FROM shared_cpc_counts
ORDER BY shared_cpc_count DESC NULLS LAST
LIMIT 5;
```

**Explanation:**

- **Technological Similarity via CPC Codes:** Since embeddings are not available for patents filed in 2016, we are using shared CPC (Cooperative Patent Classification) codes to measure technological similarity.

- **Extracting CPC Codes for `US-9741766-B2`:** The `target_cpc` common table expression (CTE) extracts all CPC codes associated with `US-9741766-B2`.

- **Retrieving Other Patents Filed in 2016:** The `other_patents_cpc` CTE retrieves CPC codes for all other patents filed in 2016, excluding the target patent.

- **Calculating Shared CPC Codes:** The `shared_cpc_counts` CTE counts the number of shared CPC codes between the target patent and each other patent filed in the same year.

- **Selecting the Top 5 Patents:** The final `SELECT` statement retrieves the publication numbers of the top five patents with the highest count of shared CPC codes, indicating greater technological similarity.

**Note:** The placeholders `pub_number_1` to `pub_number_5` represent the publication numbers of the top five similar patents, which will be obtained upon executing the SQL query.
2025-01-16 17:22:39 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:22:39 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:22:39 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:22:41 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-16 17:22:41 - snowflake.connector.connection - INFO - closed
2025-01-16 17:22:41 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:22:41 - root - INFO - itercount: 4
2025-01-16 17:22:41 - root - INFO - 0
2025-01-16 17:22:41 - root - INFO - results: 
publication_number
US-2017053967-A1
US-2017033284-A1
WO-2017025764-A1
WO-2017109457-A1
US-2017098695-A1


2025-01-16 17:22:41 - root - INFO - Please check the answer again by reviewing Identify the top five patents filed in the same year as `US-9741766-B2` that are most similar to it based on technological similarities. Please provide the publication numbers., reviewing Relevant Tables and Columns and Possible Conditions and then give the final SQL query. Don't output other queries. If you think the answer is right, just output the current SQL.
Keep all decimals to four decimal places.
The answer format should be like: Based on technological similarities, the top five patents filed in the same year as **US-9741766-B2** are:

```csv
publication_number
pub_number_1:str
pub_number_2:str
pub_number_3:str
pub_number_4:str
pub_number_5:str
```

**Explanation:**

The publication numbers listed are placeholders (`pub_number_n:str`) representing the top five patents most similar to **US-9741766-B2**. These patents were identified by calculating the similarity between the embedding vectors of patents filed in the same year as **US-9741766-B2**. The similarity was measured using the dot product of the embedding vectors, with higher values indicating greater technological similarity. The answer should match the number of rows, the column name of the format and the filled values in the format (e.g. filled year or month). Don't output extra rows or nested rows!
Current snswer: 
publication_number
US-2017053967-A1
US-2017033284-A1
WO-2017025764-A1
WO-2017109457-A1
US-2017098695-A1
Current sql:
WITH target_cpc AS (
    SELECT
        cpc.value:"code"::STRING AS cpc_code
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE p."publication_number" = 'US-9741766-B2'
),

other_patents_cpc AS (
    SELECT
        p."publication_number",
        cpc.value:"code"::STRING AS cpc_code
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE FLOOR(p."filing_date" / 10000) = 2016
      AND p."publication_number" != 'US-9741766-B2'
),

shared_cpc_counts AS (
    SELECT
        o."publication_number",
        COUNT(*) AS shared_cpc_count
    FROM other_patents_cpc o
    JOIN target_cpc t ON o.cpc_code = t.cpc_code
    GROUP BY o."publication_number"
)

SELECT "publication_number"
FROM shared_cpc_counts
ORDER BY shared_cpc_count DESC NULLS LAST
LIMIT 5;When using ORDER BY xxx DESC, add NULLS LAST to exclude null records: ORDER BY xxx DESC NULLS LAST.

2025-01-16 17:23:02 - httpx - INFO - HTTP Request: POST https://sfc-ml-sweden.openai.azure.com/openai/deployments/o1-preview/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-01-16 17:23:02 - root - INFO - ```sql
WITH target_cpc AS (
    SELECT
        cpc.value:"code"::STRING AS "cpc_code"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE p."publication_number" = 'US-9741766-B2'
),

other_patents_cpc AS (
    SELECT
        p."publication_number",
        cpc.value:"code"::STRING AS "cpc_code"
    FROM PATENTS_GOOGLE.PATENTS_GOOGLE.PUBLICATIONS p,
         LATERAL FLATTEN(input => p."cpc") cpc
    WHERE FLOOR(p."filing_date" / 10000) = 2016
      AND p."publication_number" != 'US-9741766-B2'
),

shared_cpc_counts AS (
    SELECT
        o."publication_number",
        COUNT(*) AS "shared_cpc_count"
    FROM other_patents_cpc o
    JOIN target_cpc t ON o."cpc_code" = t."cpc_code"
    GROUP BY o."publication_number"
)

SELECT s."publication_number"
FROM shared_cpc_counts s
ORDER BY s."shared_cpc_count" DESC NULLS LAST
LIMIT 5;
```
2025-01-16 17:23:02 - snowflake.connector.connection - INFO - Snowflake Connector for Python Version: 3.12.4, Python Version: 3.11.11, Platform: Linux-6.1.38-x86_64-with-glibc2.31
2025-01-16 17:23:02 - snowflake.connector.connection - INFO - Connecting to GLOBAL Snowflake domain
2025-01-16 17:23:02 - snowflake.connector.connection - INFO - This connection is in OCSP Fail Open Mode. TLS Certificates would be checked for validity and revocation status. Any other Certificate Revocation related exceptions or OCSP Responder failures would be disregarded in favor of connectivity.
2025-01-16 17:23:03 - snowflake.connector.cursor - INFO - Number of results in first chunk: 5
2025-01-16 17:23:03 - snowflake.connector.connection - INFO - closed
2025-01-16 17:23:04 - snowflake.connector.connection - INFO - No async queries seem to be running, deleting session
2025-01-16 17:23:04 - root - INFO - itercount: 5
2025-01-16 17:23:04 - root - INFO - 0
2025-01-16 17:23:04 - root - INFO - Total iteration counts: 5
